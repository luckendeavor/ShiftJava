[TOC]

### é¢è¯•æ€»ç»“

#### ç®—æ³•æ€»ç»“

##### 1. ç®—æ³•æ¨¡æ¿

###### å›æº¯æ¨¡æ¿

```java
List<ç­”æ¡ˆ> result;
public void backTrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨){
    if(æ»¡è¶³ç»“æŸæ¡ä»¶) {
        result.add(è·¯å¾„);
        return;
    }
    for (é€‰æ‹© in é€‰æ‹©åˆ—è¡¨) {
        åšé€‰æ‹©;
        backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨);
        æ’¤é”€é€‰æ‹©;
    }
}
```

**å…¶æ ¸å¿ƒå°±æ˜¯ for å¾ªç¯é‡Œé¢çš„é€’å½’ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹å‰ã€Œåšé€‰æ‹©ã€ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹åã€Œæ’¤é”€é€‰æ‹©ã€**ã€‚**åªè¦åœ¨é€’å½’ä¹‹å‰åšå‡ºé€‰æ‹©ï¼Œåœ¨é€’å½’ä¹‹åæ’¤é”€åˆšæ‰çš„é€‰æ‹©**ï¼Œå°±èƒ½æ­£ç¡®å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„é€‰æ‹©åˆ—è¡¨å’Œè·¯å¾„ã€‚

å…¸å‹é¢˜ç›®ï¼šå…¨æ’åˆ—ã€‚

###### äºŒåˆ†æ¨¡æ¿

```java
int binarySearch(int[] nums, int target) {
    int left = 0; 
    int right = nums.length - 1; // æ³¨æ„

    while(left <= right) {
        int mid = left + (right - left) / 2;
        if(nums[mid] == target)
            return mid; 
        else if (nums[mid] < target)
            left = mid + 1; // æ³¨æ„
        else if (nums[mid] > target)
            right = mid - 1; // æ³¨æ„
    }
    return -1;
}
```

while é‡Œé¢çš„ left ä¸ right æ˜¯å¦ç›¸ç­‰ï¼Œ**ä»¥åŠ left å’Œ right æ¯æ¬¡æ˜¯ mid è¿˜æ˜¯ mid + 1ï¼Œè¿˜æ˜¯ mid - 1**ï¼Œè¿™éœ€è¦çœ‹å…·ä½“çš„**åŒºé—´**è€Œå®šã€‚

æ¯æ¬¡ left ä¸ right å˜åŒ–æ—¶éœ€ä¸éœ€è¦åŠ ä¸€å‡ä¸€éœ€è¦çœ‹è¿™ä¸ªè¾¹ç•Œæ˜¯å¦å·²ç»æœç´¢è¿‡äº†ã€‚å¦‚æœæ˜¯**é—­åŒºé—´**çš„æŸä¸ªè¾¹ç•Œå·²ç»æœç´¢è¿‡ï¼Œé‚£ä¹ˆå°±éœ€è¦è·³è¿‡ã€‚

æ³¨æ„ã€Œæœç´¢åŒºé—´ã€å’Œ while çš„ç»ˆæ­¢æ¡ä»¶ï¼Œå¦‚æœå­˜åœ¨æ¼æ‰çš„å…ƒç´ ï¼Œè®°å¾—åœ¨æœ€åæ£€æŸ¥ã€‚

å¦‚éœ€å®šä¹‰**å·¦é—­å³å¼€**çš„ã€Œæœç´¢åŒºé—´ã€æœç´¢å·¦å³è¾¹ç•Œï¼Œåªè¦åœ¨ **nums[mid] == target** æ—¶åšä¿®æ”¹å³å¯ï¼Œæœç´¢**å³ä¾§æ—¶éœ€è¦å‡ä¸€**ã€‚

å¦‚æœå°†ã€Œæœç´¢åŒºé—´ã€å…¨éƒ½ç»Ÿä¸€æˆ**ä¸¤ç«¯éƒ½é—­**ï¼Œåªè¦ç¨æ”¹ **nums[mid] == target** æ¡ä»¶å¤„çš„ä»£ç å’Œè¿”å›çš„é€»è¾‘å³å¯ï¼Œæ¨èæ‹¿å°æœ¬æœ¬è®°ä¸‹ï¼Œä½œä¸ºäºŒåˆ†æœç´¢æ¨¡æ¿ã€‚

###### å±‚åºéå†æ¨¡æ¿

**è¿­ä»£æ³•**ï¼šåˆ©ç”¨é˜Ÿåˆ—ã€‚

```java
public List<List<Integer>> levelOrder(TreeNode root) {
    // Base case
    if(root == null) return new ArrayList<>();
    // ä½¿ç”¨è¾…åŠ©é˜Ÿåˆ—å¹¶å°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—
    Queue<TreeNode> queue = new LinkedList<>() ;
    queue.add(root);
    List<List<Integer>> resList = new ArrayList<>();
    // é˜Ÿåˆ—ä¸ºç©ºæ—¶é€€å‡ºå¾ªç¯
    while(queue.size() != 0) {
        // è·å–å½“å‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯å½“å‰è¿™ä¸€å±‚æœ‰å¤šå°‘ä¸ªç»“ç‚¹ï¼Œè¿™æ˜¯ä¸ºäº†æ§åˆ¶è®¿é—®åˆ°äº†æŸä¸€å±‚
        int size = queue.size();
        List<Integer> levelList = new ArrayList<>();
        // å°†å½“å‰å±‚çš„å…ƒç´ ä¾æ¬¡å‡ºé˜Ÿåˆ—å¹¶å¤„ç†æ•°æ®ï¼Œæ¯å¼¹å‡ºä¸€ä¸ªç»“ç‚¹å¹¶å†æ¬¡å°†å…¶å·¦å³å­èŠ‚ç‚¹å…¥é˜Ÿåˆ—
        for(int i = 0; i < size; i++) {
            // å‡ºé˜Ÿåˆ—å¹¶å¤„ç†æ•°æ®
            TreeNode temp = queue.poll();
            levelList.add(temp.val);
            // å°†å‡ºé˜Ÿç»“ç‚¹çš„å·¦å³å­èŠ‚ç‚¹å…¥é˜Ÿ
            if(temp.left != null) queue.add(temp.left);
            if(temp.right != null) queue.add(temp.right);
        }
        // è¿™ä¸€å±‚å¼¹å‡ºçš„å…ƒç´ å¤„ç†å®Œæ¯•
        resList.add(levelList);
        // æ­¤æ—¶ä¸‹ä¸€å±‚çš„å…¨éƒ¨èŠ‚ç‚¹å·²ç»åˆ°é˜Ÿåˆ—ä¸­ï¼Œå†æ¬¡å¾ªç¯å³å¯
    }
    return resList;
}
```

**é€’å½’æ³•**ï¼š

```java
public List<List<Integer>> levelOrder2(TreeNode root) {
    if (root == null) return resList;
    // ä»æ ¹ç»“ç‚¹å¼€å§‹é€’å½’,æ ¹ç»“ç‚¹æ˜¯ç¬¬0å±‚
    dfs(root, 0);
    return resList;
}

List<List<Integer>> resList = new ArrayList<>();

// è¾…åŠ©æ–¹æ³•:æ•´ä½“æ˜¯å…ˆåºéå†çš„æ¨¡æ¿
public void dfs(TreeNode node, int level) {
    // è¯´æ˜é‡åˆ°äº†æ–°çš„ä¸€å±‚åˆ™æ–°å»ºä¸€ä¸ªåˆ—è¡¨,å¹¶æ·»åŠ ä¸€å±‚æ–°çš„åˆ°ç»“æœä¸­
    if (resList.size() == level) {
        resList.add(new ArrayList<>());
    }
    // æ ¹æ®å±‚æ•°è·å–å¯¹åº”çš„åˆ—è¡¨å¹¶å°†å½“å‰èŠ‚ç‚¹çš„å€¼åŠ å…¥åˆ°listä¸­ï¼ˆå…ˆåºéå†ï¼‰
    resList.get(level).add(node.val);

    // é€’å½’è¿›è¡Œ
    if (node.left != null) dfs(node.left, level + 1);
    if (node.right != null) dfs(node.right, level + 1);
}
```

#### æ’¸ä»£ç 

##### 1. æ•°ç»„é¢˜ç›®

###### ä¸¤æ•°ä¹‹å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€åä¸º

**é¢˜ç›®**ï¼šæ™®é€šç‰ˆæœ¬ï¼Œç»™ä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾å‡ºå…¶ä¸­å’Œä¸º target çš„ä»»æ„ä¸¤ä¸ªæ•°ã€‚

```java
public int[] twoSum(int[] nums, int target) {
    
    if(nums == null || nums.length == 0) return new int[]{};
    
    Arrays.sort(nums);
    int i = 0;
    int j = nums.length - 1;
    while(i < j) {
        int sum = nums[i] + nums[j];
        if(sum > target) {
            j--;
        } else if(sum < target) {
            i++;
        } else {
            // è¿”å›è¿™ä¸¤ä¸ªæ•°
            return new int[]{nums[i], nums[j]};
        }
    }
    return new int[]{};
}
```

**è¿›é˜¶**ï¼šé€’å¢æ•°ç»„ï¼Œæ‰¾å‡ºå’Œä¸º k çš„æ•°å¯¹ã€‚æ±‚ a + b = k çš„å¯¹æ•°ï¼Œä¾‹å¦‚ [1, 1, 2, 3, 4, 5, 6, 7, 7, 8, 9]ï¼Œk = 8ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ 5 å¯¹ã€‚

**åŒæŒ‡é’ˆéå†**ï¼šç”¨å¤´å°¾ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«å¼€å§‹éå†ï¼Œä¸¤ä¸ªæ•°å­—å’Œå¤§äº k æ—¶ï¼Œå³æŒ‡é’ˆå‘å‰ç§»åŠ¨ï¼Œå°äº k æ—¶å·¦æŒ‡é’ˆå‘åç§»åŠ¨ã€‚

```java
public ArrayList<Integer> findPair(int[] nums, int k){
    int len = nums.length;
    int i = 0;
    int j = len - 1;
    ArrayList<Integer> resList = new ArrayList<>();
    while(i < j){
        if(nums[i] + nums[j] < k){
            i++;
        } else if (nums[i] + nums[j] > k){
            j--;
        } else {
            resList.add(nums[i]);
            resList.add(nums[j]);
        }
    }
    return resList;
}
```

###### ä¸‰æ•°ä¹‹å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šæ™®é€šä¸‰æ•°ä¹‹å’Œã€‚

**é¢˜è§£**ï¼šæš´åŠ›æ³•ï¼Œæ’åº+äºŒåˆ†æŸ¥æ‰¾ï¼Œ**æ’åº+åŒæŒ‡é’ˆä»£ç å¦‚ä¸‹**ã€‚

```java
public static List<List<Integer>> threeSum(int[] nums) {
    List<List<Integer>> resList = new ArrayList();
    // Base case
    int len = nums.length;
    if (len < 3) return resList;
    // å¯¹åŸå§‹æ•°ç»„æ’åº
    Arrays.sort(nums);

    for (int i = 0; i < len; i++) {
        // å¦‚æœå½“å‰æ•°å­—å¤§äº0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œæ‰€ä»¥ç»“æŸå¾ªç¯
        if (nums[i] > 0) break;
        // å»é‡ç›¸åŒçš„æ•°å°±åˆ¤æ–­ä¸€æ¬¡å³å¯
        if (i > 0 && nums[i] == nums[i - 1]) continue;
        // å½“å‰å…ƒç´ å³è¾¹éƒ¨åˆ†çš„å·¦å³æŒ‡é’ˆ
        int left = i + 1;
        int right = len - 1;
        while (left < right) {
            int sum = nums[i] + nums[left] + nums[right];
            if (sum == 0) {
                resList.add(Arrays.asList(nums[i], nums[left], nums[right]));
                // å»é‡
                while (left < right && nums[left] == nums[left + 1]) left++; 
                while (left < right && nums[right] == nums[right - 1]) right--; 
                left++;
                right--;
            } else if (sum < 0) {
                left++;
            } else if (sum > 0) {
                right--;
            }
        }
    }
    return resList;
}
```

**æ‹“å±•**ï¼šæœ€æ¥è¿‘ä¸‰æ•°ä¹‹å’Œã€‚

**æ‹“å±•**ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„ä¸‰ä¸ªæ•°ä¹‹å’Œä¸ºé›¶çš„ç»„åˆã€‚

###### åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**é¢˜ç›®**ï¼šæœ‰ä¸¤ä¸ªæ’åºæ•°ç»„ nums1ï¼ˆé•¿åº¦ä¸º mï¼‰ å’Œ nums2ï¼ˆé•¿åº¦ä¸º nï¼‰ï¼Œ**åŸåœ°åˆå¹¶æ•°ç»„**ã€‚å‡è®¾ nums1 æœ‰**è¶³å¤Ÿçš„ç©ºé—´**æ”¾ä¸‹ nums2ã€‚

**ä»åå¾€å‰éå†ï¼Œå°†å€¼ä»åå¾€å‰å­˜å…¥**ã€‚å­˜å…¥æ—¶æ¯”è¾ƒå½“å‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°å­—å¤§å°ï¼Œé€‰è¾ƒå¤§çš„å­˜å…¥ï¼Œç„¶åå¾€å‰ç§»åŠ¨æŒ‡é’ˆã€‚

```java
public void merge(int[] nums1, int m, int[] nums2, int n) {
    // è¡¨ç¤ºä»åå‘å‰å½“å‰æ’å…¥ä½ç½®
    int index = m + n - 1;
    // æŒ‡å‘nums1æœ«å°¾
    int p1 = m - 1;
    // æŒ‡å‘nums2æœ«å°¾
    int p2 = n - 1;
    // å°†æ•°ç»„nums2å…¨éƒ¨æ•°æ®æ’å…¥åˆ°æ•°ç»„nums1ä¸ºæ­¢
    while (p2 >= 0) {
        // p1ä½ç½®æœ‰æ•ˆä¸”p1å€¼è¾ƒå¤§
        if(p1 >= 0 && nums1[p1] >= nums2[p2]) {
            nums1[index] = nums1[p1];
            p1--;
        } else {
            nums1[index] = nums2[p2];
            p2--;
        }
        // ä»å³å¾€å·¦ç§»åŠ¨index
        index--;
    }
}
```

###### åˆå¹¶åŒºé—´(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

**é¢˜ç›®**ï¼šç»™å‡ºä¸€ä¸ªåŒºé—´çš„é›†åˆï¼Œè¯·**åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´**ã€‚

```java
è¾“å…¥: [[1,3],[2,6],[8,10],[15,18]]  è¾“å‡º: [[1,6],[8,10],[15,18]]
è§£é‡Š: åŒºé—´ [1,3] å’Œ [2,6] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [1,6].
```

**é¢˜è§£**ï¼šæŒ‰ç…§å…¨éƒ¨åŒºé—´çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ’åºï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥éå†åˆå¹¶ã€‚æ•´ä½“å°±æ˜¯ä¸¤ä¸¤åˆå¹¶åŒºé—´ã€‚ä¸¤ä¸ªåŒºé—´çš„**å…­ç§å…³**ç³»ã€‚

<img src="assets/image-20200814222801434.png" alt="image-20200814222801434" style="zoom:33%;" />

```java
public int[][] merge(int[][] intervals) {
    int len = intervals.length;
    if (len < 2) return intervals;

    // æŒ‰ç…§èµ·ç‚¹æ’åº
    Arrays.sort(intervals, Comparator.comparingInt(o -> o[0]));

    // ä¹Ÿå¯ä»¥ä½¿ç”¨ Stackï¼Œå› ä¸ºæˆ‘ä»¬åªå…³å¿ƒç»“æœé›†çš„æœ€åä¸€ä¸ªåŒºé—´
    List<int[]> res = new ArrayList<>();
    res.add(intervals[0]);

    for (int i = 1; i < len; i++) {
        // å–å‡ºå½“å‰åŒºé—´
        int[] temp = intervals[i];
        // æ¯æ¬¡æ–°çš„åŒºé—´ä¸å½“å‰ç»“æœé›†ä¸­çš„æœ€åä¸€ä¸ªåŒºé—´çš„æœ«å°¾ç«¯ç‚¹è¿›è¡Œæ¯”è¾ƒ
        int[] peek = res.get(res.size() - 1);
        if (temp[0] <= peek[1]) {
            // æ³¨æ„:è¿™é‡Œåº”è¯¥å–æœ€å¤§
            peek[1] = Math.max(temp[1], peek[1]);
        } else {
            // è¯´æ˜ä¸¤è€…å®Œå…¨ä¸é‡å 
            res.add(temp);
        }
    }
    return res.toArray(new int[res.size()][]);
}
```

###### å’Œä¸ºSçš„è¿ç»­æ­£æ•´æ•°åºåˆ—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° target ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸º target çš„**è¿ç»­æ­£æ•´æ•°**åºåˆ—ï¼ˆè‡³å°‘å«æœ‰ä¸¤ä¸ªæ•°ï¼‰ã€‚åºåˆ—å†…çš„æ•°å­—ç”±å°åˆ°å¤§æ’åˆ—ï¼Œä¸åŒåºåˆ—æŒ‰ç…§é¦–ä¸ªæ•°å­—ä»å°åˆ°å¤§æ’åˆ—ã€‚è¾“å…¥ï¼štarget = 9ã€‚è¾“å‡ºï¼š[[2, 3, 4], [4, 5]]ã€‚

**æ»‘åŠ¨çª—å£**ï¼šçª—å£å·¦å³ä¸¤ç«¯éƒ½åªèƒ½å‘å³ç§»åŠ¨ï¼Œå½“å’Œå°äº sum æ—¶ï¼Œj++ï¼Œå’Œå¤§äº sum æ—¶ï¼Œi++ï¼Œå’Œç­‰äº sum å°±è®°å½•ä¸‹çª—å£ä¸­ i åˆ° j ä¸­çš„åºåˆ—ï¼Œç„¶åçª—å£ç»§ç»­åç§»ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åºåˆ—ã€‚

```java
public int[][] findContinuousSequence(int target) {
    // çª—å£ä»…å«1
    int i = 1;
    int j = 1;
    int sum = 0;
    List<int[]> resList = new ArrayList<>();
    // åºåˆ—æ˜¯ç”±å°åˆ°å¤§æ’åˆ—ï¼Œæ‰€ä»¥å¦‚æœ i>target/2ï¼Œé‚£ä¹ˆi+i+1è‚¯å®šå¤§äºtarget
    while (i <= target / 2) {
        // å¦‚æœå°äºç›®æ ‡å€¼å°±ç§»åŠ¨å³è¾¹ç•ŒåŒæ—¶åŠ ä¸Šå³è¾¹ç•Œå€¼
        if (sum < target) {
            sum = sum + j;
            j++;
            // å¤§äºç›®æ ‡å€¼å°±ç§»åŠ¨å·¦è¾¹ç•ŒåŒæ—¶å‡å»å·¦è¾¹ç•Œå€¼
        } else if (sum > target) {
            sum = sum - i;
            i++;
            // ç›¸ç­‰çš„å€¼å‡ºç°äº†å°±è®°å½•åˆ°ç»“æœåˆ—è¡¨ä¸­
        } else {
            int[] temp = new int[j - i];
            for (int m = i; m < j; m++) temp[m - i] = m;
            resList.add(temp);
            // å·¦è¾¹ç•Œå‘å³ç§»åŠ¨
            sum = sum - i;
            i++;
        }
    }
    return resList.toArray(new int[resList.size()][]);
}
```

###### å’Œä¸ºSçš„æ­£æ•´æ•°åºåˆ—ä¸ªæ•°

**é¢˜ç›®**ï¼šä¸€ä¸ªæ•°ç»„é‡Œé¢å¤šä¸ªå…ƒç´ å’Œç­‰äº target çš„ç­”æ¡ˆæ•°ï¼ˆ**å¤šä¸ªå…ƒç´ å¯ä»¥ä¸è¿ç»­**ï¼‰ã€‚

ä¸€å¼€å§‹ç”¨çš„æ»‘åŠ¨çª—å£ï¼Œåæ¥åœ¨é¢è¯•å®˜çš„æç¤ºä¸‹ç”¨åŠ¨æ€è§„åˆ’åšã€‚æ¯”å¦‚ï¼šæ•°ç»„[2,1,3,4,5,10]ï¼Œtarget=5  ç­”æ¡ˆä¸º 3 ä¸ªï¼Œå³[2, 3], [5], [1, 4]ã€‚

###### æœ‰åºé‡å¤æ•°ç»„ç¡®å®šç›®æ ‡å€¼èŒƒå›´

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

å¯ä»¥ä½¿ç”¨**æ»‘åŠ¨çª—å£**ã€‚èƒ½å¦ä½¿ç”¨äºŒåˆ†ï¼Ÿï¼Ÿ

###### æœ‰åºæ•°ç»„çš„å¹³æ–¹(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**é¢˜ç›®**ï¼šæœ‰åºæ•°ç»„å¹³æ–¹åï¼Œæ•°ç»„å½“ä¸­æœ‰å¤šå°‘ä¸åŒçš„æ•°å­—ï¼ˆç›¸åŒç®—ä¸€ä¸ªï¼‰ã€‚

å¦‚æœä¸æ˜¯æ’åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨ Set æ¥ä¿å­˜æ•°å­—çš„å¹³æ–¹ï¼Œé‡å¤å°±å­˜ä¸è¿›å»ã€‚

**é¢˜è§£**ï¼š**æ’åºæ•°ç»„å¹³æ–¹åä¸¤å¤´å¤§ï¼Œä¸­é—´å°ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆå…±åŒå‘ä¸­é—´æ‰«æï¼Œæ‰«ææ—¶å»æ‰é‡å¤å…ƒç´ **ï¼ŒåŒæ—¶ç”¨ä¸€ä¸ª res æ¥è®°å½•æœ‰å¤šå°‘ä¸ªä¸åŒæ•°å­—ã€‚

```java
public int diffSquareNum(int nums[]) {
    int n = nums.length;
    if(n == 0 || nums == null) return 0;
    int sum = 0;
    int left = 0;
    int right = n - 1;
    while(left <= right){
        // è¯´æ˜ä¸¤ä¸ªæ•°å¹³æ–¹ç›¸åŒ
        if(nums[left] + nums[right] == 0){
            sum++;
         	// è¿™é‡Œå¼€å§‹å»æ‰åé¢é‡å¤çš„æ•°å­—
            int temp = nums[left]; 
            while(left <= right && nums[left] == temp)
                left++;
            while(left <= right && nums[right] == -temp)
                right--;
        } else if (nums[left] + nums[right] < 0){
            sum++;
            int temp = nums[left];
            while(left <= right && nums[left] == temp)
                left++;
        } else {
            sum++;
            int temp = nums[right];
            while(left <= right && nums[right] == temp)
                right--;
        }
    }
    return sum;
}
```

###### å…ˆå¢åå‡æ•°ç»„ä¸­ä¸é‡å¤æ•°å­—ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šä¸€ä¸ªæ•°ç»„**å…ˆé€’å¢å†é€’å‡**ï¼Œæ‰¾å‡ºæ•°ç»„ä¸é‡å¤çš„ä¸ªæ•°ï¼Œæ¯”å¦‚ [1, 3, 9, 1]ï¼Œç»“æœä¸º 3ï¼Œä¸èƒ½ä½¿ç”¨é¢å¤–ç©ºé—´ï¼Œå¤æ‚åº¦ o(n)ã€‚

**é¢˜è§£**ï¼šç±»ä¼¼ä¸Šä¸€é¢˜ï¼ŒåŒæŒ‡é’ˆä»ä¸¤å¤´å‘ä¸­é—´é€¼è¿‘ã€‚

```java
public int diffnum(int[] nums) {
    int n = nums.length;
    if (n == 0 || nums == null) return 0;
    int left = 0;
    int right = n - 1;
    int sum = 0;
    while (left <= right) {
        if (nums[left] == nums[right]) {
            sum++;
            int temp = nums[left];
            while (left <= right && nums[right] == temp)
                right--;
            while (left <= right && nums[left] == temp)
                left++;
        } else if (nums[left] < nums[right]) {
            sum++;
            int temp = nums[left];
            while (left <= right && nums[left] == temp)
                left++;
        } else {
            sum++;
            int temp = nums[right];
            while (left <= right && nums[right] == temp)
                right--;
        }
    }
    return sum;
}
```

###### èºæ—‹æ‰“å°çŸ©é˜µ(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼(2)ã€æ‹¼å¤šå¤š

**é¢˜ç›®**ï¼šç»™ä¸€ä¸ª n * n çš„**æ–¹é˜µ**ï¼Œèºæ—‹å¡«å…¥æ•°å­—ã€‚

```java
public int[][] generateMatrix(int n) {
    int[][] nums = new int[n][n];
    int num = 1;
    int up = 0;
    int right = n - 1;
    int down = n - 1;
    int left = 0;
    // ç›´åˆ°numå°äºå¹³æ–¹
    while (num <= n * n) {
        for (int col = left; col <= right; col++) {
            nums[up][col] = num;
            num++;
        }
        up++;
        for (int row = up; row <= down; row++) {
            nums[row][right] = num;
            num++;
        }
        right--;
        for (int col = right; col >= left; col--) {
            nums[down][col] = num;
            num++;
        }
        down--;
        for (int row = down; row >= up; row--) {
            nums[row][left] = num;
            num++;
        }
        left++;
    }
    return nums;
}
```

**é¢˜ç›®**ï¼šç»™å®šä¸€ä¸ªçŸ©é˜µï¼Œèºæ—‹æ‰“å°å‡ºæ¥ã€‚

###### çŸ©é˜µé¡ºæ—¶é’ˆç¿»è½¬90åº¦

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

###### å…¨æ’åˆ—(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€æ‹¼å¤šå¤š

**é¢˜ç›®**ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œè¾“å‡ºå…¨éƒ¨ç»„åˆã€‚

åˆ©ç”¨å›æº¯ç®—æ³•çš„æ¨¡æ¿ã€‚n ä¸ªä¸é‡å¤çš„æ•°ï¼Œå…¨æ’åˆ—å…±æœ‰ **n!** ä¸ªã€‚

ä¸‹é¢æ˜¯**æ— é‡å¤æ•°å­—**çš„å…¨æ’åˆ—ã€‚

```java
List<List<Integer>> res = new LinkedList<>();

List<List<Integer>> permute(int[] nums) {
    // ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥è®°å½•ã€Œè·¯å¾„ã€
    LinkedList<Integer> track = new LinkedList<>();
    backTrack(nums, track);
    return res;
}

// è·¯å¾„:è®°å½•åœ¨trackä¸­
// é€‰æ‹©åˆ—è¡¨:numsä¸­ä¸å­˜åœ¨äºtrackçš„é‚£äº›å…ƒç´ 
// ç»“æŸæ¡ä»¶:numsä¸­çš„å…ƒç´ å…¨éƒ½åœ¨trackä¸­å‡ºç°
public void backTrack(int[] nums, LinkedList<Integer> track) {
    // è§¦å‘ç»“æŸæ¡ä»¶
    if (track.size() == nums.length) {
        res.add(new LinkedList(track));
        return;
    }
    // æŒ¨ç€é€’å½’
    for (int i = 0; i < nums.length; i++) {
        // æ’é™¤ä¸åˆæ³•çš„é€‰æ‹©
        if (track.contains(nums[i])) continue;
        // åšé€‰æ‹©
        track.add(nums[i]);
        // è¿›å…¥ä¸‹ä¸€å±‚å†³ç­–æ ‘
        backTrack(nums, track);
        // å–æ¶ˆä¹‹å‰çš„é€‰æ‹©
        track.removeLast();
    }
}
```

###### å²›å±¿æ•°é‡

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼ã€æ‹¼å¤šå¤š

**é¢˜è§£**ï¼šä½¿ç”¨å›æº¯æ¨¡æ¿ã€‚

```java
public int numIslands(char[][] grid) {
    int res = 0;
    for (int i = 0; i < grid.length; i++) {
        for (int j = 0; j < grid[0].length; j++) {
            // å¦‚æœå½“å‰æ ¼å­æ˜¯1,åˆ™ä»£è¡¨æ˜¯æ–°çš„å²›å±¿
            if (grid[i][j] == '1') {
                // é€šè¿‡æ·±åº¦ä¼˜å…ˆéå†æŠŠè¿™ä¸ªå²›å±¿æ‰€æ¶‰åŠçš„å…¨éƒ¨ä½ç½®æ‰¾å‡ºæ¥å¹¶åº§ä¸Šæ ‡è®°
                dfs(grid, i, j);
                res++;
            }
        }
    }
    return res;
}

private void dfs(char[][] grid, int i, int j) {
    // ä¸èƒ½è¶Šç•Œï¼ŒåŒæ—¶æ‰€è®¿é—®çš„ä½ç½®ä¸èƒ½ä¸º0æˆ–è€…2
    if (i < 0 || j < 0 || i >= grid.length || j >= grid[0].length || grid[i][j] == '0' || grid[i][j] == '2') return;
    // è®¿é—®ä¹‹åæ ‡è®°å·²ç»è¢«è®¿é—®
    grid[i][j] = '2';
    dfs(grid, i + 1, j);
    dfs(grid, i, j + 1);
    dfs(grid, i - 1, j);
    dfs(grid, i, j - 1);
}
```

###### å²›å±¿æœ€å¤§é¢ç§¯

ä¸ä¸Šé¢˜ç±»ä¼¼ï¼Œå›æº¯ã€‚

```java
public int maxAreaOfIsland(int[][] grid) {
    int res = 0;
    for (int i = 0; i < grid.length; i++) {
        for (int j = 0; j < grid[0].length; j++) {
            // å¦‚æœå½“å‰æ ¼å­æ˜¯1,åˆ™ä»£è¡¨æ˜¯æ–°çš„å²›å±¿
            // é€šè¿‡æ·±åº¦ä¼˜å…ˆéå†æŠŠè¿™ä¸ªå²›å±¿æ‰€æ¶‰åŠçš„å…¨éƒ¨ä½ç½®æ‰¾å‡ºæ¥å¹¶åº§ä¸Šæ ‡è®°
            res = Math.max(res, dfs(grid, i, j));
        }
    }
    return res;
}

private int dfs(int[][] grid, int i, int j) {
    // ä¸èƒ½è¶Šç•Œï¼ŒåŒæ—¶æ‰€è®¿é—®çš„ä½ç½®ä¸èƒ½ä¸º0æˆ–è€…2
    if (i < 0 || j < 0 || i >= grid.length || j >= grid[0].length || grid[i][j] == 0 || grid[i][j] == 2) return 0;
    // åˆ°äº†è¿™é‡Œè¯´æ˜æ˜¯ä¸€ä¸ªæ–°çš„æ ¼å­ï¼Œæ­¤æ—¶é¢ç§¯åº”è¯¥+1
    // è®¿é—®ä¹‹åæ ‡è®°å·²ç»è¢«è®¿é—®
    grid[i][j] = 2;
    int area1 = dfs(grid, i + 1, j);
    int area2 = dfs(grid, i, j + 1);
    int area3 = dfs(grid, i - 1, j);
    int area4 = dfs(grid, i, j - 1);
    return area1 + area2 + area3 + area4 + 1;
}
```

###### åŠ æ²¹ç«™

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**[é¢˜ç›®](https://leetcode-cn.com/problems/gas-station/)**ï¼šåœ¨ä¸€æ¡ç¯è·¯ä¸Šæœ‰ N ä¸ªåŠ æ²¹ç«™ï¼Œå…¶ä¸­ç¬¬ i ä¸ªåŠ æ²¹ç«™æœ‰æ±½æ²¹ gas[i] å‡ã€‚ä½ æœ‰ä¸€è¾†æ²¹ç®±å®¹é‡æ— é™çš„çš„æ±½è½¦ï¼Œä»ç¬¬ i ä¸ªåŠ æ²¹ç«™å¼€å¾€ç¬¬ i+1 ä¸ªåŠ æ²¹ç«™éœ€è¦æ¶ˆè€—æ±½æ²¹ cost[i] å‡ã€‚ä½ ä»å…¶ä¸­çš„ä¸€ä¸ªåŠ æ²¹ç«™å‡ºå‘ï¼Œå¼€å§‹æ—¶æ²¹ç®±ä¸ºç©ºã€‚å¦‚æœä½ å¯ä»¥ç»•ç¯è·¯è¡Œé©¶ä¸€å‘¨ï¼Œåˆ™è¿”å›å‡ºå‘æ—¶åŠ æ²¹ç«™çš„ç¼–å·ï¼Œå¦åˆ™è¿”å› -1ã€‚**è¾“å…¥:** gas = [1,2,3,4,5] cost = [3,4,5,1,2] **è¾“å‡º:** 3ã€‚

```java
public int canCompleteCircuit(int[] gas, int[] cost) {
    int len = gas.length;
    // æ€»æ²¹é‡
    int sumTank = 0;
    // å½“å‰æ²¹ç®±å†…çš„æ²¹é‡
    int curTank = 0;
    int startStation = 0;
    for (int i = 0; i < len; i++) {
        sumTank += gas[i] - cost[i];
        curTank += gas[i] - cost[i];
        if (curTank < 0) {
            startStation = i + 1;
            curTank = 0;
        }
    }
    return sumTank >= 0 ? startStation : -1;
}
```

###### åœ†åœˆä¸­å‰©ä¸‹çš„æ•°å­—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

[**é¢˜ç›®**](https://leetcode-cn.com/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/)ï¼šè®©å°æœ‹å‹ä»¬å›´æˆä¸€ä¸ª**å¤§åœˆ**ã€‚ç„¶åï¼ŒéšæœºæŒ‡å®šä¸€ä¸ª**æ•° m**ï¼Œè®©ç¼–å·**ä¸º 0 çš„å°æœ‹å‹å¼€å§‹æŠ¥æ•°**ã€‚æ¯æ¬¡å–Šåˆ° **m-1** çš„é‚£ä¸ªå°æœ‹å‹è¦å‡ºåˆ—å”±é¦–æ­Œï¼Œç„¶åå¯ä»¥åœ¨ç¤¼å“ç®±ä¸­ä»»æ„çš„æŒ‘é€‰ç¤¼ç‰©ï¼Œå¹¶ä¸”**ä¸å†å›åˆ°åœˆä¸­**ï¼Œä»ä»–çš„ä¸‹ä¸€ä¸ªå°æœ‹å‹å¼€å§‹ï¼Œç»§ç»­ **0...m-1 æŠ¥æ•°** .... è¿™æ ·ä¸‹å» .... ç›´åˆ°å‰©ä¸‹æœ€åä¸€ä¸ªå°æœ‹å‹ï¼Œå¯ä»¥ä¸ç”¨è¡¨æ¼”ã€‚

```java
public int lastRemaining(int n, int m) {
    // æ„é€ ä¸€ä¸ªé“¾è¡¨
    ArrayList<Integer> list = new ArrayList<>();
    // å°†æ•°å­—åŠ åˆ°é“¾è¡¨ä¸­
    for (int i = 0; i < n; i++) list.add(i);

    int index = 0;
    // ä¸æ–­ç§»é™¤ä¸€ä¸ªå…ƒç´ ç›´åˆ°åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ 
    while (list.size() > 1) {
        // index +=m-1;
        // while(index>list.size()-1) index = index-list.size();
        // ä¸Šé¢ä¸¤æ­¥ç­‰ä»·äºä¸‹é¢ç”¨éœ€è¦æŠ¥çš„æ•°å¯¹å½“å‰é“¾è¡¨é•¿åº¦å–æ¨¡
        index = (index + m - 1) % list.size();
        // å»æ‰è¿™ä¸ªä½ç½®çš„å…ƒç´ 
        list.remove(index);
    }
    return list.get(0);
}
```

[è¿˜å¯ä»¥åæ¨](https://leetcode-cn.com/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/solution/javajie-jue-yue-se-fu-huan-wen-ti-gao-su-ni-wei-sh/)ï¼š

```java
public int lastRemaining(int n, int m) {
    int ans = 0;
    // æœ€åä¸€è½®å‰©ä¸‹2ä¸ªäººï¼Œæ‰€ä»¥ä»2å¼€å§‹åæ¨
    for (int i = 2; i <= n; i++) {
        ans = (ans + m) % i;
    }
    return ans;
}
```

###### ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼š**æ‰¾å‡ºç»™å®šæ•°å­—ä¸‹ä¸€ä¸ªæ¯”å®ƒå¤§çš„æ•°å­—**ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œåˆ™å°†æ•°å­—é‡æ–°æ’åˆ—æˆæœ€å°çš„æ’åˆ—ï¼ˆå³å‡åºæ’åˆ—ï¼‰ã€‚

<img src="assets/1555696082944.gif" alt="1555696082944" style="zoom:50%;" />

ä»å³å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ªé™åºçš„åºåˆ—ï¼ˆå›¾ä¸­æ‰¾åˆ° 4ï¼‰ï¼Œç„¶åå†ä»å³å¾€å·¦å¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äºå½“å‰ä½ç½®çš„æ•°ï¼ˆ5ï¼‰ï¼Œäº¤æ¢ 4 å’Œ 5ï¼Œæœ€åé€†åº 4 åé¢éƒ¨åˆ†æ•°å­—ã€‚

```java
public void nextPermutation(int[] nums) {
    // ä»å³å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ªé™åºçš„ä½ç½®
    int i = nums.length - 2;
    while (i >= 0 && nums[i + 1] <= nums[i]) {
        i--;
    }
    // ä»å³å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ªå¤§äºiä½ç½®çš„å…ƒç´ 
    if (i >= 0) {
        int j = nums.length - 1;
        while (j >= i && nums[j] <= nums[i]) {
            j--;
        }
        // äº¤æ¢ä¸¤ä¸ª
        swap(nums, i, j);
    }
    // é€†åºiåé¢çš„å…¨éƒ¨å…ƒç´ 
    reverse(nums, i + 1);
}

private void reverse(int[] nums, int start) {
    int i = start, j = nums.length - 1;
    while (i < j) {
        swap(nums, i, j);
        i++;
        j--;
    }
}

private void swap(int[] nums, int i, int j) {
    int temp = nums[i];
    nums[i] = nums[j];
    nums[j] = temp;
}
```

###### æ— åºæ•°ç»„ç¬¬ä¸€ä¸ªç¼ºå¤±çš„æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šä¸€ä¸ªæ— åºæ•°ç»„ï¼Œä»å°åˆ°å¤§æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¼ºçš„æ•°ï¼Œæ¯”å¦‚[8 2 4 3 6 9 7 11 12]ï¼Œç¬¬ä¸€ä¸ªç¼ºçš„å°±æ˜¯ 5ã€‚

ç”¨**æ•°ç»„**ä½œä¸ºå“ˆå¸Œè¡¨ï¼Œå°†æ•°å­— i æ”¾å…¥æ•°ç»„ä¸­çš„ i **ç´¢å¼•å¤„**ï¼Œç„¶å**æ‰¾ä¸­é—´æ²¡æœ‰å­˜å…¥æ•°å­—çš„ä½ç½®**ã€‚æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯ O(N)ã€‚

```java
public int findLost(int[] nums) {
    // æ‰¾åˆ°æœ€å¤§å€¼å’Œæœ€å°å€¼
    int min = nums[0];
    int max = nums[0];
    for (int value : nums) {
        min = Math.min(min, value);
        max = Math.max(max, value);
    }
    int[] temp = new int[max - min + 1];
    for (int i = 0; i < temp.length; i++) {
        temp[i] = min - 1;
    }
    for (int value : nums) temp[value] = value;
    int i = 0;
    // æ‰¾åˆ°æ²¡æœ‰çš„åœ°æ–¹
    while (i < temp.length) {
        if (temp[i] == min - 1) break;
        i++;
    }
    return i;
}
```

å¯ä»¥ä½¿ç”¨ä½å›¾èŠ‚çœç©ºé—´ã€‚

###### æœ€å°æœªå‡ºç°æ­£æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æœ‰åºæ•°ç»„çš„ä¸­ä½æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œä»éšæœºä¸€ä½æˆªæ–­ï¼ŒæŠŠå‰æ®µæ”¾åœ¨åè¾¹ï¼Œå¦‚ 4 5 6 7 1 2 3æ±‚ä¸­ä½æ•°

###### æ•°ç»„ä¸é‡å¤çš„ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ä¸€ä¸ªæ•°æ®å…ˆé€’å¢å†é€’å‡ï¼Œæ‰¾å‡ºæ•°ç»„ä¸é‡å¤çš„ä¸ªæ•°ï¼Œæ¯”å¦‚ [1, 3, 9, 1]ï¼Œç»“æœä¸º3ï¼Œä¸èƒ½ä½¿ç”¨é¢å¤–ç©ºé—´ï¼Œå¤æ‚åº¦o(n)

###### è·³è·ƒæ¸¸æˆ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®(leetcode55)**ï¼šç»™ä¸€ä¸ªæ•°ç»„ï¼Œä¾‹å¦‚[1, 2, 3, 4, 5]ï¼Œa[i] è¡¨ç¤ºåœ¨è¯¥ä½ç½®å¯ä»¥å‘å‰è¡Œèµ°çš„æœ€å¤§è·ç¦»ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚

è´ªå¿ƒæ€æƒ³ï¼š**æ¯æ¬¡èµ°æœ€å¤§çš„è·ç¦»**ï¼Œå¦‚æœèƒ½è¶…è¿‡æœ«å°¾å…ƒç´ ï¼Œè¯´æ˜åªè¦è°ƒå°æ­¥ä¼å°±ä¸€å®šå¯ä»¥è¾¾åˆ°æœ€åä½ç½®ã€‚ä¾æ®ï¼š**å¦‚æœä¸€ä¸ªä½ç½®èƒ½å¤Ÿåˆ°è¾¾ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®å·¦ä¾§æ‰€æœ‰ä½ç½®éƒ½èƒ½åˆ°è¾¾**ã€‚

```java
public boolean canJump(int[] nums) {
    int len = nums.length;
    int rightmost = 0;
    for (int i = 0; i < len; ++i) {
        if (i <= rightmost) {
            rightmost = Math.max(rightmost, i + nums[i]);
            if (rightmost >= len - 1) {
                return true;
            }
        }
    }
    return false;
}
```

```java
public boolean canJump2(int[] nums) {
    // æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º0ä¸”æ•°ç»„å…ƒç´ å¤§äºä¸€ä¸ªçš„æ—¶å€™,å¿…å®šä¸èƒ½åˆ°è¾¾
    if (nums[0] == 0 && nums.length > 1) return false;
    // æœªè·³è¿‡çš„0çš„æ•°é‡
    int zeroCounter = 0;
    for (int i = 0; i < nums.length - 1; i++) {
        // é‡åˆ°0,æœªè·³è¿‡çš„0è®¡æ•°+1
        if (nums[i] == 0) {
            zeroCounter++;
            for (int j = 0; j < i; j++) {
                if (nums[j] >= i - j + 1) {
                    // å¦‚æœé‡åˆ°çš„è¿™ä¸ª0å‰é¢æœ‰æ•°å­—å¯ä»¥è·³è¿‡å®ƒ,é‚£ä¹ˆæœªè·³è¿‡çš„0è®¡æ•°-1
                    zeroCounter--;
                    // è·³è¿‡ä¹‹åå°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ª0
                    break;
                }
            }
        }
    }
    // å¦‚æœæ‰€æœ‰çš„0éƒ½èƒ½è·³è¿‡ï¼Œé‚£ä¹ˆæœªè·³è¿‡çš„0è®¡æ•°ä¸º0ï¼Œè¿”å›true
    if (zeroCounter == 0) return true;
    return false;
}
```

###### æœ€é•¿å…¬å…±å­åºåˆ—(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€çŒ¿è¾…å¯¼

**é¢˜ç›®**ï¼šç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„**æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦**ã€‚

![image-20200813153938479](assets/image-20200813153938479.png)

```java
public int longestCommonSubsequence(String text1, String text2) {
    int m = text1.length(), n = text2.length();
    int[][] dp = new int[m + 1][n + 1];
    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            // åˆ†åˆ«è·å–ä¸¤ä¸ªä¸²çš„å­—ç¬¦
            char c1 = text1.charAt(i), c2 = text2.charAt(j);
            if (c1 == c2) {
                // å»æ‰¾å®ƒä»¬å‰é¢å„é€€ä¸€æ ¼çš„å€¼åŠ 1å³å¯
                dp[i + 1][j + 1] = dp[i][j] + 1;
            } else {
                // è¦ä¹ˆæ˜¯text1å¾€å‰é€€ä¸€æ ¼ï¼Œè¦ä¹ˆæ˜¯text2å¾€å‰é€€ä¸€æ ¼ï¼Œä¸¤ä¸ªçš„æœ€å¤§å€¼
                dp[i + 1][j + 1] = Math.max(dp[i + 1][j], dp[i][j + 1]);
            }
        }
    }
    return dp[m][n];
}
```

###### æ•°ç»„æœ€é•¿é€’å¢å­åºåˆ—(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**æ™®é€š**ï¼šæ‰¾æœ€é•¿é€’å¢å­åºåˆ—çš„**é•¿åº¦**ã€‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š

```java
dp[i] = max{1 + dp[j] for j < i if num[j] < num[i]}
```

**ä¹Ÿå°±æ˜¯å½“å‰çš„ dp[i] ç­‰äºä¹‹å‰çš„æ‰€æœ‰å°äº nums[i] çš„ä½ç½®ä¸­ dp å€¼æœ€å¤§çš„ã€‚**

```java
public int lengthOfLIS(int[] nums) {
    // Base case
    int len = nums.length;
    if (len == 0) return 0;

    int res = 1;
    int[] dp = new int[len];
    // åˆå§‹åŒ–dpï¼Œå…¨éƒ¨å¡«å……ä¸º1
    Arrays.fill(dp, 1);

    for (int i = 1; i < len; i++) {
        // æ‰¾åˆ°ä¹‹å‰æ‰€æœ‰å°äºnums[i]çš„å€¼ä¸­dpå€¼æœ€å¤§çš„
        for (int j = 0; j < i; j++) {
            if (nums[j] < nums[i]) {
                dp[i] = Math.max(dp[i], dp[j] + 1);
            }
        }
    }
    // æ‰¾dpä¸­æœ€å¤§çš„å€¼
    for (int i = 0; i < len; i++) {
        res = Math.max(dp[i], res);
    }
    return res;
}
```

è¿™é‡Œè¿˜å¯ä»¥**ä¼˜åŒ–æˆäºŒåˆ†**çš„ï¼Œæš‚æ—¶ä¸ä¼šå†™ã€‚

**å‡çº§**ï¼šè¿”å›è¿™ä¸ªé€’å¢å­æ•°ç»„ã€‚

```java
public List<List<Integer>> lengthOfLIS3(int[] nums) {
    List<List<Integer>> resList = new ArrayList<>();
    int n = nums.length;
    if (n == 0) return null;

    int maxLength = 1;
    int[] dp = new int[n];
    // åˆå§‹åŒ–dp
    Arrays.fill(dp, 1);

    for (int i = 1; i < n; i++) {
        for (int j = 0; j < i; j++) {
            if (nums[j] < nums[i]) {
                dp[i] = Math.max(dp[i], dp[j] + 1);
            }
        }
        // æ¯æ¬¡æ›´æ–°æœ€å¤§çš„å€¼
        maxLength = Math.max(maxLength, dp[i]);
    }

    // è®°å½•ä¸€ä¸‹æœ‰å‡ ä¸ªæœ€é•¿ä¸Šå‡å­åºåˆ—åŠå…¶ä½ç½®
    List<Integer> lisIndex = new ArrayList<>();
    // å¯»æ‰¾æ‰€æœ‰æœ€å¤§ä¸Šå‡å­åºåˆ—çš„ç»“æŸä½ç½®
    for (int i = 0; i < n; i++) {
        if (dp[i] == maxLength) {
            lisIndex.add(i);
        }
    }

    for (int lastIndex : lisIndex) {
        ArrayList<Integer> list = new ArrayList<>();
        int nowMemoCount = dp[lastIndex];
        for (int i = lastIndex; i >= 0; i--) {
            if (nowMemoCount - dp[i] == 1 || nowMemoCount - dp[i] == 0) {
                list.add(nums[i]);
                nowMemoCount--;
            }
        }
        // ç”±äºæ˜¯ä»åå¾€å‰åŠ çš„ç»“æœï¼Œéœ€è¦è½¬æ¢ç»“æœ
        Collections.reverse(list);
        resList.add(list);
    }
    return resList;
}
```

###### æ•°ç»„æœ€é•¿æ•°å€¼è¿ç»­åºåˆ—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾å‡ºæœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦ã€‚

```java
è¾“å…¥: [100, 4, 200, 1, 3, 2] è¾“å‡º: 4
è§£é‡Š: æœ€é•¿è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚
```

**é¢˜è§£**ï¼šä½¿ç”¨**å“ˆå¸Œè¡¨**ï¼Œè¿™ä¸ªé¢˜å¥½åƒæ²¡æœ‰ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œç›´æ¥ç”¨**å“ˆå¸Œè¡¨å¯ä»¥æœ‰ O(N) å¤æ‚åº¦**ã€‚

```java
public int longestConsecutive(int[] nums) {
    if (nums.length == 0) return 0;
    // è®°å½•åŒºé—´ [left, right]
    Map<Integer, Integer> map = new HashMap<>();
    // æ•°æ®å…¨éƒ¨æ”¾å…¥åˆ°mapä¸­,é”®å€¼éƒ½æ˜¯è¿™ä¸ªæ•°å­—
    for (int left : nums) map.put(left, left);
    int max = Integer.MIN_VALUE;
    for (int num : nums) {
        int right = num;
        // åˆ©ç”¨å‰é¢å·²çŸ¥çš„å³è¾¹ç•Œï¼Œå¿«é€Ÿæ‰¾åˆ°å½“å‰éœ€è¦çš„å³è¾¹ç•Œ
        while (map.containsKey(right + 1)) {
            right = map.get(right + 1);
        }
        map.put(num, right);
        max = Math.max(max, right - num + 1);
    }
    return max;
}
```

###### è¿ç»­å­æ•°ç»„æœ€å¤§ä¹˜ç§¯

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æœ€çŸ­è¿ç»­å­æ•°ç»„

æ±‚å’Œå¤§äºNçš„æœ€çŸ­è¿ç»­å­æ•°ç»„çš„é•¿åº¦

###### æœ€å¤§å­æ®µå’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æ¥é›¨æ°´(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(4)

**é¢˜ç›®**ï¼šæ™®é€šæ¥é›¨æ°´ã€‚å¯¹äº**æ¯ä¸€åˆ—**æ¥è¯´ï¼Œä»–èƒ½å­˜çš„é›¨æ°´é‡æ˜¯ä»–å·¦è¾¹**æœ€é«˜å¢™å’Œå³è¾¹æœ€é«˜å¢™ä¸­è¾ƒä½çš„é‚£å µå¢™çš„é«˜åº¦**å‡å»è‡ªèº«å¢™çš„é«˜åº¦ã€‚æ‰€ä»¥å¯ä»¥ç”¨**æ•°ç»„è®°å½•æ¯åˆ—å·¦å³æœ€é«˜å¢™çš„é«˜åº¦**ï¼Œç„¶åè®¡ç®—æ¯ä¸€åˆ—å¯ä»¥å­˜çš„é›¨æ°´é‡ã€‚   

<img src="assets/image-20200813102515600.png" alt="image-20200813102515600" style="zoom:50%;" />

**æ™®é€šéå†æ³•**ï¼šæ—¶é—´O(N^2)ï¼Œç©ºé—´O(1)ã€‚ä¹Ÿå°±æ˜¯æ¯åˆ°**ä¸€ä¸ªæ–°çš„ä½ç½®**å°±æ‰¾å·¦è¾¹æœ€é«˜çš„å’Œå³è¾¹æœ€é«˜çš„ï¼Œå¦‚æœæ¯”ä¸¤è¾¹éƒ½ä½åˆ™èƒ½æ¥é›¨æ°´ã€‚å¦åˆ™æ²¡æœ‰é›¨æ°´ã€‚

åŠ¨æ€è§„åˆ’ï¼šæ—¶é—´å¤æ‚åº¦O(N)ï¼Œç©ºé—´å¤æ‚åº¦O(N)ã€‚ä½¿ç”¨åŠ¨æ€è§„åˆ’å¯ä»¥å‡å°‘æ¯æ¬¡æ‰¾å·¦å³æœ€é«˜çš„é‡å¤æ¬¡æ•°ã€‚ä¹Ÿå°±æ˜¯ç›´æ¥**ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«ä¿å­˜å½“å‰ä½ç½®å·¦å³å‡ºç°è¿‡çš„æœ€å¤§é«˜åº¦**ã€‚leftMax ä¸ rightMax æ˜¯**å•è°ƒé€’å¢**çš„ã€‚

```java
public int trap2(int[] height) {
    int sum = 0;
    int[] leftMax = new int[height.length];
    int[] rightMax = new int[height.length];

    for (int i = 1; i < height.length - 1; i++) {
        // å½“å‰ä½ç½®ä¸å‰ä¸€ä¸ªä½ç½®æ¯”è¾ƒ
        leftMax[i] = Math.max(leftMax[i - 1], height[i - 1]);
    }
    for (int i = height.length - 2; i >= 0; i--) {
        rightMax[i] = Math.max(rightMax[i + 1], height[i + 1]);
    }
    for (int i = 1; i < height.length - 1; i++) {
        // æ‰¾åˆ°å·¦å³ä¸­æœ€å°çš„ä¸€ä¸ª,è¿™ä¸ªæœ€å°å€¼å¿…é¡»å¤§äºå½“å‰é«˜åº¦æ‰èƒ½æœ‰æ°´
        int min = Math.min(leftMax[i], rightMax[i]);
        if (min > height[i]) {
            sum = sum + (min - height[i]);
        }
    }
    return sum;
}
```

###### äºŒç»´æ¥é›¨æ°´

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æœ‰åºæ•°ç»„æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„é•¿åº¦

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ç»™å®š **m * n** çš„çŸ©é˜µï¼Œå¯ä»¥ä»**ä»»æ„ä½ç½®**å¼€å§‹ï¼Œå‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œè¦æ±‚ä¸‹ä¸€ä¸ªä½ç½®ä¸Šçš„å…ƒç´ è¦å¤§äºå½“å‰å…ƒç´ ï¼Œæ‰¾å‡ºçŸ©é˜µä¸­æœ€é•¿é€’å¢è·¯å¾„é•¿åº¦ã€‚

###### æ”¾è‹¹æœçš„æ–¹æ³•æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

æ”¾è‹¹æœ(æŠŠ M ä¸ªåŒæ ·çš„è‹¹æœæ”¾åœ¨ N ä¸ªåŒæ ·çš„ç›˜å­é‡Œï¼Œå…è®¸æœ‰çš„ç›˜å­ç©ºç€ä¸æ”¾ï¼Œé—®å…±æœ‰å¤šå°‘ç§ä¸åŒçš„åˆ†æ³•ï¼Ÿ)
æ³¨æ„ï¼š5ã€1ã€1 å’Œ 1ã€5ã€1 æ˜¯åŒä¸€ç§åˆ†æ³•ï¼Œå³é¡ºåºæ— å…³ã€‚

###### è§†é¢‘æ‹¼æ¥

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

LeetCode1024

###### å°½å¯èƒ½å‚åŠ ä¼šè®®çš„ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

https://leetcode-cn.com/problems/maximum-number-of-events-that-can-be-attended/

###### ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

https://leetcode-cn.com/problems/daily-temperatures

å˜åŒ–ï¼šä¸€ä¸ªæ•°ç»„ï¼Œæ±‚å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ¯”å®ƒå°çš„å·¦è¾¹çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸‹æ ‡ï¼Œè¾“å‡ºä¸€ä¸ªæ•°ç»„ã€‚

###### äºŒç»´æ•°ç»„è¾“å‡ºä¸ºä¸€ç»´æ•°ç»„

äºŒç»´æ•°ç»„ï¼Œæ¯ä¸€è¡Œæ˜¯æœ‰åºçš„ï¼Œè¾“å‡ºä¸ºä¸€ä¸ªä¸€ç»´æœ‰åºæ•°ç»„ï¼Œå£è¿°ã€‚

###### çŸ©é˜µä¸­çš„è·¯å¾„

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

å‰‘æŒ‡offeré¢˜ç›®

###### ä¸€ä¸ªæ•°ç»„å‘å·¦æ»šåŠ¨kä¸ªå•ä½

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ä¸€ä¸ªæ•°ç»„å‘å·¦æ»šåŠ¨kä¸ªå•ä½ï¼Œç„¶åéœ€è¦ä½ å„ç§ä¼˜åŒ–

###### åˆå¹¶Kä¸ªæœ‰åºæ•°ç»„

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ç®—æ³• åˆå¹¶kä¸ªæœ‰åºæ•°ç»„ï¼Œå…ˆè¯´æ€è·¯ï¼Œè¯´äº†ä¸¤ä¸¤åˆå¹¶ã€åˆ†æ²»ã€‚è®©å†™åˆ†æ²»

###### æœ‰åºæ•°ç»„ç¬¬ä¸€ä¸ªä¸å°äºtargetçš„ä¸‹æ ‡

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

è¿”å›æŒ‡å‘æœ‰åºèŒƒå›´æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªä¸å°äºï¼ˆå³å¤§äºæˆ–ç­‰äºï¼‰æŒ‡å®štarget çš„ä¸‹æ ‡ï¼Œæˆ–è‹¥æ‰¾ä¸åˆ°è¿™ç§å…ƒç´ åˆ™è¿”å› -1,æ—¶é—´å¤æ‚åº¦è¦æ±‚O(log n)ã€‚æœ‰äººè¯´è¿™é¢˜è·Ÿleetcode35ä¸€æ ·ï¼Œä½†æ˜¯é¢è¯•å®˜è¯´çš„æ˜¯è¿™é¢˜çš„å…ƒç´ å¯ä»¥é‡å¤çš„ï¼Œleetcodeæ˜¯ä¿è¯ä¸ä¼šé‡å¤çš„ã€‚

```java
public static int helper(int[] array, int target) {
    // ä¸‰ä¸ªè¾¹ç•Œæ¡ä»¶: 1.æ•°ç»„æ˜¯ç©º  2.æ•°ç»„é•¿åº¦æ˜¯0  3.æ•°ç»„çš„æœ€å¤§çš„é‚£ä¸ªæ•°éƒ½æ¯”targetå°
    if (array == null || array.length == 0 || array[array.length - 1] < target) {
        return -1;
    }
    int start = 0;
    int end = array.length - 1;
    while (start < end) {
        int mid = (start + end) / 2;
        if (array[mid] >= target) {
            end = mid;
        } else {
            start = mid + 1;
        }
    }
    return start;
}
```

###### æœ‰åºæ•°ç»„ä¸­ç›®æ ‡å€¼ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

å­—èŠ‚ï¼šæˆ‘å…ˆå£è¿°äº†ç›´æ¥éå†ï¼Œå“ˆå¸Œè¡¨ï¼Œç„¶åæå‡ºè¦ç”¨äºŒåˆ†ï¼Œä»–è¯´é‚£å°±å†™ä¸ªäºŒåˆ†å§ã€‚ä¸€å¼€å§‹å†™çš„æ˜¯æ­£å¸¸çš„äºŒåˆ†ï¼Œå‘ç°æ²¡æœ‰è€ƒè™‘é‡å¤å…ƒç´ çš„æƒ…å†µï¼Œç„¶åæ”¹æˆæŸ¥æ‰¾å·¦è¾¹ç•Œäº†ã€‚ç„¶åç»™é¢è¯•å®˜è§£é‡Šäº†ä¸€ä¸‹ï¼Œé¢è¯•å®˜æ˜ç™½äº†å°±æ²¡å‡ºé¢˜äº†ã€‚

çŒ¿è¾…å¯¼ï¼šéä¸¥æ ¼é€’å¢æ•°ç»„1ï¼Œ2ï¼Œ3ï¼Œ3ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œæ‰¾åˆ°ç›®æ ‡æ•°å­—æ‰€åœ¨çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæ— åˆ™è¾“å‡º-1ï¼Œå¦‚3ï¼Œè¾“å‡º2ï¼Œè¦æ±‚O(log n);

###### ä¸¤ä¸ªæœ‰åºæ•°ç»„æ‰¾ç¬¬kä¸ª

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

è¦æ±‚O(logk)æ—¶é—´å¤æ‚åº¦

###### äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

å‰‘æŒ‡offer

###### æ‰¾å‡ºé‡å¤ä¸€æ¬¡çš„å…ƒç´ 

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ä¸€ä¸ªé•¿åº¦ä¸ºNçš„æ•°ç»„ï¼Œé‡Œé¢å…ƒç´ å€¼åœ¨1-Nä¹‹é—´ï¼ˆé—­åŒºé—´ï¼‰ã€‚æ‰¾å‡ºé‡å¤å…ƒç´  æ—¶é—´O(n) ç©ºé—´O(1)

###### é©¬èµ°æ—¥

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

é©¬èµ°æ—¥ï¼Œåˆ¤æ–­èƒ½å¦ä»ä¸€ä¸ªç‚¹åˆ°å¦ä¸€ä¸ªç‚¹ï¼Œå¹¶è¿”å›è·¯å¾„

###### 1-nçš„å­—å…¸æ’åºæ•°ç»„

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

ç»™å®šä¸€ä¸ªæ•°nï¼Œè¾“å‡º1-nçš„å­—å…¸æ’åºæ•°ç»„ï¼Œå¦‚n=160ï¼Œè¾“å‡º[1,10,100,101,....,109,11,110,....,160]

###### çœ‹ç”µå½±é—®é¢˜

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

å·²çŸ¥ç”µå½±å¼€å§‹ä¸ç»“æŸæ—¶é—´ï¼Œçœ‹æœ€å¤šåœºç”µå½±

###### æ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

###### æœ‰åºæ•°ç»„ä¸­å”¯ä¸€å‡ºç°ä¸€æ¬¡çš„æ•°

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

[1,1,2,2,3,3,4,5,5,6,6,7,7......]æœ‰åºæ•°ç»„ä¸­å”¯ä¸€çš„æ•°ï¼Œè¾“å‡º4ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦o(lgn)

###### åŒºé—´åˆ—è¡¨çš„äº¤é›†

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

lc986

###### å¯¹è§’çº¿éå†

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

https://leetcode-cn.com/problems/diagonal-traverse/

###### æœ€å¤§æ­£æ–¹å½¢é¢ç§¯

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

https://blog.csdn.net/xiezongsheng1990/article/details/79938839

###### æ•°ç»„åˆ‡åˆ†

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

æŠŠä¸€ç»„æ•°ï¼ˆèŒƒå›´1-100ï¼‰åˆ†æˆä¸¤ç»„ä½¿å¾—ä¸¤ç»„æ•°çš„å¹³å‡å€¼ä¹‹å·®æœ€å¤§

###### å…«çš‡å

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

###### ç»„åˆæ€»å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

https://leetcode-cn.com/problems/combination-sum-iii/

###### é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

LeetCode238

##### 2. é“¾è¡¨é¢˜ç›®

###### é“¾è¡¨æ±‚å’Œ(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼(3)

**é¢˜ç›®**ï¼šç»™å®šä¸¤ä¸ªç”¨é“¾è¡¨è¡¨ç¤ºçš„æ•´æ•°ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæ•°ä½ã€‚è¿™äº›æ•°ä½æ˜¯**åå‘å­˜æ”¾**çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ªä½æ’åœ¨é“¾è¡¨é¦–éƒ¨ã€‚ç¼–å†™å‡½æ•°å¯¹è¿™ä¸¤ä¸ªæ•´æ•°æ±‚å’Œï¼Œå¹¶ç”¨é“¾è¡¨å½¢å¼è¿”å›ç»“æœã€‚

```java
public ListNode addTwoNumbers(ListNode list1, ListNode list2) {
    // å¼•å…¥dummyç»“ç‚¹
    ListNode dummy = new ListNode(0);
    ListNode head1 = list1, head2 = list2, cur = dummy;
    // è¿›ä½æ ‡å¿—
    int carry = 0;
    // å½“ä¸¤é“¾è¡¨éƒ½ä¸ºnullæ‰é€€å‡º
    while (head1 != null || head2 != null) {
        // å–é“¾è¡¨çš„å€¼ï¼Œå¦‚æœä¸€ä¸ªå·²ç»ä¸ºnullåˆ™è¿”å›0
        int value1 = (head1 != null) ? head1.val : 0;
        int value2 = (head2 != null) ? head2.val : 0;
        // å¸¦è¿›ä½å€¼è®¡ç®—å’Œ
        int sum = carry + value1 + value2;
        // å†æ¬¡æ›´æ–°è¿›ä½
        carry = sum / 10;
        // ç”Ÿæˆæ–°çš„ç»“ç‚¹
        cur.next = new ListNode(sum % 10);
        cur = cur.next;
        // å¦‚æœé“¾è¡¨ä¸ä¸ºnullè¿˜è¦ç»§ç»­ç§»åŠ¨æŒ‡é’ˆè¿›è¡Œä¸‹ä¸€è½®ç›¸åŠ 
        if (head1 != null) head1 = head1.next;
        if (head2 != null) head2 = head2.next;
    }
    // æœ€åè¿˜éœ€è¦å†æ¬¡çœ‹çœ‹è¿›ä½æ ‡å¿—æ˜¯å¦ä¸º1
    if (carry > 0) {
        cur.next = new ListNode(carry);
    }
    return dummy.next;
}
```

å¦‚æœæ˜¯**é¡ºåºå­˜æ”¾**ï¼Œé‚£ä¹ˆ**ç›´æ¥é€†åºï¼Œæ±‚å’Œä¹‹åå†é€†åº**ã€‚

###### é“¾è¡¨å®ç°ä¸€ä¸ªæ ˆ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### é“¾è¡¨é¦–ä¸ªç›¸äº¤ç»“ç‚¹

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

ä¸¤ä¸ªé“¾è¡¨ï¼Œå¯èƒ½ç›¸äº¤ï¼Œæ‰¾å‡ºç›¸äº¤çš„èŠ‚ç‚¹

###### æœ‰ç¯é“¾è¡¨å…¥å£èŠ‚ç‚¹(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**é¢˜è§£**ï¼šè®¾ç½®å¿«æ…¢æŒ‡é’ˆï¼Œéƒ½ä»é“¾è¡¨å¤´å‡ºå‘ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå‡å¦‚æœ‰ç¯ï¼Œä¸€å®šç›¸é‡äºç¯ä¸­æŸç‚¹ã€‚æ¥ç€è®©ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»ç›¸é‡ç‚¹å’Œé“¾è¡¨å¤´å‡ºå‘ï¼Œä¸¤è€…éƒ½æ”¹ä¸ºæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œæœ€ç»ˆç›¸é‡äºç¯å…¥å£ã€‚è¯æ˜ä¸€ä¸‹ï¼š

<img src="assets/image-20200807220009353.png" alt="image-20200807220009353" style="zoom:30%;" />

è®¡ç®—å¼å¦‚ä¸‹ï¼š

<img src="assets/image-20200807220107807.png" alt="image-20200807220107807" style="zoom:60%;" />

```java
public ListNode EntryNodeOfLoop(ListNode head) {
    ListNode fast = head;
    ListNode slow = head;
    if (fast == null || fast.next == null) return null;
    // å¿«æ…¢æŒ‡é’ˆç§»åŠ¨
    while (fast != null && fast.next != null) {
        fast = fast.next.next;
        slow = slow.next;
        // åŒæŒ‡é’ˆç›¸é‡
        if (fast == slow) break;
    }
    // æ…¢æŒ‡é’ˆé‡æ–°å›åˆ°å¤´
    slow = head;
    // ä¸¤æŒ‡é’ˆåŒæ—¶ç§»åŠ¨
    while (fast != slow) {
        fast = fast.next;
        slow = slow.next;
    }
    return fast;
}
```



###### åè½¬é“¾è¡¨çš„Måˆ°Néƒ¨åˆ†(2)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€çŒ¿è¾…å¯¼(2)

###### åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨(2)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

é€’å½’+è¿­ä»£

###### åˆå¹¶kä¸ªé“¾è¡¨(3)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### é“¾è¡¨æŒ‰æŒ‡å®šsizeç¿»è½¬

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### é“¾è¡¨å€’æ•°ç¬¬Kä¸ªç»“ç‚¹(2)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æ‹·è´å¸¦æœ‰éšæœºæŒ‡é’ˆçš„é“¾è¡¨

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### å›æ–‡é“¾è¡¨(3)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### åˆ é™¤é“¾è¡¨é‡å¤å…ƒç´ (2)

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼(2)

å»é™¤å•å‘é“¾è¡¨ä¸­é‡å¤çš„å…ƒç´ ï¼Œåªè¦å‡ºç°é‡å¤ä¸€ä¸ªä¸ç•™1 2 2 3-->1 3

###### åè½¬é“¾è¡¨(H)

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼(2)

**è¿­ä»£ï¼ˆå¤´æ’æ³•ï¼‰**ï¼š

```java
public ListNode reverseList(ListNode head) {
    if(head == null || head.next == null) return head;
    // å¼•å…¥dummyç»“ç‚¹
    ListNode dummy = new ListNode(0);
    // ä½¿ç”¨ä¸€ä¸ªcurè¡¨ç¤ºå½“å‰æ­£åœ¨åè½¬çš„ç»“ç‚¹
    ListNode cur = head;
    // headä¸€ç›´åç§»
    head = head.next;
    // å…ˆæŠŠé“¾è¡¨ç¬¬ä¸€ä¸ªç»“ç‚¹æ”¾åˆ°dummyåé¢å½“åšåè½¬åçš„æœ€åä¸€ä¸ªç»“ç‚¹
    dummy.next = cur;
    cur.next = null;
    // ä¸‹é¢å°±æ˜¯ä¸æ–­éå†äº†
    while(head != null) {
        // curæŒ‡å‘å¤´ç»“ç‚¹
        cur = head;
        // ç§»åŠ¨å¤´ç»“ç‚¹
        head = head.next;
        // å°†curç»“ç‚¹æ’å…¥åˆ°dummyç»“ç‚¹ä¹‹åå½¢æˆæ–°çš„é“¾è¡¨
        cur.next = dummy.next;
        dummy.next = cur;
    }
    return dummy.next;
}
```

é€’å½’ï¼š

```java
public ListNode reverse(ListNode head) {
    // é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ åªæœ‰ä¸€ä¸ªå…ƒç´ æˆ–è€…æ— å…ƒç´ è¿”å›
    if (head == null || head.next == null) return head;

    ListNode newHead = reverse(head.next);
    // ä½¿ç”¨ä¸€ä¸ªtempæ¥ä¿å­˜ä¸‹ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆ
    ListNode temp = head.next;
    temp.next = head;
    head.next = null;
    return newHead;
}
```

###### åŒå‘é“¾è¡¨é€†åº

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

```java
private static DoubleNode reversalList(DoubleNode head) {
    DoubleNode pre = null;
    DoubleNode next;
    while (head != null) {
        next = head.next;
        head.next = pre;
        head.pre = next;
        pre = head;
        head = next;
    }
    return pre;
}
```

###### Kä¸ªä¸€ç»„åè½¬é“¾è¡¨(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€çŒ¿è¾…å¯¼

```java
public ListNode reverseKGroup(ListNode head, int k) {
    // ç”±äºè¦æ“ä½œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ å¼•å…¥dummyèŠ‚ç‚¹
    ListNode dummy = new ListNode(0);
    dummy.next = head;
    // åˆå§‹åŒ–åŒæŒ‡é’ˆ
    ListNode slow = dummy;
    ListNode fast = dummy;
    while (true) {
        // è®©fastéå†åˆ°éœ€è¦ç¿»è½¬çš„æœ€åä¸€ä¸ªå…ƒç´ ä½ç½®
        for (int i = 0; i < k && fast != null; i++) {
            fast = fast.next;
        }
        // åªè¦fastéå†åˆ°äº†nullè¯´æ˜é•¿åº¦ä¸å¤Ÿä¸€æ¬¡åè½¬ç›´æ¥è·³å‡ºå¾ªç¯
        if (fast == null) break;
        // ä¸‹é¢å°±æ˜¯ç”»å›¾æ”¹å˜æŒ‡é’ˆæŒ‡å‘
        // ä¸ºäº†åˆ«æŠŠé“¾è¡¨æä¸¢ï¼Œè®°å½•ä¸€ä¸‹åé¢ç­‰å¾…åè½¬çš„é“¾è¡¨å¤´ç»“ç‚¹
        ListNode remainList = fast.next;
        // å®šä¹‰startæŒ‡å‘ç¿»è½¬å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®
        ListNode reverseStart = slow.next;
        // æœ€åä¸€ä¸ªç¿»è½¬å…ƒç´ å…ˆæ–­é“¾
        fast.next = null;
        // ç„¶åé€šè¿‡ç¿»è½¬æ–¹æ³•reverse()åæ¥åœ¨slowåé¢
        slow.next = reverseList(reverseStart);
        // ä¿æŒä¸‹æ¬¡å¾ªç¯ä¸€è‡´çš„ä½ç½®
        reverseStart.next = remainList;
        slow = reverseStart;
        // åè½¬ä¹‹åé‡ç½®æŒ‡é’ˆ
        fast = slow;
    }
    return dummy.next;
}

// è¿­ä»£åè½¬é“¾è¡¨çš„æ¨¡æ¿
public ListNode reverseList(ListNode head) {
    // åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘null
    ListNode pre = null;
    ListNode next = null;

    while (head != null) {
        next = head.next;
        head.next = pre;
        pre = head;
        head = next;
    }
    return pre;
}
```

###### é“¾è¡¨æ’åº

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

###### æ¯”ç»™å®šå€¼å¤§çš„ç»“ç‚¹ç§»åˆ°é“¾è¡¨æœ«å°¾

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

ä¸€ä¸ªé“¾è¡¨ï¼Œç»™å®šä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ¯”ç›®æ ‡å€¼å¤§çš„èŠ‚ç‚¹å»åˆ°é“¾è¡¨åé¢ï¼Œè¦æ±‚ä¸æ”¹å˜ç›¸å¯¹é¡ºåº

æ¯”å¦‚1 3 2 1 3 2 1 ç»™å®šç›®æ ‡å€¼2ï¼Œè¿”å›é“¾è¡¨1 2 1 2 1 3 33.

###### æ‹†åˆ†å¥‡å¶é“¾è¡¨

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼(3)

###### å¯¹é“¾è¡¨æ’åº

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼(2)

å¯¹é“¾è¡¨è¿›è¡ŒSortï¼ŒNodeçš„valä¸ºfinalï¼Œä¸å…è®¸ä½¿ç”¨æ•°ç»„ï¼ŒListï¼Œå› ä¸ºè€ƒå¯Ÿçš„æ˜¯å¯¹é“¾è¡¨çš„æ“ä½œ

##### 3. æ ˆä¸é˜Ÿåˆ—

###### æœ€å°å€¼æ ˆ(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**æ™®é€šé—®é¢˜**ï¼šå®ç°ä¸€ä¸ªèƒ½å¤Ÿè¿”å›æœ€å°å€¼çš„æœ€å°å€¼æ ˆã€‚

```java
// å­˜æ”¾æ•°æ®çš„æ ˆ
private Stack<Integer> dataStack = new Stack<>();
// å­˜æ”¾æœ€å°å…ƒç´ çš„æ ˆ
private Stack<Integer> minStack = new Stack<>();

public void push(int node) {
    // æ‰€æœ‰æ•°æ®æ­£å¸¸å‹å…¥æ™®é€šæ ˆ
    dataStack.push(node);
    // å¦‚æœä¸ºç©ºç›´æ¥åŠ 
    if(minStack.isEmpty()) {
        minStack.push(node);
    } else {
        // å¦åˆ™çœ‹è°å°å°±åŠ è¿›å»
        minStack.push(Math.min(minStack.peek(), node));
    }
}

public void pop() {
    dataStack.pop();
    minStack.pop();
}

public int top() {
    return dataStack.peek();
}

public int min() {
    return minStack.peek();
}
```

ä¸Šé¢è¿˜èƒ½åªé€šè¿‡**ä¸€ä¸ªå˜é‡**æ¥è®°å½•æœ€å¤§å€¼ï¼Œä½¿å¾—ç©ºé—´å˜æˆ O(1)ã€‚

**è¿›é˜¶**ï¼šé€šè¿‡**æ•°ç»„**å®ç°ä¸€ä¸ªæ ˆï¼Œå¹¶æœ‰ä¸ªå‡½æ•°è¿”å›æ ˆçš„æœ€å°å€¼ã€‚

###### ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

ä½¿ç”¨**ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—**ï¼Œä¸€ä¸ªå…ƒç´ éœ€è¦ç»è¿‡**ä¸¤ä¸ªæ ˆæ‰èƒ½å‡ºé˜Ÿåˆ—**ï¼Œåœ¨ç»è¿‡ç¬¬ä¸€ä¸ª**æ ˆæ—¶å…ƒç´ é¡ºåºè¢«åè½¬**ï¼Œç»è¿‡**ç¬¬äºŒä¸ªæ ˆæ—¶å†æ¬¡è¢«åè½¬**ï¼Œæ­¤æ—¶å°±æ˜¯å…ˆè¿›å…ˆå‡ºé¡ºåºã€‚

```java
private Stack<Integer> inStack = new Stack<>();
private Stack<Integer> outStack = new Stack<>();

public void push(int x) {
    // å‹å…¥å°±å‹åˆ°inæ ˆ
    inStack.push(x);
}

public int pop() {
    // å‡ºæ ˆä¸ºç©º
    if(outStack.isEmpty()) {
        // å¦‚æœå…¥æ ˆä¹Ÿä¸ºç©ºï¼ŒæŠ›å¼‚å¸¸
        if(inStack.isEmpty()) return -1;
        // å°†å…¥æ ˆçš„å…¨éƒ¨å…ƒç´ æ”¾åˆ°å‡ºæ ˆä¸­
        while(!inStack.isEmpty()) {
            outStack.push(inStack.pop());
        }
    }
    // å¼¹å‡ºå…ƒç´ 
    return outStack.pop();
}

public boolean empty() {
    // çœ‹çœ‹æ˜¯å¦éƒ½ä¸ºç©º
    return inStack.isEmpty() && outStack.isEmpty();
}
```

###### ä¸¤ä¸ªé˜Ÿåˆ—å®ç°ä¸€ä¸ªæ ˆ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

åœ¨å°†ä¸€ä¸ªå…ƒç´  x æ’å…¥é˜Ÿåˆ—æ—¶ï¼Œä¸ºäº†ç»´æŠ¤åŸæ¥çš„**åè¿›å…ˆå‡º**é¡ºåºï¼Œéœ€è¦è®© **x æ’å…¥é˜Ÿåˆ—é¦–éƒ¨**ã€‚è€Œé˜Ÿåˆ—çš„**é»˜è®¤æ’å…¥é¡ºåºæ˜¯é˜Ÿåˆ—å°¾éƒ¨**ï¼Œå› æ­¤åœ¨å°† x **æ’å…¥é˜Ÿåˆ—å°¾éƒ¨**ä¹‹åï¼Œéœ€è¦è®©**é™¤äº† x ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ å‡ºé˜Ÿåˆ—**ï¼Œ**ç„¶åä¾æ¬¡å†å…¥é˜Ÿåˆ—**ï¼Œä¹Ÿå°±æ˜¯æ¢ä¸ªæ–¹å‘æ’å…¥åˆ°é˜Ÿåˆ—çš„**æœ«å°¾**ã€‚

```java
private Queue<Integer> queue = new LinkedList<>();

public void push(int x) {
    // å¾—åˆ°å½“å‰é˜Ÿåˆ—çš„å¤§å°
    int size = queue.size();
    // åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­
    queue.add(x);
    // æŠŠå‰é¢çš„å…ƒç´ å…¨éƒ¨æ¬è¿åˆ°åˆšæ’å…¥çš„å…ƒç´ çš„åé¢
    for (int i = 0; i < size; i++) {
        queue.add(queue.poll());
    }
}

public int pop() {
    return queue.remove();
}

public int top() {
    return queue.peek();
}

public boolean empty() {
    return queue.isEmpty();
}
```

###### åˆ¤æ–­å­—ç¬¦ä¸²æ‹¬å·æ˜¯å¦æœ‰æ•ˆ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ‹¬å·æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶è¾“å‡ºç¬¬ä¸€ä¸ªä½¿å­—ç¬¦ä¸²æ— æ•ˆçš„æ‹¬å·çš„ä½ç½®ã€‚

```java
public boolean isValid(String s) {
    Stack<Character> stack = new Stack<>();
    // éå†è¿™ä¸ªå­—ç¬¦ä¸²
    for (char c : s.toCharArray()) {
        // é‡åˆ°è§„å®šçš„ç¬¦å·å°±å‹æ ˆ
        if (c == '(' || c == '{' || c == '[') {
            stack.push(c);
            // è¡¨ç¤ºé‡åˆ°é—­æ‹¬å·
        } else {
            // å¦‚æœæ­¤æ—¶æ ˆä¸ºç©ºç›´æ¥ä¸ºfalse
            if (stack.isEmpty()) {
                return false;
            }
            // å¼¹å‡ºæ ˆé¡¶ç¬¦å·
            char temp = stack.pop();
            // åˆ†åˆ«åˆ¤æ–­æ˜¯å¦ç›¸åŒ
            if ((temp == '(' && c != ')')) return false;
            if ((temp == '[' && c != ']')) return false;
            if ((temp == '{' && c != '}')) return false;
        }
    }
    // æœ€åçœ‹æ ˆæ˜¯å¦ä¸ºç©º
    return stack.isEmpty();
}
```

##### 4. æ ‘

###### äºŒå‰æ ‘éé€’å½’å‰åºéå†

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ä½¿ç”¨**æ ˆ**ï¼Œå…ˆå°†**æ ¹èŠ‚ç‚¹å‹æ ˆ**ï¼Œåªè¦**æ ˆä¸ä¸ºç©ºåˆ™ä¸€ç›´å¼¹å‡º**ï¼Œå¼¹å‡ºä¸€ä¸ªå¤„ç†æ•°æ®ï¼Œç„¶å**å…ˆå‹å…¥å³å­ç»“ç‚¹ï¼Œå†å‹å…¥å·¦å­ç»“ç‚¹**ï¼ˆç”±äºæ˜¯åˆ©ç”¨æ ˆï¼Œæ‰€ä»¥å‹å…¥é¡ºåºç›¸åæ˜¯**==å…ˆå³åå·¦==**ï¼‰ã€‚

```java
public List<Integer> preOrderTraversal(TreeNode root) {
    List<Integer> resList = new ArrayList<>();
    if(root == null) return resList;
    // å‡†å¤‡ä¸€ä¸ªæ ˆå¹¶æŠŠæ ¹èŠ‚ç‚¹å‹æ ˆ
    Stack<TreeNode> stack = new Stack<>();
    // æ ¹ç»“ç‚¹å‹æ ˆ
    stack.push(root);
    // ä¸æ–­ä»æ ˆä¸­å¼¹å‡ºå…ƒç´ å¼¹å‡ºæ—¶å¤„ç†æ•°æ®ï¼Œå¹¶å…ˆå°†å³å­©å­å‹æ ˆå†å°†å·¦å­©å­å‹æ ˆ
    while(!stack.isEmpty()) {
        // å¼¹å‡ºèŠ‚ç‚¹å¹¶å¤„ç†æ•°æ®
        TreeNode node = stack.pop();
        resList.add(node.val);
        // å…ˆå‹å…¥å³ç»“ç‚¹ï¼Œå†å‹å…¥å·¦ç»“ç‚¹
        if(node.right != null) stack.push(node.right);
        if(node.left != null) stack.push(node.left);
    }
    return resList;
}
```

###### äºŒå‰æ ‘éé€’å½’ä¸­åºéå†(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼(2)

éé€’å½’çš„æµç¨‹ï¼š

å…ˆå°†**æ ¹èŠ‚ç‚¹**å…¥æ ˆã€‚å°†å½“å‰èŠ‚ç‚¹çš„**æ‰€æœ‰å·¦å­©å­**å…¥æ ˆï¼Œç›´åˆ°**å·¦å­©å­ä¸ºç©º**ã€‚è®¿é—®**æ ˆé¡¶**å…ƒç´ ï¼Œå¦‚æœæ ˆé¡¶å…ƒç´ **å­˜åœ¨å³å­©å­**ï¼Œåˆ™å˜æ¢åˆ°**å³å­èŠ‚ç‚¹**ç»§ç»­ç¬¬ 2 æ­¥ã€‚

<img src="assets/47fff35dd3fd640ba60349c78b85242ae8f4b850f06a282cd7e92c91e6eff406-1.gif" alt="ä¸­åºéå†è¿­ä»£åŠ¨å›¾" style="zoom:50%;" />

æ³¨æ„è¿™é‡Œ**ä¸ç”¨æŠŠæ ¹ç»“ç‚¹å‹å…¥æ ˆ**ä¸­ã€‚æ³¨æ„ï¼šä¸¤ä¸ª **while**ã€‚

```java
public List<Integer> inorderTraversal(TreeNode root) {
    List<Integer> res = new ArrayList<>();
    Stack<TreeNode> stack = new Stack<>();
    // æ¡ä»¶æ˜¯æ ˆä¸ä¸ºç©ºä¸”rootä¸ä¸ºnull
    while (!stack.isEmpty() || root != null) {
        // å°†å½“å‰rootçš„å…¨éƒ¨å·¦å­ç»“ç‚¹å‹æ ˆ,æ¨¡æ‹Ÿé€’å½’è°ƒç”¨
        while (root != null) {
            stack.push(root);
            root = root.left;
            // å½“å‰èŠ‚ç‚¹ä¸ºnullï¼Œè¯´æ˜å·¦è¾¹èµ°åˆ°å¤´ï¼Œæ­¤æ—¶å¯ä»¥æ ˆä¸­å¼¹å‡ºèŠ‚ç‚¹å¹¶å¤„ç†æ•°æ®
        }
        // å¤„ç†å½“å‰èŠ‚ç‚¹
        TreeNode temp = stack.pop();
        res.add(temp.val);
        // é©¬ä¸Šåˆ‡æ¢å¤„ç†å³å­èŠ‚ç‚¹
        root = temp.right;
    }
    return res;
}
```

###### äºŒå‰æ ‘éé€’å½’ååºéå†

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**å‰åºéå†**çš„è¿‡ç¨‹ æ˜¯ **ä¸­å·¦å³**ã€‚å°†å…¶è½¬åŒ–æˆ **ä¸­å³å·¦**ã€‚ä¹Ÿå°±æ˜¯å‹æ ˆçš„è¿‡ç¨‹ä¸­**ä¼˜å…ˆå‹å…¥å·¦å­æ ‘ï¼Œå†å‹å…¥å³å­æ ‘**ã€‚ç„¶åå°†è¿™ä¸ªç»“æœ**è¿”å›æ¥**ï¼Œè¿™é‡Œæ˜¯åˆ©ç”¨æ ˆçš„å…ˆè¿›åå‡º**å€’åºæ‰“å°**ï¼Œå³æ˜¯**ååºéå†**ã€‚

```java
public List<Integer> postorderTraversal(TreeNode root) {

    if (root == null) return new ArrayList<>();
    List<Integer> resList = new ArrayList<>();
    // å‡†å¤‡ä¸¤ä¸ªæ ˆ
    Stack<TreeNode> s1 = new Stack<>();
    Stack<TreeNode> s2 = new Stack<>();
    // æ ¹èŠ‚ç‚¹å‹å…¥æ ˆ1
    s1.push(root);
    // é€€å‡ºæ¡ä»¶ä¸ºæ ˆ1ä¸ºç©º
    while (!s1.isEmpty()) {
        // æ ˆ1æ¯å¼¹å‡ºä¸€ä¸ªå…ƒç´ å°±æ”¾å…¥æ ˆ2
        root = s1.pop();
        s2.push(root);
        // å†å°†å½“å‰å¼¹å‡ºå…ƒç´ çš„å·¦å³å­èŠ‚ç‚¹åˆ†åˆ«å…¥æ ˆ,ä¸€å®šæ˜¯å…ˆå·¦å†å³
        if (root.left != null) s1.push(root.left);
        if (root.right != null) s1.push(root.right);
    }
    // å½“æ ˆ1ä¸ºç©ºæ—¶ï¼Œä¾æ¬¡å¼¹å‡ºæ ˆ2å°±æ˜¯ååºéå†é¡ºåº
    while (!s2.isEmpty()) {
        resList.add(s2.pop().val);
    }
    return resList;
}
```

###### äºŒå‰æ ‘çš„å±‚åºéå†(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

è¿™é‡Œè¿­ä»£å’Œé€’å½’æ˜¯ä¸¤ä¸ª**==æ¨¡æ¿==**ã€‚å¯è§£å†³å¾ˆå¤šç±»ä¼¼é—®é¢˜ã€‚

**è¿­ä»£æ³•**ï¼šå¯ä½¿ç”¨**é˜Ÿåˆ—**ï¼Œå°†å·¦å³èŠ‚ç‚¹èŠ‚ç‚¹å…ˆååŠ å…¥**é˜Ÿåˆ—å°¾**ï¼Œæ¯æ¬¡ä»**é˜Ÿåˆ—å¤´**å–å‡ºèŠ‚ç‚¹è¿›å…¥è¾“å‡ºé“¾è¡¨ã€‚

```java
public List<List<Integer>> levelOrder(TreeNode root) {
    // Base case
    if(root == null) return new ArrayList<>();
    // ä½¿ç”¨è¾…åŠ©é˜Ÿåˆ—å¹¶å°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—
    Queue<TreeNode> queue = new LinkedList<>() ;
    queue.add(root);
    List<List<Integer>> resList = new ArrayList<>();
    // é˜Ÿåˆ—ä¸ºç©ºæ—¶é€€å‡ºå¾ªç¯
    while(queue.size() != 0) {
        // è·å–å½“å‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯å½“å‰è¿™ä¸€å±‚æœ‰å¤šå°‘ä¸ªç»“ç‚¹ï¼Œè¿™æ˜¯ä¸ºäº†æ§åˆ¶è®¿é—®åˆ°äº†æŸä¸€å±‚
        int size = queue.size();
        List<Integer> levelList = new ArrayList<>();
        // å°†å½“å‰å±‚çš„å…ƒç´ ä¾æ¬¡å‡ºé˜Ÿåˆ—å¹¶å¤„ç†æ•°æ®ï¼Œæ¯å¼¹å‡ºä¸€ä¸ªç»“ç‚¹å¹¶å†æ¬¡å°†å…¶å·¦å³å­èŠ‚ç‚¹å…¥é˜Ÿåˆ—
        for(int i = 0; i < size; i++) {
            // å‡ºé˜Ÿåˆ—å¹¶å¤„ç†æ•°æ®
            TreeNode temp = queue.poll();
            levelList.add(temp.val);
            // å°†å‡ºé˜Ÿç»“ç‚¹çš„å·¦å³å­èŠ‚ç‚¹å…¥é˜Ÿ
            if(temp.left != null) queue.add(temp.left);
            if(temp.right != null) queue.add(temp.right);
        }
        // è¿™ä¸€å±‚å¼¹å‡ºçš„å…ƒç´ å¤„ç†å®Œæ¯•
        resList.add(levelList);
        // æ­¤æ—¶ä¸‹ä¸€å±‚çš„å…¨éƒ¨èŠ‚ç‚¹å·²ç»åˆ°é˜Ÿåˆ—ä¸­ï¼Œå†æ¬¡å¾ªç¯å³å¯
    }
    return resList;
}
```

**é€’å½’æ³•**ï¼šé€’å½’çš„å…³é”®å°±æ˜¯ç»´æŠ¤ä¸€ä¸ª level å˜é‡è®°å½•å½“å‰çš„å±‚æ•°ï¼Œå¦‚æœç»“æœåˆ—è¡¨ size å°äº level è¯´æ˜åˆ°äº†æ–°çš„ä¸€å±‚ã€‚

```java
public List<List<Integer>> levelOrder2(TreeNode root) {
    if (root == null) return resList;
    // ä»æ ¹ç»“ç‚¹å¼€å§‹é€’å½’,æ ¹ç»“ç‚¹æ˜¯ç¬¬0å±‚
    dfs(root, 0);
    return resList;
}

List<List<Integer>> resList = new ArrayList<>();

// è¾…åŠ©æ–¹æ³•:æ•´ä½“æ˜¯å…ˆåºéå†çš„æ¨¡æ¿
public void dfs(TreeNode node, int level) {
    // è¯´æ˜é‡åˆ°äº†æ–°çš„ä¸€å±‚åˆ™æ–°å»ºä¸€ä¸ªåˆ—è¡¨,å¹¶æ·»åŠ ä¸€å±‚æ–°çš„åˆ°ç»“æœä¸­
    if (resList.size() == level) {
        resList.add(new ArrayList<>());
    }
    // æ ¹æ®å±‚æ•°è·å–å¯¹åº”çš„åˆ—è¡¨å¹¶å°†å½“å‰èŠ‚ç‚¹çš„å€¼åŠ å…¥åˆ°listä¸­ï¼ˆå…ˆåºéå†ï¼‰
    resList.get(level).add(node.val);

    // é€’å½’è¿›è¡Œ
    if (node.left != null) dfs(node.left, level + 1);
    if (node.right != null) dfs(node.right, level + 1);
}
```

###### ä¹‹å­—å½¢éå†äºŒå‰æ ‘(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

å±‚åºéå†ç»´æŠ¤ä¸€ä¸ªå˜é‡ï¼Œé‡åˆ°å¶æ•°å±‚å°±é€†åºä¸€ä¸‹ã€‚

```java
Collections.reverse(levelList);
```

###### äºŒå‰æ ‘å³è§†å›¾(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

æ‰¾å±‚åºéå†æ¯å±‚**æœ€åä¸€ä¸ªèŠ‚ç‚¹**ã€‚è¿˜è€ƒè¿‡äºŒå‰æ ‘å·¦è§†å›¾ã€‚åˆ©ç”¨å±‚åºéå†æœ€åä¸€ä¸ªèŠ‚ç‚¹å³å¯ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```java
while(!queue.isEmpty()) {
    // å¾—åˆ°å½“å‰å±‚çš„å…ƒç´ ä¸ªæ•°
    int size = queue.size();
    // å¼¹å‡ºå½“å‰å±‚çš„æ‰€æœ‰å…ƒç´ å¹¶å°†å…¶å·¦å³ç»“ç‚¹å…¥é˜Ÿ
    for(int i = 0; i < size; i++) {
        // å¼¹å‡ºèŠ‚ç‚¹
        TreeNode node = queue.poll();
        // æ³¨æ„ï¼å½“ä¸”ä»…å½“å¼¹å‡ºç»“ç‚¹æ˜¯è¿™ä¸€å±‚æœ€åä¸€ä¸ª,ä¹Ÿå°±æ˜¯å³è§†å›¾
        if(i == size - 1) resList.add(node.val);
        if(node.left != null) queue.offer(node.left);
        if(node.right != null) queue.offer(node.right);
    }
}
```

çœ‹çœ‹é€’å½’æ³•ï¼š

```java
// å½“å‰æœ€å¤§å±‚æ•°
int level = -1;
List<Integer> resList = new ArrayList<>();

public List<Integer> rightSideView2(TreeNode root) {
    dfs(root, 0);
    return resList;
}

// è¾…åŠ©æ–¹æ³•ï¼šä¼ å…¥æ ¹èŠ‚ç‚¹ï¼Œå±‚æ•°ï¼Œç»“æœé›†
public void dfs(TreeNode root, int level) {
    // Base case
    if (root == null) return;
    // ä»£è¡¨æ˜¯æ–°çš„ä¸€å±‚ï¼Œä»…æ·»åŠ ä¸€æ¬¡
    if (level > this.level) {
        this.level = level;
        resList.add(root.val);
    }
    // å…ˆé€’å½’å³å­æ ‘
    dfs(root.right, level + 1);
    dfs(root.left, level + 1);
}
```

###### äºŒå‰æ ‘å„å±‚èŠ‚ç‚¹æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

é€’å½’ã€éé€’å½’ã€‚ç›´æ¥å¥—ç”¨å±‚åºéå†çš„**æ¨¡æ¿**ã€‚

###### äºŒå‰æœç´¢æ ‘ç¬¬Kå¤§èŠ‚ç‚¹

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

é¢˜ç›®ï¼šæ±‚æœç´¢äºŒå‰æ ‘ç¬¬ K å¤§çš„æ•°ï¼Œæ³¨æ„è¿™é‡Œä¸æ˜¯æ™®é€šçš„ä»å·¦åˆ°å³çš„ä¸­åºéå†ï¼Œè€Œæ˜¯**ä»å³åˆ°å·¦**çš„ä¸­åºéå†æ¨¡æ¿ã€‚

**é€’å½’**ï¼šç›´æ¥ç»´æŠ¤ä¸€ä¸ª**è®¡æ•°å™¨**ï¼Œä¸­åºé€’å½’éå†å³å¯ã€‚æ³¨æ„æ˜¯å…ˆé€’å½’å·¦å­æ ‘å†é€’å½’å³å­æ ‘ã€‚

```java
int res, index;

public int kthLargest2(TreeNode root, int k) {
    index = k;
    dfs(root);
    return res;
}

public void dfs(TreeNode root) {
    if (root == null) return;
    dfs(root.right);
    if (index == 0) return;
    index--;
    if (index == 0) res = root.val;
    dfs(root.left);
}
```

**è¿­ä»£**ï¼šä½¿ç”¨äºŒå‰æ ‘çš„**è¿­ä»£ä¸­åºéå†**æ–¹å¼è¿›è¡Œéå†ï¼Œä¹Ÿæ˜¯ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨å³å¯ã€‚æ³¨æ„æ˜¯å…ˆæŒç»­å‹å…¥å³ç»“ç‚¹ï¼Œå†å˜æ¢åˆ°å·¦ç»“ç‚¹ã€‚

```java
public int kthLargest(TreeNode root, int k) {
    Stack<TreeNode> stack = new Stack<>();
    int cnt = 0;
    while (root != null || !stack.isEmpty()) {
        while (root != null) {
            stack.push(root);
            root = root.right;
        }
        root = stack.pop();
        cnt++;
        if (cnt == k) return root.val;
        root = root.left;
    }
    return 0;
}
```



###### åˆ¤æ–­æ˜¯å¦æ˜¯æœç´¢äºŒå‰æ ‘(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€çŒ¿è¾…å¯¼

é€’å½’+è¿­ä»£ï¼šç±»ä¼¼äºä¸Šä¸ªé¢˜ï¼Œåªä¸è¿‡æ˜¯æŒç»­åˆ¤æ–­å¤§å°ï¼Œéœ€è¦ç»´æŠ¤**ä¸Šä¸€ä¸ªç»“ç‚¹**çš„å€¼ã€‚

åˆ¤æ–­ä¸€ä¸ªæ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘ï¼ˆä¸è¦ä¸­åºéå†çœ‹æ˜¯å¦é€’å¢é‚£ç§æ–¹æ³•ï¼‰

###### å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šæ±‚å®Œå…¨äºŒå‰æ ‘ç»“ç‚¹ä¸ªæ•°ï¼Œè¦æ±‚å°äº O(n) æ—¶é—´å¤æ‚åº¦ã€‚

é¦–å…ˆç»Ÿè®¡äºŒå‰æ ‘å·¦å³å­æ ‘çš„**å±‚æ•°**ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- **left == right**ã€‚è¿™è¯´æ˜ï¼Œå·¦å­æ ‘ä¸€å®šæ˜¯æ»¡äºŒå‰æ ‘ï¼Œå› ä¸ºèŠ‚ç‚¹å·²ç»å¡«å……åˆ°å³å­æ ‘äº†ï¼Œå·¦å­æ ‘å¿…å®šå·²ç»å¡«æ»¡äº†ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥å¾—åˆ°å·¦å­æ ‘çš„èŠ‚ç‚¹æ€»æ•°ä¸º 2^left - 1ï¼ŒåŠ ä¸Šå½“å‰çš„ root èŠ‚ç‚¹å°±æ˜¯ 2^leftã€‚å†å¯¹å³å­æ ‘è¿›è¡Œé€’å½’ç»Ÿè®¡ã€‚            
- **left != right**ã€‚è¯´æ˜æ­¤æ—¶**æœ€åä¸€å±‚ä¸æ»¡**ï¼Œä½†å€’æ•°ç¬¬äºŒå±‚å·²ç»æ»¡äº†ï¼Œå¯ä»¥ç›´æ¥å¾—åˆ°**å³å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°**ã€‚åŒç†ï¼Œå³å­æ ‘èŠ‚ç‚¹ +root èŠ‚ç‚¹ï¼Œæ€»æ•°ä¸º **2^right**ã€‚å†å¯¹å·¦å­æ ‘è¿›è¡Œé€’å½’æŸ¥æ‰¾ã€‚

æ—¶é—´å¤æ‚åº¦ä¸º O(logN*logN) < O(n)ã€‚

```java
public int countNodes(TreeNode root) {
    if (root == null) return 0;
    int leftLevel = countLevel(root.left);
    int rightLevel = countLevel(root.right);
    if (leftLevel == rightLevel) {
        // ç§»ä½è¿ç®—ï¼Œ1å‘å·¦ç§»åŠ¨leftæ¬¡ï¼Œç›¸å½“äº1*2^n
        return countNodes(root.right) + (1 << leftLevel);
    } else {
        return countNodes(root.left) + (1 << rightLevel);
    }
}
// è®¡ç®—å±‚æ•°
private int countLevel(TreeNode root) {
    int level = 0;
    while (root != null) {
        level++;
        root = root.left;
    }
    return level;
}
```

###### æ ¹ç»“ç‚¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

LeetCode129

###### äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

è·¯å¾„è¢«å®šä¹‰ä¸ºä¸€æ¡ä»æ ‘ä¸­ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼Œè¾¾åˆ°ä»»æ„èŠ‚ç‚¹çš„åºåˆ—ã€‚è¯¥è·¯å¾„è‡³å°‘åŒ…å«ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚

###### ä¸¤ä¸ªèŠ‚ç‚¹æœ€è¿‘å…¬å…±ç¥–å…ˆ(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**äºŒå‰æŸ¥æ‰¾æ ‘**ï¼šä¸¤ä¸ªèŠ‚ç‚¹ p, q çš„å…¬å…±ç¥–å…ˆ root æ»¡è¶³ root.val >= p.val && root.val <= q.valã€‚

<img src="assets/1563522985829.png" alt="1563522985829" style="zoom:50%;" />

```java
public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
    // Base case
    if (root == null) return null;
    // ä¸¤ä¸ªå€¼éƒ½å°äºå½“å‰èŠ‚ç‚¹ ç»§ç»­å¾€å·¦è¾¹æ‰¾
    if (root.val > p.val && root.val > q.val) {
        return lowestCommonAncestor(root.left, p, q);
    }
    // ä¸¤ä¸ªå€¼éƒ½å¤§äºå½“èŠ‚ç‚¹å€¼ ç»§ç»­å¾€å³è¾¹æ‰¾
    if (root.val < p.val && root.val < q.val) {
        return lowestCommonAncestor(root.right, p, q);
    }
    // ä¸€ä¸ªå°ä¸€ä¸ªå¤§åˆ™ç®—æ‰¾åˆ°äº†
    return root;
}
```

**[æ™®é€šäºŒå‰æ ‘](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/description/)**ï¼šåœ¨**å·¦å³å­æ ‘ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ p æˆ–è€… q**ï¼Œå¦‚æœ p å’Œ q åˆ†åˆ«åœ¨ä¸¤ä¸ªå­æ ‘ä¸­ï¼Œé‚£ä¹ˆå°±è¯´æ˜**æ ¹èŠ‚ç‚¹å°±æ˜¯æœ€ä½å…¬å…±ç¥–å…ˆ**ã€‚æ•´ä½“å°±æ˜¯æ ‘å½¢ dp çš„å¥—è·¯è§£æ³•ã€‚

```java
public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
    // Base case:è¿”å›nullæˆ–è€…è¿”å›è‡ªå·±
    if(root == null || root == p || root == q) {
        return root;
    }
    // åˆ†åˆ«æ‰¾å·¦å³çš„ä¿¡æ¯
    TreeNode left = lowestCommonAncestor(root.left, p, q);
    TreeNode right = lowestCommonAncestor(root.right, p, q);
    // æ„é€ è‡ªå·±çš„è¿”å›ä¿¡æ¯
    if(left == null) return right;
    if(right == null) return left;
    return root;
}
```

###### è·¯å¾„æ€»å’Œ

[é¢˜ç›®](https://leetcode-cn.com/problems/path-sum/)ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œä¸€ä¸ªç›®æ ‡å’Œï¼Œåˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨**æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹**çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œã€‚

```java
private boolean isFind = false;

public boolean hasPathSum(TreeNode root, int sum) {
    helper(root, sum);
    return isFind;
}

// æ•´ä½“ä¸­åºé€’å½’æ¨¡æ¿
private void helper(TreeNode root, int sum) {
    // Base case
    if(root == null) return;
    // å¦‚æœå½“å‰çš„sumç­‰äºç»“ç‚¹å€¼ä¸”å½“å‰æ­£å¥½ä¸ºæ ¹ç»“ç‚¹åˆ™æ‰¾åˆ°
    if(sum == root.val && (root.left == null && root.right == null)) {
        isFind = true;
    }
    // æ›´æ–°sumå€¼
    sum = sum - root.val;
    helper(root.left, sum);
    helper(root.right, sum);
}
```

è¿­ä»£æ³•ï¼š

```java
public boolean hasPathSum2(TreeNode root, int sum) {
    if(root == null) return false;
    Stack<TreeNode> nodeStack = new Stack<>();
    Stack<Integer> numStack = new Stack<>();

    nodeStack.push(root);
    numStack.push(sum - root.val);

    while(!nodeStack.isEmpty()){
        TreeNode node = nodeStack.pop();
        Integer value = numStack.pop();

        if(node.left == null && node.right == null && value == 0) return true;

        if(node.left != null){
            nodeStack.push(node.left);
            numStack.push(value - node.left.val);
        }
        if(node.right != null){
            nodeStack.push(node.right);
            numStack.push(value - node.right.val);
        }
    }
    return false;
}
```

[è¿›é˜¶](https://leetcode-cn.com/problems/path-sum-ii/)ï¼šæ‰¾å‡ºä¸Šé¢ç¬¦åˆæ¡ä»¶çš„å…¨éƒ¨è·¯å¾„ã€‚

æ³¨æ„è¿™é‡Œç”±äºä¼ å…¥çš„æ˜¯ **tempList ä½œä¸ºå‚æ•°ï¼Œä¸æ˜¯åƒ åŸºæœ¬ç±»å‹æˆ–è€… String è¿™ç§ï¼Œæ‰€ä»¥éœ€è¦åœ¨æœ€åè¿›è¡Œ==å›æº¯==**ã€‚

```java
List<List<Integer>> resList = new ArrayList<>();

public List<List<Integer>> pathSum(TreeNode root, int sum) {
    List<List<Integer>> ans = new ArrayList<>();
    ArrayList<Integer> tmp = new ArrayList<>();
    // é€’å½’æ±‚è§£è·¯å¾„æ€»å’Œ
    path(root, sum, tmp);
    return ans;
}

private void path(TreeNode root, int sum, ArrayList<Integer> tempList) {
    if (root == null) return;
    tempList.add(root.val);
    // å¤åˆæ¡ä»¶åŠ å…¥ç»“æœ
    if (root.left == null && root.right == null && sum == root.val) {
        resList.add(new ArrayList<>(tempList));
    }
    path(root.left, sum - root.val, tempList);
    path(root.right, sum - root.val, tempList);
    // è¿™é‡Œåˆ©ç”¨äº†å›æº¯çš„æ€æƒ³:æ¯æ¬¡å›é€€ä¸Šä¸€ä¸ªèŠ‚ç‚¹å†å¯»æ‰¾å¦ä¸€æ¡è¾¹çš„èŠ‚ç‚¹ä½œä¸ºæ–°è·¯å¾„
    tempList.remove(tempList.size() - 1);
}
```



###### äºŒå‰æ ‘çš„æœ€å¤§è·¯å¾„å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**[é¢˜ç›®](https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/)**ï¼ˆå›°éš¾ï¼‰ï¼šè·¯å¾„è¢«å®šä¹‰ä¸ºä¸€æ¡ä»æ ‘ä¸­**ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼Œè¾¾åˆ°ä»»æ„èŠ‚ç‚¹çš„åºåˆ—**ã€‚è¯¥è·¯å¾„**è‡³å°‘åŒ…å«ä¸€ä¸ª**èŠ‚ç‚¹ï¼Œä¸”**ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹**ã€‚

```java
int maxSum = Integer.MIN_VALUE;
public int maxPathSum(TreeNode root) {
    if (root == null) return 0;
    dfs(root);
    return maxSum;
}

public int dfs(TreeNode root) {
    if (root == null) return 0;
    // æ±‚å·¦å³çš„æœ€å¤§è·¯å¾„å’Œ
    int leftGain = Math.max(0, dfs(root.left));
    int rightGain = Math.max(0, dfs(root.right));

    maxSum = Math.max(maxSum, root.val + leftGain + rightGain);
    return root.val + Math.max(leftGain, rightGain);
}
```

###### é‡å»ºäºŒå‰æ ‘

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šæ ¹æ®**å‰åºéå†**å’Œ**ä¸­åºéå†**ç»“æœé‡å»ºäºŒå‰æ ‘ã€‚

[é¢˜è§£](https://leetcode-cn.com/problems/zhong-jian-er-cha-shu-lcof/solution/er-cha-shu-de-qian-xu-bian-li-fen-zhi-si-xiang-by-/)ï¼š

<img src="assets/image-20200814214402561.png" alt="image-20200814214402561" style="zoom:35%;" />

```java
// ç¼“å­˜ä¸­åºéå†æ•°ç»„æ¯ä¸ªå€¼å¯¹åº”çš„ç´¢å¼•
HashMap<Integer, Integer> dict = new HashMap<>();

int[] po;

public TreeNode buildTree(int[] preOrder, int[] inOrder) {
    // å‰åºéå†æ•°ç»„
    po = preOrder;
    // å°†ä¸­åºéå†çš„ç»“æœæ”¾å…¥Mapå¹¶è®°å½•å…¶ç´¢å¼•ä½ç½®
    for(int i = 0; i < inOrder.length; i++) {
        dict.put(inOrder[i], i);
    }
    // ç¬¬ä¸€ä¸ªæ ¹ç»“ç‚¹å°±æ˜¯å‰åºæ•°ç»„çš„0ä½ç½®
    return process(0, 0, inOrder.length - 1);
}

TreeNode process(int preRoot, int inLeft, int inRight) {
    // Base case
    if(inLeft > inRight) return null;
    // æ„é€ æ ¹ç»“ç‚¹ï¼šå°±æ˜¯å‰åºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
    TreeNode root = new TreeNode(po[preRoot]);
    // ä»å­—å…¸ä¸­æ‰¾åˆ°æ ¹ç»“ç‚¹çš„ç´¢å¼•ä½ç½®
    int rootIndex = dict.get(po[preRoot]);
    // é€’å½’æ„é€ å·¦å³å­æ ‘
    root.left = process(preRoot + 1, inLeft, rootIndex - 1);
    root.right = process(preRoot + rootIndex - inLeft + 1, rootIndex + 1, inRight);
    return root;
}
```

###### äºŒå‰æœç´¢æ ‘è½¬é“¾è¡¨(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼ã€æ‹¼å¤šå¤š

å­—èŠ‚ï¼šè¦æ±‚ç©ºé—´å¤æ‚åº¦O(1)ï¼Œè®²è®²æ—¶é—´å¤æ‚åº¦

çŒ¿è¾…å¯¼ï¼šäºŒå‰æœç´¢æ ‘è½¬åŒå‘é“¾è¡¨

###### äºŒå‰æ ‘æœ€å¤§ç›´å¾„

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### äºŒå‰æ ‘çš„æœ€é•¿è·¯å¾„

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æœç´¢äºŒå‰æ ‘ä»»æ„ä¸¤èŠ‚ç‚¹å·®å€¼æœ€å°å€¼

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼(2)

 **å…¬å¸**ï¼šå­—èŠ‚

###### äºŒå‰æ ‘æœ€å¤§æ·±åº¦

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼(2)

è¦æ±‚é€’å½’+éé€’å½’

###### ä¸­åºéå†å’Œååºéå†è¿˜åŸäºŒå‰æ ‘

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

###### äºŒå‰æ ‘å‰ªæ

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

###### äºŒå‰æ ‘ä¸­æ‰€æœ‰è·ç¦»ä¸ºKçš„ç»“ç‚¹

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

LeetCode863

###### åˆ¤æ–­æ»¡äºŒå‰æ ‘

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

##### 5. åŠ¨æ€è§„åˆ’

###### ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(4)

**ä¸€æ¬¡ä¹°å–ã€ç®€å•ã€‘**ï¼šæ™®é€šéå†ç‰ˆæœ¬ã€‚

```java
public int maxProfit(int[] price) {
    if(price == null || price.length == 0) return 0;
    int soFarMin = price[0];
    int res = 0;
    for(int i = 1; i < price.length; i++) {
        res = Math.max(res, price[i] - soFarMin);
        soFarMin = Math.min(soFarMin, price[i]);
    }
    return res;
}
```

**ä¸€æ¬¡ä¹°å–ã€ç®€å•ã€‘**ï¼šåŠ¨æ€è§„åˆ’ç‰ˆæœ¬ã€‚

```java
public int maxProfit(int[] price) {
    int n = price.length;
    int ans = 0;
    int[][] dp = new int[n][2];
    dp[0][0] = 0;
    dp[0][1] = Integer.MIN_VALUE;
    for(int i = 1;i < n; i++){
        dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + price[i]);
        dp[i][1] = Math.max(dp[i - 1][1], - price[i]);
    }
    return dp[i][0];
}
```

**ä¸é™ä¹°å–æ¬¡æ•°ã€ç®€å•ã€‘**ï¼šéå†æ•´ä¸ªè‚¡ç¥¨äº¤æ˜“æ—¥ä»·æ ¼åˆ—è¡¨ priceï¼Œç­–ç•¥æ˜¯**æ‰€æœ‰ä¸Šæ¶¨äº¤æ˜“æ—¥éƒ½ä¹°å–**ï¼ˆèµšåˆ°æ‰€æœ‰åˆ©æ¶¦ï¼‰ï¼Œæ‰€æœ‰**ä¸‹é™äº¤æ˜“æ—¥éƒ½ä¸ä¹°å–**ï¼ˆæ°¸ä¸äºé’±ï¼‰ã€‚

æ™®é€šæ–¹æ³•ï¼š

```java
public int maxProfit(int[] prices) {
    int res = 0;
    for (int i = 1; i < prices.length; i++) {
        // è¯´æ˜å½“å¤©ç›¸æ¯”å‰ä¸€æ¡æ¶¨ä»·äº†ï¼Œå°±å–å‡º
        int tmp = prices[i] - prices[i - 1];
        if (tmp > 0) {
            res = res + tmp;
        }
    }
    return profit;
}
```

åŠ¨æ€è§„åˆ’ï¼š

```java
// ä¸é™åˆ¶æ¬¡æ•°ï¼š
dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
```

**å«æœ‰ä¸€å¤©å†·å†»æœŸã€ä¸­ç­‰ã€‘**ï¼š

è½¬ç§»æ–¹ç¨‹ï¼š

```java
dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
dp[i][1] = max(dp[i - 1][1], dp[i - 2][0] - prices[i]);
```

è§£é‡Šï¼šç¬¬ i å¤©é€‰æ‹© buy çš„æ—¶å€™ï¼Œ**è¦ä» i - 2 çš„çŠ¶æ€è½¬ç§»ï¼Œè€Œä¸æ˜¯ i - 1** ã€‚

```java
public int maxProfit(int[] prices) {
    int len = prices.length;
    if (len < 2) return 0;
	
    int[][] dp = new int[len][3];

    // åˆå§‹åŒ–
    dp[0][0] = 0;
    dp[0][1] = -prices[0];
    dp[0][2] = 0;

    for (int i = 1; i < len; i++) {
        dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
        dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][2] - prices[i]);
        dp[i][2] = dp[i - 1][0];
    }
    return Math.max(dp[len - 1][0], dp[len - 1][2]);
}
```

**æœ‰äº¤æ˜“è´¹ã€ä¸­ç­‰ã€‘**ï¼šè½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š

```java
dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i] - fee);
```

è§£é‡Šï¼šç›¸å½“äº**ä¹°å…¥è‚¡ç¥¨çš„ä»·æ ¼å‡é«˜**äº†ã€‚åœ¨ç¬¬ä¸€ä¸ªå¼å­é‡Œå‡ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œç›¸å½“äºå–å‡ºè‚¡ç¥¨çš„ä»·æ ¼å‡å°äº†ã€‚

**æœ€å¤šä¸¤æ¬¡ä¹°å–ã€å›°éš¾ã€‘**ï¼šåŸå§‹çš„åŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼Œæ²¡æœ‰å¯åŒ–ç®€çš„åœ°æ–¹ã€‚

```java
dp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i]);
dp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i]);
```

###### å‰ªç»³å­

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜è§£ï¼š**æ¯æ¬¡å‰ªä¸€åˆ€ä¹‹åï¼Œå‰©ä½™éƒ¨åˆ†è¿˜å¯ä»¥ç»§ç»­å‰ªï¼Œé‚£ä¹ˆå°±æ˜¯**è®¡ç®—å‡ºæ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œå–æœ€å¤§å€¼**ã€‚è‡ªåº•å‘ä¸Šæ”¹å–„é€’å½’ä»ä¸Šè€Œä¸‹é‡å¤è®¡ç®—çš„é—®é¢˜ã€‚

```java
public int cutRope(int target) {
    if(target == 2) return 1;
    if(target == 3) return 2;
    if(target == 4) return 4;
    int[] dp = new int[target + 1];

    // ä¸‹é¢3è¡Œæ˜¯n>=4çš„æƒ…å†µï¼Œè·Ÿn<=3ä¸åŒï¼Œ4å¯ä»¥åˆ†å¾ˆå¤šæ®µï¼Œæ¯”å¦‚åˆ†æˆ1ã€3ï¼Œ
    // è¿™é‡Œ3å¯ä»¥ä¸éœ€è¦å†åˆ†äº†ï¼Œå› ä¸º3åˆ†æ®µæœ€å¤§æ‰2ï¼Œä¸åˆ†å°±æ˜¯3ã€‚è®°å½•æœ€å¤§çš„ã€‚
    dp[1] = 1;
    dp[2] = 2;
    dp[3] = 3;
    // ç”¨æ¥è®°å½•æœ€å¤§å€¼
    int res = 0;
    for(int i = 4; i <= target; i++){
        for(int j = 1; j <= i / 2; j++){
            res = Math.max(res, dp[j] * dp[i - j]);
        }
        dp[i] = res;
    }
    return dp[target];
}
```

è´ªå¿ƒç®—æ³•ï¼šå¯ä»¥è¯æ˜ï¼Œæ¯æ®µé•¿åº¦ä¸º3æ˜¯æœ€å¤§ä¹˜ç§¯ã€‚

###### æŸ æª¬æ°´æ‰¾é›¶

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ï¼ˆLeetCode860ï¼‰

###### é›¶é’±å…‘æ¢

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šå·²çŸ¥ k ç§é¢å€¼çš„ç¡¬å¸ï¼Œé¢å€¼åˆ†åˆ«ä¸º c1, c2 ... ckï¼Œæ¯ç§ç¡¬å¸çš„**æ•°é‡æ— é™**ï¼Œå†ç»™ä¸€ä¸ªæ€»é‡‘é¢ amountï¼Œé—®**æœ€å°‘éœ€è¦å‡ æšç¡¬å¸**å‡‘å‡ºè¿™ä¸ªé‡‘é¢ï¼Œå¦‚æœä¸å¯èƒ½å‡‘å‡ºï¼Œç®—æ³•è¿”å› -1 ã€‚æ¯”å¦‚è¯´ k = 3ï¼Œé¢å€¼åˆ†åˆ«ä¸º 1ï¼Œ2ï¼Œ5ï¼Œæ€»é‡‘é¢ amount = 11ã€‚é‚£ä¹ˆæœ€å°‘éœ€è¦ 3 æšç¡¬å¸å‡‘å‡ºï¼Œå³ 11 = 5 + 5 + 1ã€‚

**é¢˜è§£**ï¼šç¬¦åˆæœ€ä¼˜å­ç»“æ„ã€‚å› ä¸ºç¡¬å¸çš„æ•°é‡æ˜¯**æ²¡æœ‰é™åˆ¶**çš„ï¼Œå­é—®é¢˜ä¹‹é—´æ²¡æœ‰ç›¸äº’é™åˆ¶ï¼Œæ˜¯äº’ç›¸ç‹¬ç«‹çš„ã€‚å…ˆç¡®å®šã€Œ**çŠ¶æ€**ã€ï¼Œä¹Ÿå°±æ˜¯åŸé—®é¢˜å’Œå­é—®é¢˜ä¸­**å˜åŒ–çš„å˜é‡**ã€‚ç”±äºç¡¬å¸æ•°é‡æ— é™ï¼Œæ‰€ä»¥**å”¯ä¸€çš„çŠ¶æ€å°±æ˜¯ç›®æ ‡é‡‘é¢ amount**ã€‚ç„¶åç¡®å®š dp å‡½æ•°çš„å®šä¹‰ï¼šå½“å‰çš„**ç›®æ ‡é‡‘é¢æ˜¯ n**ï¼Œè‡³å°‘éœ€è¦ **dp(n) ä¸ªç¡¬å¸**å‡‘å‡ºè¯¥é‡‘é¢ã€‚

ç„¶åç¡®å®šã€Œé€‰æ‹©ã€å¹¶æ‹©ä¼˜ï¼Œä¹Ÿå°±æ˜¯å¯¹äºæ¯ä¸ªçŠ¶æ€ï¼Œå¯ä»¥åšå‡ºä»€ä¹ˆé€‰æ‹©æ”¹å˜å½“å‰çŠ¶æ€ã€‚å…·ä½“åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ— è®ºå½“çš„ç›®æ ‡é‡‘é¢æ˜¯å¤šå°‘ï¼Œé€‰æ‹©å°±æ˜¯ä»é¢é¢åˆ—è¡¨ coins ä¸­é€‰æ‹©ä¸€ä¸ªç¡¬å¸ï¼Œç„¶å**ç›®æ ‡é‡‘é¢å°±ä¼šå‡å°‘**ï¼š

###### æ¢é’±çš„æœ€å¤§æ–¹æ³•æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æ‹¬å·ç”Ÿæˆ(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

**é¢˜ç›®**ï¼šæ•°å­— *n* ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” **æœ‰æ•ˆçš„** æ‹¬å·ç»„åˆã€‚

```java
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š[
       "((()))",
       "(()())",
       "(())()",
       "()(())",
       "()()()"
     ]
```

å›æº¯æ³•ã€‚

```java
List<String> resList = new ArrayList<>();

public List<String> generateParenthesis(int n) {
    if (n == 0) return resList;
    // æ‰§è¡Œæ·±åº¦ä¼˜å…ˆéå†ï¼Œæœç´¢å¯èƒ½çš„ç»“æœ
    dfs("", n, n);
    return resList;
}

/**
 * @param tempStr å½“å‰é€’å½’å¾—åˆ°çš„ç»“æœ
 * @param left   å·¦æ‹¬å·è¿˜æœ‰å‡ ä¸ªå¯ä»¥ä½¿ç”¨
 * @param right  å³æ‹¬å·è¿˜æœ‰å‡ ä¸ªå¯ä»¥ä½¿ç”¨
 */
private void dfs(String tempStr, int left, int right) {
    // å› ä¸ºæ¯ä¸€æ¬¡å°è¯•ï¼Œéƒ½ä½¿ç”¨æ–°çš„å­—ç¬¦ä¸²å˜é‡ï¼Œæ‰€ä»¥æ— éœ€å›æº¯
    // åœ¨é€’å½’ç»ˆæ­¢çš„æ—¶å€™ï¼Œç›´æ¥æŠŠå®ƒæ·»åŠ åˆ°ç»“æœé›†å³å¯
    if (left == 0 && right == 0) {
        resList.add(tempStr);
        return;
    }

    // å‰ªæï¼ˆå·¦æ‹¬å·å¯ä»¥ä½¿ç”¨çš„ä¸ªæ•°ä¸¥æ ¼å¤§äºå³æ‹¬å·å¯ä»¥ä½¿ç”¨çš„ä¸ªæ•°ï¼Œæ‰å‰ªæï¼Œæ³¨æ„è¿™ä¸ªç»†èŠ‚ï¼‰
    if (left > right) return;

    if (left > 0) dfs(tempStr + "(", left - 1, right);
    if (right > 0) dfs(tempStr + ")", left, right - 1);
}
```

##### 6. å­—ç¬¦ä¸²

###### ç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯(H)

ğŸ“˜ å…¬å¸ï¼šå­—èŠ‚(2)

**é¢˜ç›®**ï¼šç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ã€‚**ä»… O(1) ç©ºé—´**ï¼Œæ‰€ä»¥éœ€è¦ä¼ å…¥**ä¸€ä¸ª char æ•°ç»„**ã€‚

```java
Input: "I am a student."   Output: "student. a am I"
```

```java
public String reverseWords(String str) {
    int len = str.length();
    char[] chars = str.toCharArray();
    int i = 0, j = 0;
    while (j <= len) {
        if (j == len || chars[j] == ' ') {
            reverse(chars, i, j - 1);
            i = j + 1;
        }
        j++;
    }
    reverse(chars, 0, len - 1);
    return new String(chars);
}

// ä»…ä»…åè½¬ä¸€ä¸ªå•è¯
private void reverse(char[] c, int i, int j) {
    while (i < j) swap(c, i++, j--);
}

private void swap(char[] nums, int i, int j) {
    char temp = nums[i];
    nums[i] = nums[j];
    nums[j] = temp;
}
```

å¦‚æœä¼ å…¥çš„æ˜¯ å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åˆ©ç”¨ StringBuilder å¿«é€Ÿè§£å†³ã€‚

```java
public String reverseWords2(String str) {
    String emptyStr = " ";
    String[] splits = str.trim().split(emptyStr);
    StringBuilder sb = new StringBuilder();
    //ä¸ºäº†åé¢å¤„ç†æ–¹æ³•ç»Ÿä¸€ï¼Œå…ˆæ‹¼æ¥ä¸Šæœ€åä¸€ä¸ªå•è¯
    sb.append(splits[splits.length - 1]);
    for (int i = splits.length - 2; i >= 0; i--) {
        if (!splits[i].isEmpty()) {
            sb.append(emptyStr);
            sb.append(splits[i]);
        }
    }
    return sb.toString();
}
```

###### æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**é¢˜ç›®**ï¼šè¯·ä»å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºä¸€ä¸ª**æœ€é•¿çš„ä¸åŒ…å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²**ï¼Œè®¡ç®—è¯¥æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚

**å“ˆå¸Œè¡¨ç»Ÿè®¡**ï¼š ä½¿ç”¨ä¸€ä¸ª Map è®°å½•**å·²ç»éå†è¿‡çš„å…ƒç´ çš„ç´¢å¼•**ï¼Œç„¶åæ»šåŠ¨æ›´æ–°ï¼ŒåŒæ—¶**ä» map ä¸­è®°å½•å½“å‰å…ƒç´ ä¹‹å‰å‡ºç°çš„ä½ç½®**ã€‚é¢è¯•ç”¨è¿™ä¸ªå°±è¡Œï¼Œè¿™ä¸ªæ—¶é—´ç©ºé—´éƒ½ä¸é”™ã€‚[åŠ¨ç”»å›¾è§£](https://leetcode-cn.com/problems/zui-chang-bu-han-zhong-fu-zi-fu-de-zi-zi-fu-chuan-lcof/solution/mian-shi-ti-48-zui-chang-bu-han-zhong-fu-zi-fu-d-9/)ã€‚

```java
public int lengthOfLongestSubstring(String str) {
    // è®°å½•å­—ç¬¦ä½ç½®çš„map,ç©ºé—´ä¸ºO(1)
    Map<Character, Integer> dic = new HashMap<>();
    // è®°å½•å½“å‰å…ƒç´ ä¹‹å‰å‡ºç°è¿‡çš„ä½ç½®
    int lastShowIndex = -1;
    int res = 0;
    // éå†å­—ç¬¦ä¸²
    for (int i = 0; i < str.length(); i++) {
        // å¦‚æœå­—å…¸ä¸­å·²ç»åŒ…å«äº†è¿™ä¸ªå­—ç¬¦,è¯´æ˜ä¹‹å‰å‡ºç°è¿‡
        if (dic.containsKey(str.charAt(i))) {
            // è®°å½•å½“å‰å…ƒç´ ä¹‹å‰å‡ºç°è¿‡çš„ä½ç½®
            lastShowIndex = Math.max(lastShowIndex, dic.get(str.charAt(i)));
        }
        // ä¸æ–­æ›´æ–°å“ˆå¸Œè¡¨è®°å½•
        dic.put(str.charAt(i), i);
        // æ›´æ–°ç»“æœ,å¦‚æœiæ²¡æœ‰æ›´æ–°,é‚£ä¹ˆtemp
        res = Math.max(res, i - lastShowIndex);
    }
    return res;
}
```

###### ä¸­æ–‡æ•°å­—è½¬é˜¿æ‹‰ä¼¯æ•°å­—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šä¸­æ–‡æ•°å­—æ ¼å¼ï¼šä¸€ä¸‡ä¸‰åƒäº”ç™¾å››åä¸€ã€‚é˜¿æ‹‰ä¼¯æ•°å­—æ ¼å¼ï¼š13541ã€‚

ä¸­æ–‡æ•°å­—ä¸­è¦åˆ†**å•ä½å’Œæ•°å­—**åˆ†åˆ«å¤„ç†ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«ä¿å­˜ä¸­æ–‡æ•°å­—å’Œä¸­æ–‡å•ä½ï¼Œæ¯æ¬¡å¾ªç¯æ‰«æç»™çš„ä¸­æ–‡æ•°å­—ï¼Œå»åŒ¹é…å¯¹åº”çš„æ•°å­—ã€‚ä¸­æ–‡æ•°å­—æ•°å­—å¯ä»¥ç”¨æ•°ç»„ä¸‹æ ‡å¯¹åº”æ•°å­—ã€‚

```java
static char[] cnArr = {'é›¶','ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹'};
static char[] chArr = {'å', 'ç™¾', 'åƒ', 'ä¸‡', 'äº¿'};
public static int chineseNumToArabicNum(String chineseNum) {
    int result = 0;
    // å­˜æ”¾ä¸€ä¸ªå•ä½çš„æ•°å­—å¦‚ï¼šåä¸‡
    int temp = 1;
    // åˆ¤æ–­æ˜¯å¦æœ‰è¡¨ç¤ºå•ä½çš„æ–‡å­—
    int count = 0;
    for (int i = 0; i < chineseNum.length(); i++) {
        boolean b = true;// åˆ¤æ–­æ˜¯å¦æ˜¯å•ä½
        char c = chineseNum.charAt(i);
        for (int j = 0; j < cnArr.length; j++) {  // éå•ä½ï¼Œå³æ•°å­—
            if (c == cnArr[j]) {
                if (count != 0) { // æ·»åŠ ä¸‹ä¸€ä¸ªå•ä½ä¹‹å‰ï¼Œå…ˆæŠŠä¸Šä¸€ä¸ªå•ä½å€¼æ·»åŠ åˆ°ç»“æœä¸­
                    result += temp;
                    temp = 1;
                    count = 0;
                }
                // ä¸‹æ ‡+1ï¼Œå°±æ˜¯å¯¹åº”çš„å€¼
                temp = j;
                b = false;
                break;
            }
        }
        if (b) {  // å•ä½{'å','ç™¾','åƒ','ä¸‡','äº¿'}
            for (int j = 0; j < chArr.length; j++) {
                if (c == chArr[j]) {
                    switch (j) {
                        case 0:
                            temp *= 10;
                            break;
                        case 1:
                            temp *= 100;
                            break;
                        case 2:
                            temp *= 1000;
                            break;
                        case 3:
                            temp *= 10000;
                            break;
                        case 4:
                            temp *= 100000000;
                            break;
                        default:
                            break;
                    }
                    count++;
                }
            }
        }
        if (i == chineseNum.length() - 1) {  // éå†åˆ°æœ€åä¸€ä¸ªå­—ç¬¦
            result += temp;
        }
    }
    return result;
}
```

###### ç‰ˆæœ¬æ•°å­—æ¯”è¾ƒ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

æ¯”å¦‚"1.10.0"ç‰ˆæœ¬æ¯”"1.8.1"ç‰ˆæœ¬æ–°ï¼Œä¸å…è®¸ä½¿ç”¨splitç­‰å‡½æ•°

###### æ•°å­—å­—ç¬¦ä¸²çš„ç¬¬Nä¸ªå­—ç¬¦

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ç®—æ³•é¢˜ï¼Œä¸€ä¸ªå½¢å¦‚ 123456789101112â€¦â€¦çš„å­—ç¬¦ä¸²ï¼Œè¾“å…¥ä¸€ä¸ªnï¼ˆå¾ˆå¤§å¾ˆå¤§ï¼‰ï¼Œè¾“å‡ºå­—ç¬¦ä¸²ç¬¬ n ä¸ªå­—ç¬¦

###### å­ä¸²å¯»æ‰¾

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ç»™å®š m ä¸ªä¸é‡å¤çš„å­—ç¬¦ [a, b, c, d]ï¼Œä»¥åŠä¸€ä¸ªé•¿åº¦ä¸º n çš„å­—ç¬¦ä¸² tbcacbdataï¼Œé—®èƒ½å¦åœ¨è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æ‰¾åˆ°ä¸€ä¸ªé•¿åº¦ä¸º m çš„è¿ç»­å­ä¸²ï¼Œä½¿å¾—è¿™ä¸ªå­ä¸²åˆšå¥½ç”±ä¸Šé¢ m ä¸ªå­—ç¬¦ç»„æˆï¼Œé¡ºåºæ— æ‰€è°“ï¼Œè¿”å›ä»»æ„æ»¡è¶³æ¡ä»¶çš„ä¸€ä¸ªå­ä¸²çš„èµ·å§‹ä½ç½®ï¼Œæœªæ‰¾åˆ°è¿”å›-1ã€‚æ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œacbdï¼Œ3ã€‚

###### æœ€é•¿å›æ–‡å­ä¸²(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼(2)

**é¢˜ç›®**ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000ã€‚

###### å›æ–‡å­ä¸²ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æœ€é•¿å…¬å…±å­ä¸²

ğŸ“˜ **å…¬å¸**ï¼šæ‹¼çˆ¹çˆ¹

###### ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ç¼–è¾‘è·ç¦»

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

ç®—æ³•ï¼šç»™å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚æœ€çŸ­ç¼–è¾‘è·ç¦»ï¼ˆLeetcodeåŸé¢˜ï¼Œè¦æ˜¯ä¹‹å‰æ²¡åšè¿‡æˆ‘ä¼°è®¡å½“åœºæˆ‘è‚¯å®šä¸ä¼šï¼‰

ç®—æ³•ï¼šä¸Šé¢åœ¨æ±‚å‡ºæœ€çŸ­ç¼–è¾‘è·ç¦»çš„åŒæ—¶ï¼Œç»™å‡ºç¼–è¾‘çš„è¿‡ç¨‹

###### åŸŸååè½¬

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

([www.toutiao.com-](https://www.nowcoder.com/discuss/www.toutiao.com-)>com.toutiao.www)

###### æ­£åˆ™åŒ¹é…

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### å­—ç¬¦ä¸²è§£ç 

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

https://leetcode-cn.com/problems/decode-string/

###### æ‰¾å‡ºè‡³å¤šåŒ…å«Kä¸ªå­—ç¬¦çš„æœ€é•¿å­ä¸²T

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾å‡º è‡³å¤š åŒ…å« k ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² T ï¼Œè¾“å‡ºå­ä¸² T é•¿åº¦ã€‚

ç”¨çš„æ»‘åŠ¨çª—å£è§£å†³ï¼Œå·²ç»æ˜¯**O(N)**

###### å•è¯æ‹†åˆ†

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

https://leetcode-cn.com/problems/word-break/

###### å¤åŸIPåœ°å€

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼ã€å­—èŠ‚

Lc93

ipåœ°å€å­—ç¬¦ä¸²è½¬æ¢æˆ32ä½æ•´æ•°

###### ç›¸ä¼¼å­—ç¬¦ä¸²

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç›¸ä¼¼å­—ç¬¦ä¸²ï¼Œç›¸ä¼¼çš„å«ä¹‰æ˜¯åªå…è®¸äº¤æ¢ä¸€æ¬¡å­—ç¬¦ä¸²çš„ä¸¤ä¸ªä½ç½®ï¼Œä½¿å¾—å’Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ˜¯ç›¸ä¼¼çš„ã€‚

é¢è¯•å®˜ç»™çš„æµ‹è¯•ç”¨ä¾‹ï¼šç›¸ä¼¼å­—ç¬¦ä¸²ï¼š
ab, ba => true
abax, abax => true
abc, abc => false
aac, abc => false

##### 7. æ•°å­¦

###### æœ€å¤§å…¬å› æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æ±‚å¹³æ–¹æ ¹

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€çŒ¿è¾…å¯¼

å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ±‚å¹³æ–¹æ ¹ï¼Œå‡½æ•°å‚æ•°ä¸ºç›®æ ‡æ•°å­—å’Œç²¾åº¦ï¼Œæµ‹è¯•æ¡ˆä¾‹ fn(4.1,0.001) fn(501.1,0.001) fn(0.045,0.001)ã€‚

**äºŒåˆ†æ³•**ï¼še æ˜¯ç²¾åº¦ã€‚

```java
public static float sqrt(float num, float e) {
    float x = 0;
    if (num > 0 && e > 0) {
        float low = 0;
        float high = num;
        while (low < high) {
            float mid = (low + high) / 2;
            if (mid * mid < num - e) {
                low = mid;
            } else if (mid * mid > num + e) {
                high = mid;
            } else {
                x = mid;
                break;
            }
        }
    }
    return x;
}
```

**ç‰›é¡¿è¿­ä»£æ³•**ï¼š

```java
public static double square(int num) {
    double x1 = 1, x2;
    // ç‰›é¡¿è¿­ä»£å…¬å¼
    x2 = x1 / 2.0 + num / (2 * x1);
    while (Math.abs(x2 - x1) > 0.0001) {
        x1 = x2;
        x2 = x1 / 2.0 + num / (2 * x1);
    }
    return x2;
}
```

###### æ•´æ•°æ‹†åˆ†æ–¹æ¡ˆ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ç»™ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæˆä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒçš„æ­£æ•´æ•°çš„å’Œï¼Œè¾“å‡ºæ‰€æœ‰çš„è§£å†³æ–¹æ¡ˆ

###### ä¸å«358çš„æ•°å­—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

ç»™å®šä¸€ä¸ªåŒºé—´ï¼ˆa, bï¼‰,æ±‚è¯¥åŒºé—´å†…ä¸å«æ•°å­—3, 5, 8çš„æ•°å­—ä¸ªæ•°

###### ä¸‘æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

https://leetcode-cn.com/problems/ugly-number/

###### å¤§æ•°æ±‚å’Œ

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

**åº“å‡½æ•°**ï¼šä½¿ç”¨ BigDecimalï¼Œè‚¯å®šä¸èƒ½ç”¨ï¼Œä½†æ˜¯å¯ä»¥è¯´ã€‚

**åŒæŒ‡é’ˆ**ï¼šä»£ç å¦‚ä¸‹ã€‚

```java
public String addStrings(String num1, String num2) {
    StringBuilder res = new StringBuilder();
    // åŒæŒ‡é’ˆ
    int i = num1.length() - 1, j = num2.length() - 1, carry = 0;
    // åªè¦æœ‰ä¸€ä¸ªä¸ä¸º0å³å¯
    while(i >= 0 || j >= 0){
        int n1 = i >= 0 ? num1.charAt(i) - '0' : 0;
        int n2 = j >= 0 ? num2.charAt(j) - '0' : 0;
        int tmp = n1 + n2 + carry;
        carry = tmp / 10;
        res.append(tmp % 10);
        i--; j--;
    }
    if(carry == 1) res.append(1);
    // æœ€åè®°å¾—é€†åº
    return res.reverse().toString();
}
```

###### å¤§æ•°ç›¸ä¹˜

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼šç»™å®šä¸¤ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num1 å’Œ num2ï¼Œè¿”å› num1 å’Œ num2 çš„ä¹˜ç§¯ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¹Ÿè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚

**é¢˜è§£**ï¼šéå† num2 æ¯ä¸€ä½ä¸ num1 è¿›è¡Œç›¸ä¹˜ï¼Œå°†æ¯ä¸€æ­¥çš„ç»“æœè¿›è¡Œ**ç´¯åŠ **ã€‚ç´¯åŠ å°±ä½¿ç”¨å‰é¢**å­—ç¬¦ä¸²ç´¯åŠ **çš„ä»£ç ã€‚

<img src="assets/image-20200813215456971.png" alt="image-20200813215456971" style="zoom:50%;" />

```java
public String multiply(String num1, String num2) {
    if (num1.equals("0") || num2.equals("0")) return "0";
    // ä¿å­˜è®¡ç®—ç»“æœ
    String res = "0";

    // num2é€ä½ä¸num1ç›¸ä¹˜
    for (int i = num2.length() - 1; i >= 0; i--) {
        int carry = 0;
        // ä¿å­˜num2ç¬¬iä½æ•°å­—ä¸num1ç›¸ä¹˜çš„ç»“æœ
        StringBuilder temp = new StringBuilder();
        // è¡¥0
        for (int j = 0; j < num2.length() - 1 - i; j++) {
            temp.append(0);
        }
        int n2 = num2.charAt(i) - '0';

        // num2çš„ç¬¬iä½æ•°å­—n2ä¸num1ç›¸ä¹˜
        for (int j = num1.length() - 1; j >= 0 || carry != 0; j--) {
            int n1 = j < 0 ? 0 : num1.charAt(j) - '0';
            int product = (n1 * n2 + carry) % 10;
            temp.append(product);
            carry = (n1 * n2 + carry) / 10;
        }
        // å°†å½“å‰ç»“æœä¸æ–°è®¡ç®—çš„ç»“æœæ±‚å’Œä½œä¸ºæ–°çš„ç»“æœ
        res = addStrings(res, temp.reverse().toString());
    }
    return res;
}

// ä¸‹é¢æ˜¯å­—ç¬¦ä¸²ç›¸åŠ çš„æ¨¡æ¿
public String addStrings(String num1, String num2) {
    StringBuilder res = new StringBuilder();
    // åŒæŒ‡é’ˆ
    int i = num1.length() - 1, j = num2.length() - 1, carry = 0;
    // åªè¦æœ‰ä¸€ä¸ªä¸ä¸º0å³å¯
    while(i >= 0 || j >= 0){
        int n1 = i >= 0 ? num1.charAt(i) - '0' : 0;
        int n2 = j >= 0 ? num2.charAt(j) - '0' : 0;
        int tmp = n1 + n2 + carry;
        carry = tmp / 10;
        res.append(tmp % 10);
        i--; j--;
    }
    if(carry == 1) res.append(1);
    // æœ€åè®°å¾—é€†åº
    return res.reverse().toString();
}
```

###### æ±‚å•†

ğŸ“˜ **å…¬å¸**ï¼šçŒ¿è¾…å¯¼

æ±‚å•†ï¼Œä¸èƒ½ä½¿ç”¨ä¹˜æ³•ã€é™¤æ³•å’Œæ±‚æ¨¡ï¼ˆè€ƒè™‘çš„è¾¹ç•Œæ¡ä»¶æ¯”è¾ƒå¤šï¼‰

###### æ±‚å› æ•°ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šåä¸º

å¯¹ç»™å‡ºä¸€ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ±‚å› æ•°ä¸ªæ•°

##### 8. ä½è¿ç®—

Java ä¸­çš„ä½è¿ç®—ï¼š

```java
static int Integer.bitCount();           // ç»Ÿè®¡1çš„æ•°é‡
static int Integer.highestOneBit();      // è·å¾—æœ€é«˜ä½
static String toBinaryString(int i);     // è½¬æ¢ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²
```

###### ä¸ç”¨ä¸­é—´å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

```java
a = a ^ b;
b = a ^ b;
a = a ^ b;
```

###### äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°

ä¸¤ç§æ–¹å¼ï¼š

```java
public int hammingWeight(int num) {
    int res = 0;
    while(num != 0) {
        // ä¸1ç›¸ä¸ï¼Œå¦‚æœæ˜¯1åˆ™æ˜¯1
        if((num & 1) == 1) res++;
        // å¾€å³ç§»ä½1ä½ç›´åˆ°numä¸º0
        num = num >>> 1;
    }
    return res;
}
```

```java
public int hammingWeight(int n) {
    int res = 0;
    while(n != 0) {
        res++;
        // å…³é”®
        n = n & (n - 1);
    }
    return res;
}
```

###### åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—

ä½¿ç”¨**å¼‚æˆ–è¿ç®—**ï¼Œå¦‚æœ**ä¸¤ä¸ªæ•°ç›¸åŒï¼Œåˆ™å…¶å¼‚æˆ–ç»“æœä¸º 0**ã€‚å¦‚æœæŠŠå…¨éƒ¨æ•°å­—éƒ½åšå¼‚æˆ–ï¼Œæœ€åçš„ç»“æœå°±æ˜¯åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚

```java
public int singleNumber(int[] nums) {
    int res = nums[0];
    // æ¯ä¸ªæ•°å­—éƒ½åšå¼‚æˆ–è¿ç®—
    for(int i = 1; i < nums.length; i++) {
        res = res ^ nums[i];
    }
    return res;
}
```



##### 9. å¤§æ•°æ®ä¸å†…å­˜é™åˆ¶

---

32Gæ•°æ®1Gå†…å­˜æ’åº

---

å¤§é‡urlæ‰¾å‡ºé¢‘ç‡æœ€é«˜çš„kä¸ª

---

**ä¸€äº¿ä¸ªæ­£æ•´æ•°,èŒƒå›´æ˜¯0-42äº¿ã€‚æ±‚å‡ºç°æ¬¡æ•°æ˜¯2çš„æ•°å­—ï¼Œç©ºé—´å¤æ‚åº¦**             

â€‹      ä½¿ç”¨ä½å›¾bitMapã€‚ä½å›¾æ˜¯ä»¥bitä½ä¸ºå•ä½è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œè¿™æ ·æ¯ä¸ªå­—èŠ‚8ä¸ªä½å°±å¯ä»¥å­˜å‚¨8ä¸ªæ•°å­—ï¼Œæ™®é€šçš„ä¸€ä¸ªintå 4ä¸ªå­—èŠ‚ï¼Œ32ä½ï¼Œç”¨äº†ä½å›¾ä¹‹åå¯ä»¥å°†ç©ºé—´èŠ‚çœ32å€ã€‚      

â€‹      å¼€ä¸€ä¸ª42äº¿å¤§å°çš„ä½å›¾ï¼Œå°†è¿™ä¸€äº¿ä¸ªæ•°å­—å­˜è¿›æ•°å­—å¤§å°å¯¹åº”çš„ä½ç½®ï¼Œä¸€ä¸ªbitæ¯å­˜è¿›å»ä¸€ä¸ªæ•°å­—ï¼Œå°±å°†value+1,æ¯”å¦‚ç¬¬ä¸€æ¬¡å­˜8ï¼Œå°±å°†ç´¢å¼•ä¸º8çš„ä½ç½®çš„valueç½®ä¸º1ï¼Œç¬¬äºŒæ¬¡å°±ç½®ä¸º2ï¼Œå­˜å®Œä¹‹åæœç´¢valueä¸º2çš„keyæ˜¯å¤šå°‘ã€‚      

â€‹      32ä½æœºå™¨æœ€å¤§èƒ½è¡¨ç¤ºçš„æ•°å­—æ˜¯42äº¿9åƒå¤šä¸‡ã€‚      

â€‹      42äº¿bit /(8*1024*1024) = 500MB

---

ç®—æ³•ï¼šæœ‰ä¸€ä¸ªIPåœ°å€åº“ï¼Œå‡è®¾æœ‰å‡ åä¸‡æ¡ipï¼Œå¦‚ä½•åˆ¤æ–­æŸä¸ªipåœ°å€æ˜¯å¦åœ¨è¿™ä¸ªåº“ä¸­ï¼Ÿ             

â€‹      æ€è·¯ä¸€ï¼šåˆ†æ²»æ³•ï¼Œå°†ipåœ°å€æ ¹æ®å‰ä¸‰ä½åˆ†æˆ256ä»½ï¼Œç„¶åçœ‹è¿™ä¸ªipåœ°å€å¯¹åº”çš„ç½‘æ®µï¼Œåªæ¯”å¯¹è¿™ä¸ªç½‘æ®µé‡Œé¢æ˜¯å¦æœ‰è¿™ä¸ªipï¼Œå½“ç„¶è¿˜å¯ä»¥ç»§ç»­åˆ†ä¸‹å»ï¼Œæ ¹æ®æ•°æ®é‡æ¥å†³å®šåˆ†æˆå¤šå°‘ä»½ã€‚      

â€‹      æ€è·¯äºŒï¼šä½å›¾ï¼Œå°†æ¯ä¸€æ¡ipå¯¹åº”ä½å›¾ä¸­çš„ä¸€ä¸ªä½ï¼Œ2^32æ¬¡æ–¹(42äº¿å¤š)ä¸ªæ•°æ®åªéœ€è¦512Mç©ºé—´ã€‚å¯ä»¥å®ç°O(1)çš„æ—¶é—´æœç´¢ï¼ŒO(n)çš„æ—¶é—´å­˜å‚¨ã€‚

----

**2gå†…å­˜ï¼Œè¦æ±‚ä¸€ä¸ª10gæ–‡ä»¶çš„ä¸­ä½æ•°**

http://blog.sina.com.cn/s/blog_8e9c63c70101f5pl.html

---

**æƒ…æ™¯é¢˜ï¼Œä¸€ä¸ª5Tçš„æ–‡ä»¶ï¼Œé‡Œé¢å…¨æ˜¯idï¼Œ1-10^9 ï¼Œå¦‚ä½•è®¡ç®—ä¸åŒidçš„ä¸ªæ•°ï¼Ÿ**

å“ˆå¸Œåˆ°ä¸åŒçš„æ–‡ä»¶ï¼Œå†é€ä¸ªæ–‡ä»¶å†…æ‰¾ä¸åŒçš„ã€‚

---

##### 10. å…¶ä»–

###### å¿«æ’(N)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€æ‹›é“¶ç½‘ç»œ

```java
public static void quickSort(int[] array) {
    if (array == null || array.length < 2) return;
    quickSort(array, 0, array.length - 1);
}

private static void quickSort(int[] array, int left, int right) {
    // è¿™é‡Œæ˜¯if,ä¸æ˜¯while,å› ä¸ºè¿™ä¸ªå¾ªç¯é‡Œé¢æ ¹æœ¬æ²¡æœ‰æ›´æ–°leftä¸right
    if (left < right) {
        int pivot = partition(array, left, right);
        // è¿™é‡Œpivotå·²ç»è®¡ç®—è¿‡äº†ï¼Œæ‰€ä»¥å–pivotçš„ä¸¤è¾¹
        quickSort(array, left, pivot - 1);
        quickSort(array, pivot + 1, right);
    }
}

private static int partition(int[] array, int left, int right) {
    // Base case
    if(left == right) return left;
    // æŒ‘é€‰ä¸€ä¸ªéšæœºçš„pivotç´¢å¼•å¹¶äº¤æ¢åˆ°ç¬¬ä¸€ä¸ªä½ç½®ä¸Š
    int randomPivot = left + (int) (Math.random() * (right - left + 1));
    swap(array, randomPivot, left);
    // æ•°ç»„ç¬¬ä¸€ä¸ªå€¼ä¸ºpivotå€¼
    int pivotValue = array[left];
    // ä»ç¬¬äºŒä¸ªä½ç½®å¤„å¼€å§‹
    int i = left + 1;
    int j = right;
    while (true) {
        // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ä»¥äº¤æ¢çš„åŒæŒ‡é’ˆ
        while (i <= j && array[i] <= pivotValue) i++;
        while (i <= j && array[j] >= pivotValue) j--;
        // æ•°ç»„è¶Šç•Œé€€å‡º
        if(i >= j) break;
        // äº¤æ¢ä¸¤ä¸ªå€¼
        swap(array, i, j);
    }
    // äº¤æ¢ç¬¬ä¸€ä¸ªpivotå…ƒç´ å’Œjä½ç½®,è¿™ä¸ªæ—¶å€™jå·¦è¾¹çš„å…ƒç´ éƒ½å°äºç­‰äºj,å³è¾¹çš„å…ƒç´ éƒ½å¤§äºj
    swap(array, left, j);
    return j;
}

private static void swap(int[] nums, int i, int j) {
    int temp = nums[i];
    nums[i] = nums[j];
    nums[j] = temp;
}
```

å¿«é€Ÿæ’åºæ˜¯**åŸåœ°æ’åº**ï¼Œ**ä¸éœ€è¦è¾…åŠ©æ•°ç»„ï¼Œä½†æ˜¯==é€’å½’è°ƒç”¨==éœ€è¦è¾…åŠ©æ ˆ**ã€‚å¿«é€Ÿæ’åº**æœ€å¥½æƒ…å†µ**ä¸‹æ˜¯æ¯æ¬¡éƒ½æ­£å¥½å°†æ•°ç»„**å¯¹åŠåˆ†**ï¼Œè¿™æ ·é€’å½’è°ƒç”¨**æ¬¡æ•°æ‰æ˜¯æœ€å°‘**çš„ã€‚**æœ€åæƒ…å†µ**ä¸‹ï¼Œç¬¬ä¸€æ¬¡ä»æœ€å°çš„å…ƒç´ åˆ‡åˆ†ï¼Œç¬¬äºŒæ¬¡ä»ç¬¬äºŒå°çš„å…ƒç´ åˆ‡åˆ†ï¼Œå¦‚æ­¤è¿™èˆ¬ã€‚å› æ­¤**æœ€å**çš„æƒ…å†µä¸‹éœ€è¦æ¯”è¾ƒ N<sup>2</sup>/2ï¼Œæ­¤æ—¶å¤æ‚åº¦æ˜¯ **O(N^2^)**ã€‚

å¹³å‡ **O(NlogN)**ï¼Œæœ€å¥½ **O(NlogN)**ï¼Œæœ€å **O(N^2^)**ã€‚

**å¿«æ’ä¼˜åŒ–**ï¼š1. å°äº 20 ä¸ªå…ƒç´ çš„å°æ•°ç»„å¯ä»¥é‡‡ç”¨æ’å…¥æ’åºï¼›2. pivot å€¼æœ€å¥½æ˜¯éšæœºå–ï¼›3. å¦‚æœæœ‰å¤§é‡é‡å¤å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨**ä¸‰å‘åˆ‡åˆ†**ã€‚

###### æ•°ç»„ä¸­ç¬¬Kå¤§çš„æ•°(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€çŒ¿è¾…å¯¼

LeetCode215ã€‚å€Ÿç”¨äº†å¿«æ’çš„æ€æƒ³ï¼Œä½†æ˜¯ partition çš„æ—¶å€™å¯ä»¥å°‘å†™ä¸€äº›ã€‚

```java
public int findKthLargest(int[] nums, int k) {
    int len = nums.length;
    int left = 0;
    int right = len - 1;
    // è½¬æ¢ä¸€ä¸‹ï¼Œç¬¬kå¤§å…ƒç´ çš„ç´¢å¼•æ˜¯len-k
    int target = len - k;
    while (true) {
        int index = partition(nums, left, right);
        if (index == target) {
            return nums[index];
        } else if (index < target) {
            left = index + 1;
        } else {
            right = index - 1;
        }
    }
}

public int partition(int[] nums, int left, int right) {
    int pivot = nums[left];
    int j = left;
    for (int i = left + 1; i <= right; i++) {
        if (nums[i] < pivot) {
            j++;
            swap(nums, j, i);
        }
    }
    swap(nums, j, left);
    return j;
}

private void swap(int[] nums, int i, int j) {
    int temp = nums[i];
    nums[i] = nums[j];
    nums[j] = temp;
}
```

###### TopK

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

**é¢˜ç›®**ï¼šè¿”å›å‰ K å¤§çš„å…ƒç´ ã€‚

å¯ä»¥ç”¨å †æ’åºï¼Œå¯ä»¥**å…ˆå–å‰ k ä¸ªå…ƒç´ æ„é€ å¤§é¡¶å †**ï¼Œç„¶åéå†åé¢çš„å…ƒç´ ï¼Œå¦‚æœ**è¯»å–åˆ°çš„å…ƒç´ æ¯”å †é¡¶å…ƒç´ å°**ï¼Œç›´æ¥ä¸¢å¼ƒï¼Œå¦‚æœæ¯”å †é¡¶å¤§ï¼Œå°±æ›¿æ¢æ‰å †é¡¶å…ƒç´ ï¼Œç„¶åè°ƒæ•´å †ã€‚æ—¶é—´å¤æ‚åº¦ O(NlogK)ã€‚

è¿™é‡Œä½¿ç”¨å¿«æ’ patitionã€‚

```java
public ArrayList<Integer> topK(int[] nums, int k) {
    ArrayList<Integer> resList = new ArrayList<>();
    // å¦‚æœå…ƒç´ ä¸ªæ•°è¾ƒå°
    if (nums.length <= k) {
        for (int num : nums) {
            resList.add(num);
        }
        return resList;
    }
    int len = nums.length;
    int left = 0;
    int right = len - 1;
    int target = len - k;
    int index = 0;
    while (true) {
        index = partition(nums, left, right);
        if (index == target) {
            break;
        } else if (index < target) {
            left = index + 1;
        } else {
            right = index - 1;
        }
    }
    for (int i = target; i < len; i++) {
        resList.add(nums[i]);
    }
    return resList;
}

public int partition(int[] nums, int left, int right) {
    int pivot = nums[left];
    int j = left;
    for (int i = left + 1; i <= right; i++) {
        // å½“å‰å€¼å¤§äºpivotå€¼
        if (nums[i] > pivot) {
            j++;
            swap(nums, i, j);
        }
    }
    swap(nums, left, j);
    return j;
}

public void swap(int[] nums, int i, int j) {
    int temp = nums[i];
    nums[i] = nums[j];
    nums[j] = temp;
}
```

###### å †ä¸å¤§æ•°æ®çš„TopK

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

**é¢˜ç›®**ï¼š10 äº¿ä¸ªæ•°å­—ï¼Œæ±‚å‰ K ä¸ªæ•°ã€‚

å°†å‰ K ä¸ªå…ƒç´ è°ƒæ•´ä¸º**æœ€å°å †**ã€‚ä¾æ¬¡å°† K+1 åé¢çš„å…ƒç´ ï¼ˆçœ‹åšæ–°å…ƒç´ ï¼‰ï¼Œä¸**å †é¡¶å…ƒç´ **ï¼ˆå †çš„æœ€å°å€¼ï¼‰è¿›è¡Œæ¯”è¾ƒï¼šå¦‚æœå †é¡¶å…ƒç´ æ¯”æ–°å…ƒç´ **è¦å¤§ï¼Œåˆ™æ–°å…ƒç´ ä¸ç”¨å…¥å †**ï¼Œå¿½ç•¥ï¼›å¦‚æœ**å †é¡¶å…ƒç´ æ¯”æ–°å…ƒç´ è¦å°**ï¼Œåˆ™å°†æ–°å…ƒç´ æ›¿æ¢æ‰å †é¡¶å…ƒç´ ï¼Œç„¶åè¿›è¡Œè°ƒæ•´å †ï¼ˆå§‹ç»ˆä¿è¯å †é¡¶å…ƒç´ æ˜¯å †ä¸­å…ƒç´ çš„æœ€å°å€¼ï¼‰ã€‚

TODOï¼šè¿™é‡Œæœ‰ç‚¹ä¸å¤ªæ˜ç™½ï¼Œå¾…è¡¥å……ã€‚

```java
// æ„å»ºå¤§æ ¹å †:å°†arrayçœ‹æˆå®Œå…¨äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ç»“æ„
private static int[] buildMaxHeap(int[] array) {
    // ä»æœ€åä¸€ä¸ªèŠ‚ç‚¹array.length - 1çš„çˆ¶èŠ‚ç‚¹(array.length - 1 - 1ï¼‰/ 2å¼€å§‹
    // ç›´åˆ°æ ¹èŠ‚ç‚¹0,åå¤è°ƒæ•´å †
    for (int i = (array.length - 2) / 2; i >= 0; i--) {
        adjustDownToUp(array, i, array.length);
    }
    return array;
}

// å°†å…ƒç´ array[k]è‡ªä¸‹å¾€ä¸Šé€æ­¥è°ƒæ•´æ ‘å½¢ç»“æ„
private static void adjustDownToUp(int[] array, int k, int length) {
    int temp = array[k];
    for (int i = 2 * k + 1; i < length - 1; i = 2 * i + 1) {
        // iä¸ºåˆå§‹åŒ–ä¸ºèŠ‚ç‚¹kçš„å·¦å­©å­,æ²¿èŠ‚ç‚¹è¾ƒå¤§çš„å­èŠ‚ç‚¹å‘ä¸‹è°ƒæ•´
        if (i < length && array[i] < array[i + 1]) {
            // å–èŠ‚ç‚¹è¾ƒå¤§çš„å­èŠ‚ç‚¹çš„ä¸‹æ ‡
            i++;   // å¦‚æœèŠ‚ç‚¹çš„å³å­©å­>å·¦å­©å­,åˆ™å–å³å­©å­èŠ‚ç‚¹çš„ä¸‹æ ‡
        }
        if (temp >= array[i]) {  // æ ¹èŠ‚ç‚¹ >=å·¦å³å­å¥³ä¸­å…³é”®å­—è¾ƒå¤§è€…,è°ƒæ•´ç»“æŸ
            break;
        } else {   // æ ¹èŠ‚ç‚¹ <å·¦å³å­å¥³ä¸­å…³é”®å­—è¾ƒå¤§è€…
            array[k] = array[i]; // å°†å·¦å³å­ç»“ç‚¹ä¸­è¾ƒå¤§å€¼array[i]è°ƒæ•´åˆ°åŒäº²èŠ‚ç‚¹ä¸Š
            k = i; // ã€å…³é”®ã€‘ä¿®æ”¹kå€¼,ä»¥ä¾¿ç»§ç»­å‘ä¸‹è°ƒæ•´
        }
    }
    array[k] = temp;  // è¢«è°ƒæ•´çš„ç»“ç‚¹çš„å€¼æ”¾äººæœ€ç»ˆä½ç½®
}

public static int[] heapSort(int[] array) {
    // åˆå§‹åŒ–å †
    array = buildMaxHeap(array);
    for (int i = array.length - 1; i > 1; i--) {
        // å°†å †é¡¶å…ƒç´ å’Œå †åº•å…ƒç´ äº¤æ¢,å³å¾—åˆ°å½“å‰æœ€å¤§å…ƒç´ æ­£ç¡®çš„æ’åºä½ç½®
        int temp = array[0];
        array[0] = array[i];
        array[i] = temp;
        // æ•´ç†,å°†å‰©ä½™çš„å…ƒç´ æ•´ç†æˆå †
        adjustDownToUp(array, 0, i);
    }
    return array;
}

public static int[] findMin(int[] array, int[] all) {
    array = buildMaxHeap(array);
    // å‰é¢100ä¸ªæ•°å­—(0-99å·)å·²ç»å–å‡ºäº†
    for (int i = 100; i < all.length - 1; i++) {
        if (all[i] >= array[0]) {
            continue;
        } else {
            array[0] = all[i];
            adjustDownToUp(array, 0, array.length);
        }
    }
    return array;
}
```

###### éšæœºæ•°ç”Ÿæˆå™¨(H)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(4)

**é¢˜ç›®ï¼šæ ¹æ®(1, 5)éšæœºæ•°ç”Ÿæˆå™¨ï¼Œç”Ÿæˆ(1, 7)ä¹‹å†…çš„éšæœºæ•°ã€‚**

```java
// 1-5çš„éšæœºæ•°ç”Ÿæˆå™¨
public static int rand1To5() {
    return (int) (Math.random() * 5) + 1;
}

public static int rand1To7() {
    int num = 0;
    while (true) {
        num = (rand1To5() - 1) * 5 + rand1To5() - 1;
        if (num <= 20) break;
    }
    return num % 7 + 1;
}
```

**é¢˜ç›®**ï¼š**ç»™å®šä¸€ä¸ª 0-4 éšæœºæ•°ç”Ÿæˆå™¨ å¦‚ä½•ç”Ÿæˆ 0-6 éšæœºæ•°**ã€‚

```java
public static int rand7() {
    while (true) {
        // 0-24,è¶…è¿‡21çš„ä¸è¦,é‡æ–°è®¡ç®—
        int num = 5 * rand5() + rand5();
        if (num < 21) {
            return num % 7;
        }
    }
}

public static int rand5() {
    return (int) (Math.random() * 5);
}
```

**é¢˜ç›®ï¼šç”¨ 0-6 éšæœºç”Ÿæˆå™¨ç”Ÿæˆ 0-9 éšæœºæ•°ã€‚**

```java
public static int rand10() {
    while (true) {
        // æ³¨æ„rand7æ˜¯éšæœºè°ƒç”¨äº†ä¸¤æ¬¡
        int num = 7 * rand7() + rand7();
        // æ’é™¤41-48ï¼Œå› ä¸ºä»–ä»¬ä¸èƒ½ç”Ÿæˆ9ï¼Œä¼šé€ æˆå„ä¸ªæ•°å­—å‡ºç°çš„æ¦‚ç‡ä¸åŒ
        if (num < 41) {
            return num % 10;
        }
    }
}
```

**æ£€éªŒæ–¹å¼**ï¼šéšæœºç”Ÿæˆ 100000 ä¸ªæ•°ï¼Œç»Ÿè®¡ä¸€ä¸‹åˆ†å¸ƒã€‚

###### åˆ†æ•°æ’å

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

é«˜è€ƒæˆç»© 2000 ä¸‡æ•°æ®ï¼Œåˆ†æ•° 0 - 750ï¼Œå¦‚ä½•å¿«é€ŸçŸ¥é“æ’åï¼Œå¦‚ä½•çŸ¥é“ä»»ä¸€åˆ†æ•°æ’å --->æ¡¶æ’åº

###### å‰ç¼€æ ‘(2)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### éšæœºæ‰“ä¹±æ•°ç»„

###### å…¶ä»–é¢˜ç›®

---

æœ‰ä¸¤ä¸ªäººï¼Œæœ‰å¼€å§‹ä¸Šç­æ—¶é—´å’Œä¸‹ç­æ—¶é—´ï¼Œè¿™ä¸¤ä¸ªäººä¸Šç­æœŸé—´ä¼šæœ‰ä¼šè®®æ—¶é—´ï¼›æ±‚è¿™ä¸¤ä¸ªäººä¸Šç­æœŸé—´çš„å…±åŒç©ºä½™æ—¶é—´

---

æœ‰ä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„è¾“å…¥æµï¼Œå¤§åˆ°æ²¡æœ‰å­˜å‚¨å™¨å¯ä»¥å°†å…¶å­˜å‚¨ä¸‹æ¥ï¼Œä¹Ÿä¸çŸ¥é“åˆ°åº•æœ‰å¤šå¤§ï¼Œè€Œä¸”åªè¾“å…¥ä¸€æ¬¡ï¼Œå¦‚ä½•ä»è¿™ä¸ªè¾“å…¥æµä¸­éšæœºå–å¾— 7 ä¸ªè®°å½•ã€‚

---



#### ä¸šåŠ¡ä»£ç 

##### 1. è®¾è®¡æ¨¡å¼

###### å•ä¾‹æ¨¡å¼

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)

**å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼**ï¼š

**æ‡’æ±‰å¼**ï¼šç›´æ¥å®ä¾‹åŒ–ï¼ˆé¥¿äº†é©¬ä¸Šå°±è¦åƒï¼‰ã€‚

```java
private static Singleton uniqueInstance1 = new Singleton();
```

**æ‡’æ±‰å¼**ï¼šå»¶è¿Ÿå®ä¾‹åŒ–ï¼ˆå› ä¸ºæ‡’æ‰€ä»¥å¼€å§‹ä¸åˆå§‹åŒ–ï¼‰ã€‚

```java
// å®šä¹‰ä¸€ä¸ªç§æœ‰å†…éƒ¨æ–¹æ³•é˜²æ­¢å¤–éƒ¨æ„é€ å¯¹è±¡
private Singleton() {}
private static Singleton uniqueInstance;
// å¯¹æ•´ä¸ªæ–¹æ³•åŠ é”
public static synchronized Singleton getUniqueInstance() {
    if (uniqueInstance == null) {
        uniqueInstance = new Singleton();
    }
    return uniqueInstance;
}
```

**åŒé‡æ ¡éªŒé”**ï¼šuniqueInstance é‡‡ç”¨ ==**volatile**== å…³é”®å­—ä¿®é¥°å¯ä»¥**ä¿è¯å¯è§æ€§å¹¶ç¦æ­¢æŒ‡ä»¤é‡æ’åº**ï¼Œä¹Ÿèƒ½**é˜²æ­¢ç©ºæŒ‡é’ˆå¼‚å¸¸**çš„å‡ºç°ã€‚å› ä¸º uniqueInstance = new Singleton(); è¿™ä¸€æ­¥å…¶å®æ˜¯åˆ†æˆäº†ä¸‰æ­¥æ‰§è¡Œçš„ã€‚

```java
public class Singleton {
    // ç§æœ‰æ„é€ æ–¹æ³•
    private Singleton() {}
    // volatileå…³é”®å­—ä¿è¯å¯è§æ€§å¹¶ç¦æ­¢æŒ‡ä»¤é‡æ’åº
    private volatile static Singleton singleton;
  
    // æ–¹æ³•ä¸Šä¸ç”¨åŠ é”äº†
    public static Singleton getSingleton() {
        if (singleton == null) {
            synchronized (Singleton.class) { // ä»…ä»…åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰åŠ é”,åŠ é”å¯¹ç±»å¯¹è±¡åŠ é”
                if (singleton == null) {
                    singleton = new Singleton();
                }
            }
        }
        return singleton;
    }
}
```

**é™æ€å†…éƒ¨ç±»æ–¹å¼**ï¼šå½“ Singleton ç±»åŠ è½½æ—¶ï¼Œ**é™æ€å†…éƒ¨ç±» SingletonHolder æ²¡æœ‰**è¢«åŠ è½½è¿›å†…å­˜ã€‚åªæœ‰**å½“è°ƒç”¨ getUniqueInstance() æ–¹æ³•**ä»è€Œè§¦å‘ **SingletonHolder.INSTANCE** æ—¶ SingletonHolder **æ‰ä¼šè¢«åŠ è½½** ï¼Œæ­¤æ—¶åˆå§‹åŒ– INSTANCE å®ä¾‹ï¼Œå¹¶ä¸” **JVM** èƒ½ç¡®ä¿ INSTANCE **åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡**ã€‚

```java
public class Singleton {

    private Singleton() {}

    // ä½¿ç”¨é™æ€å†…éƒ¨ç±» å¯å®‰å…¨çš„å»¶è¿ŸåŠ è½½
    private static class SingletonHolder {
        private static final Singleton INSTANCE = new Singleton();
    }

    // è°ƒç”¨æ—¶æ‰è§¦å‘é™æ€å†…éƒ¨ç±»åŠ è½½ç”Ÿæˆå•ä¾‹å®ä¾‹
    public static Singleton getUniqueInstance() {
        return SingletonHolder.INSTANCE;
    }
}
```

**æšä¸¾å®ç°**ï¼šå¯ä»¥é˜²æ­¢åå°„æ”»å‡»ä¸åºåˆ—åŒ–æ”»å‡»ã€‚

```java
public enum Singleton {
    INSTANCE;
    
    private String objName;

    public String getObjName() {
        return objName;
    }

    public void setObjName(String objName) {
        this.objName = objName;
    }
}
```

##### 2. å¤šçº¿ç¨‹

###### ä¸‰ä¸ªçº¿ç¨‹å¾ªç¯æ‰“å°ABC

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚ã€çŒ¿è¾…å¯¼

æœ¬é¢˜æœ‰å¤šç§æ–¹æ³•å®ç°ï¼Œå¦‚ waitï¼Œnotifyï¼Œsynchronized ç­‰ï¼Œè¿™é‡Œç»™å‡ºåŸºäº Lock çš„å®ç°ã€‚

çŒ¿è¾…å¯¼ï¼šå¤šçº¿ç¨‹æ‰“å°æ•°å­—ã€‚

###### å†™ä¸€ä¸ªæ­»é”

###### ä¸¤ä¸ªçº¿ç¨‹è½®æµæ‰“å°å¥‡æ•°å¶æ•°

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### æ— é”é˜Ÿåˆ—

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

æ€ä¹ˆå®ç°ä¸€ä¸ªæ— é”é˜Ÿåˆ—ï¼Ÿæ— é”é˜Ÿåˆ—æ€ä¹ˆé¿å…ABAé—®é¢˜ï¼Ÿç®€å•å†™ä¸€ä¸‹å®ç°ä»£ç 

###### ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜

ğŸ“˜ **å…¬å¸**ï¼šé˜¿é‡Œ

##### 3. æ•°æ®ç»“æ„

###### LRU(2)

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚(2)ã€å¿«æ‰‹

å®šä¹‰ç»“ç‚¹ç±»ï¼š

```java
private static class LRUNode {
    String key;
    Object value;
    LRUNode next;
    LRUNode pre;

    public LRUNode(String key, Object value) {
        this.key = key;
        this.value = value;
    }
}
```

æ³¨æ„ï¼šä¸ç®¡æ˜¯ put æ–¹æ³•è¿˜æ˜¯ get æ–¹æ³•ï¼Œ**éƒ½éœ€è¦å°†è®¿é—®çš„ç»“ç‚¹é‡æ–°æ”¾åˆ°é“¾è¡¨å¤´éƒ¨**ï¼Œæ‰€ä»¥ä¼šæŠ½å‡ºä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ã€‚

```java
public class LRUCache {
	// å­˜æ”¾å…ƒç´ 
	Map<String, LRUNode> map = new HashMap<>();
	LRUNode head;
	LRUNode tail;
	// ç¼“å­˜æœ€â¼¤å®¹é‡å¤§äº1
	int capacity;

	public LRUCache(int capacity) {
		this.capacity = capacity;
	}

	/**
	 * æ’å…¥å…ƒç´ 
	 * @param key é”®
	 * @param value å€¼
	 */
	public void put(String key, Object value) {
		// è¯´æ˜ç¼“å­˜ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ 
		if (head == null) {
			head = new LRUNode(key, value);
			tail = head;
			map.put(key, head);
		}
		// è¯´æ˜ç¼“å­˜ä¸­å·²ç»å­˜åœ¨è¿™ä¸ªå…ƒç´ äº†
		LRUNode node = map.get(key);
		if (node != null) {
			// æ›´æ–°å€¼
			node.value = value;
			// æŠŠè¿™ä¸ªç»“ç‚¹ä»é“¾è¡¨åˆ é™¤å¹¶ä¸”æ’â¼Šåˆ°å¤´ç»“ç‚¹
			removeAndInsert(node);
		} else {
			// è¯´æ˜å½“å‰ç¼“å­˜ä¸å­˜åœ¨è¿™ä¸ªå€¼
			LRUNode newHead = new LRUNode(key, value);
			// æ­¤å¤„æº¢å‡ºåˆ™éœ€è¦åˆ é™¤æœ€è¿‘æœ€è¿‘æœªä½¿ç”¨çš„èŠ‚ç‚¹
			if (map.size() >= capacity) {
				map.remove(tail.key);
				// åˆ é™¤å°¾ç»“ç‚¹
				tail = tail.pre;
				tail.next = null;
			}
			map.put(key, newHead);
			// å°†æ–°çš„ç»“ç‚¹æ’å…¥é“¾è¡¨å¤´éƒ¨
			newHead.next = head;
			head.pre = newHead;
			head = newHead;
		}
	}

	/**
	 * ä»ç¼“å­˜ä¸­å–å€¼
	 */
	public Object get(String key) {
		LRUNode node = map.get(key);
		// å¦‚æœæœ‰å€¼åˆ™éœ€è¦å°†è¿™ä¸ªç»“ç‚¹æ”¾åˆ°é“¾è¡¨å¤´éƒ¨
		if (node != null) {
			// æŠŠè¿™ä¸ªèŠ‚ç‚¹åˆ é™¤å¹¶æ’â¼Šåˆ°å¤´ç»“ç‚¹
			removeAndInsert(node);
			return node.value;
		}
		return null;
	}

	private void removeAndInsert(LRUNode node) {
		// ç‰¹æ®Šæƒ…å†µå…ˆåˆ¤æ–­ï¼Œä¾‹å¦‚è¯¥èŠ‚ç‚¹æ˜¯å¤´ç»“ç‚¹æˆ–æ˜¯å°¾éƒ¨èŠ‚ç‚¹
		if (node == head) {
			return;
		} else if (node == tail) {
			tail = node.pre;
			tail.next = null;
		} else {
			node.pre.next = node.next;
			node.next.pre = node.pre;
		}
		// æ’â¼Šåˆ°å¤´ç»“ç‚¹
		node.next = head;
		node.pre = null;
		head.pre = node;
		head = node;
	}
}
```



###### LFU

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### å †

ğŸ“˜ **å…¬å¸**ï¼šå­—èŠ‚

###### è®¾è®¡åŒç«¯é˜Ÿåˆ—

è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„å®ç°åŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒä¸¤ç«¯æ’å…¥åˆ é™¤å’Œæ ¹æ®indexæŸ¥æ‰¾ï¼Œæ‰€æœ‰æ“ä½œO(1)æ—¶é—´å¤æ‚åº¦





#### Java

###### åŸºç¡€

- sychronizedé”çŠ¶æ€è½¬æ¢
- å‡ ç§GCç®—æ³•ï¼Œ**å†…å­˜ç¢ç‰‡å¦‚ä½•è§£å†³**
- synchronizedé”å‡çº§æœºåˆ¶
- è¯´ä¸€ä¸‹CountDownLatchå’ŒCyclicBarrier
- hashcode æ–¹æ³•çš„åº•å±‚å®ç°
- hashmapä¸­å¦‚ä½•è®¡ç®—ä¸‹æ ‡
- å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä»€ä¹ˆæƒ…å†µä¼šå¼•å‘ï¼ˆç­”äº†å„ç§æµæœªå…³é—­ï¼Œä»¥åŠthreadlocalä¸­çš„keyï¼‰
- å¤šæ€åŠå¤šæ€å®ç°åŸç†
- åœ¨javaé‡Œé¢ï¼Œfinalï¼Œfinallyï¼Œfinalizeå®ƒä»¬ä¸‰ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«
- ä¸¾å‡ ä¸ªä½ ç”¨è¿‡çš„exceptionçš„ä¾‹å­
- javaä¸­ï¼Œåœ¨hashmapä¸­æ”¾å…¥100ä¸ªå…ƒç´ ï¼Œå¦‚æœå¸Œæœ›ä¸å‘ç”Ÿæ‰©å®¹ï¼Œé‚£ä¹ˆä¸€å¼€å§‹å£°æ˜çš„hashmapåº”è¯¥å¤šå¤§å‘¢ï¼Ÿ

###### é›†åˆ

- HashMapçš„put()æµç¨‹ï¼Œæ‰©å®¹
- è®²ä¸€è®²concurrentHashMapï¼Œå¦‚æœä¸‹æ ‡ç©ºæ˜¯æ€ä¹ˆæ“ä½œçš„ã€‚concurrenthashmapåŠ é”å’Œæ‰©å®¹æœºåˆ¶
- aqsåŸç†

###### å¹¶å‘

- è¯´ä¸€ä¸‹CAS ä»¥åŠåº”ç”¨ï¼ŒCASæœ‰ä»€ä¹ˆé—®é¢˜
- CASä¸ºä»€ä¹ˆæ˜¯åŸå­æ€§çš„ã€‚åº•å±‚CASæ€ä¹ˆå®ç°çš„
- ä¸¤ä¸ªçº¿ç¨‹è¯»ï¼Œä¸€ä¸ªçº¿ç¨‹å†™ï¼Œå¦‚ä½•å®ç°ï¼Œä¸ç”¨é”å¯ä»¥å—
- wait()å’Œsleep()çš„åŒºåˆ«
- callableå’Œrunnableæœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«
- ä»‹ç»ä¸€ä¸‹ThreadLoaclçš„å®ç°åŸç†ï¼Œå¦‚æœThreadLoaclMapçš„Keyæœ‰nullçš„æƒ…å†µå‘¢ï¼Ÿ
- ThreadLocal åŸç†ï¼Œçº¿ç¨‹æ± ä¸­ä½¿ç”¨ ThreadLocal ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Ÿ

###### çº¿ç¨‹æ± 

- é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çº¿ç¨‹æ± 
- çº¿ç¨‹æ± å‚æ•°
- çº¿ç¨‹æ± æ·»åŠ ä»»åŠ¡çš„è¿‡ç¨‹
- æ‹’ç»ç­–ç•¥ï¼Ÿé»˜è®¤æ‹’ç»ç­–ç•¥ï¼Ÿæœ‰æ²¡æœ‰è‡ªå®šä¹‰è¿‡æ‹’ç»ç­–ç•¥ï¼Ÿ

###### å…¶ä»–

#### æ•°æ®ç»“æ„

- çº¢é»‘æ ‘äº†è§£å“ªäº›
- å¿«æ’æ—¶é—´å¤æ‚åº¦ã€‚ä¸ºä»€ä¹ˆä¼šé€€åŒ–ï¼Ÿå•æ¬¡partitionçš„æ—¶é—´å¤æ‚åº¦ã€‚æ€ä¹ˆè®©å®ƒä¸é€€åŒ–ï¼ˆéšæœºæ‰“ä¹±ï¼‰ã€‚
    æ’åºç®—æ³•çš„ç¨³å®šæ€§æ˜¯ä»€ä¹ˆæ„æ€ã€‚å¿«é€Ÿæ’åºè®²ä¸€å“ˆï¼Œæ—¶é—´å¤æ‚åº¦ï¼Œæ€ä¹ˆä½¿å¾—å¿«æ’é¿å…O(n2)å¤æ‚åº¦ã€‚æ—¶é—´å¤æ‚åº¦ï¼Œæ€ä¹ˆè®¡ç®—çš„ï¼Œä¸ºä»€ä¹ˆæ˜¯O(nlogn)
- å¯èƒ½å­˜åœ¨æ¯”nlognè¿˜ä½çš„ï¼ŒåŸºäºäº¤æ¢çš„æ’åºç®—æ³•å—ï¼Ÿ
- å‹ç¼©ç®—æ³•ï¼š1ä¸‡ä¸ªæ•°åœ¨æ–‡ä»¶ä¸­ï¼ŒèŒƒå›´åœ¨ 1- 65536 ä¹‹é—´ï¼Œå¦‚ä½•å‹ç¼©ã€‚



#### ç½‘ç»œ

##### 1. åŸºç¡€

###### TCP/UDP

- tcpã€udpåŒºåˆ«ï¼Œtcpå¯é è¿æ¥ç”¨ä»€ä¹ˆä¿è¯ï¼Œä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹å„ä¸ªçŠ¶æ€åç§°ï¼ŒTIME_WAITä¸ºä»€ä¹ˆæ˜¯2MSLï¼Œå¦‚ä½•è§£å†³TIME_WAITçŠ¶æ€è¿‡å¤šã€‚ä»€ä¹ˆæ—¶å€™å‡ºç°TIME_WAITï¼Œè°å‡ºç°ï¼Œå¤§é‡time_waitä¼šæ€ä¹ˆæ ·ã€‚2mslåŸå›   1mslè¡Œä¸è¡Œã€‚
- å››æ¬¡æŒ¥æ‰‹æœ€åç­‰å¾…ä¸ºä»€ä¹ˆ2MSL
- TIME_WAITå’ŒCLOSE_WAITçš„åŒºåˆ«
- close_waitå¤ªå¤šæ€ä¹ˆæ£€æµ‹å’Œè§£å†³
- SYN Floodæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ
- TCPçš„é•¿è¿æ¥ä¸çŸ­è¿æ¥
- æœ‰ä»€ä¹ˆåŸºäºUDPçš„å¯é è¿æ¥åè®®ï¼Œå¦‚ä½•ä½¿ç”¨udpå®ç°å¯é ä¼ è¾“(3)
- æ‹¥å¡æ§åˆ¶
- TCP è¿æ¥åº•å±‚ç”¨äº†å“ªäº› ç³»ç»Ÿè°ƒç”¨ï¼Ÿ å¦‚æœæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯åŒæ—¶è°ƒç”¨ close() ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
- TCP å¦‚ä½•ä¿è¯å¯é ä¼ è¾“(2)
- TCPç²˜åŒ…ï¼Ÿ
- ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»å‘å‡ºåˆ°æ¥æ”¶ç»å†äº†ä»€ä¹ˆ
- UDPå’ŒTCPçš„åŒºåˆ«ï¼ˆNï¼‰
- UDPæœ‰å“ªäº›åè®®
- å¦‚æœæœåŠ¡ç«¯çš„**æœºå™¨**æŒ‚äº†ï¼Œè€Œå®¢æˆ·ç«¯å»è¿æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœæ˜¯æœåŠ¡ç«¯çš„**è¿›ç¨‹**æŒ‚äº†ï¼Œå®¢æˆ·ç«¯å»è¿æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
- tcpä¸‰æ¬¡æ¡æ‰‹ç¬¬ä¸‰ä¸ªåŒ…ä¸¢äº†ä¼šæ€ä¹ˆæ ·
- å®¢æˆ·ç«¯æŒ‚äº†ä»¥åï¼ŒæœåŠ¡å™¨æ€ä¹ˆåŠï¼Œtcpè¿æ¥ä¼šä¸ä¼šæ–­å¼€ï¼ˆé—®åäº†ï¼‰
- UDPåè®®ä¸ºä»€ä¹ˆèƒ½å®ç°å¹¿æ’­
- å¦‚æœå‘æŠ¥æ–‡æ®µ1 2 3 4 5ï¼Œæ”¶åˆ°2 1 4 5ï¼Œæ”¶åˆ°æ¯ä¸ªæŠ¥æ–‡æ®µæ—¶è¿”å›çš„æ˜¯ä»€ä¹ˆ
- TCPçš„keep aliveå­—æ®µã€‚HTTPçš„keep aliveå­—æ®µ
- tcpæ…¢å¯åŠ¨

###### DNS

- DNSè§£æè¿‡ç¨‹ï¼ˆè®¿é—®æµç¨‹ï¼‰ï¼ŒDNSåŠ«æŒäº†è§£å—ï¼ˆå¦‚ä½•é˜²å¾¡ï¼ŸHTTPSï¼Ÿï¼‰ï¼ŒDNSç”¨çš„åè®®ã€‚

###### ARP

- ARPè¯¦ç»†è¯´è¯´
- ARPï¼Œå¦‚æœè¦æŸ¥æ‰¾çš„MACåœ°å€ä¸åœ¨åŒä¸€ä¸ªç½‘æ®µæ€ä¹ˆåŠ
- arpæ¬ºéª—æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ
- ARPåè®®ï¼Œæ€ä¹ˆå·¥ä½œçš„ã€å±äºå“ªä¸€å±‚ï¼Œä¸ºä»€ä¹ˆå±äºæ•°æ®é“¾è·¯å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ä¼šè®¤è¯†ipåœ°å€å—

###### å…¶ä»–

- æµè§ˆå™¨è¾“å…¥urlå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆç»†è¯´ï¼ŒåŒ…æ‹¬æ¯ä¸€å±‚æ¶‰åŠåˆ°çš„åè®®ï¼‰(3)
- RIPåè®®æ€ä¹ˆè§£å†³çš„ç¯è·¯é—®é¢˜
- å…¬ç½‘ipå’Œå†…ç½‘ipæ€ä¹ˆè½¬æ¢
- åº”ç”¨å±‚æœ‰ä»€ä¹ˆåè®®ã€‚HTTPï¼ŒSMTPï¼ŒDNS
- ICMPäº†è§£å—ï¼Ÿæ˜¯åšä»€ä¹ˆçš„ï¼Ÿpingçš„å…·ä½“è¿‡ç¨‹ï¼ŸICMPä½œç”¨
- ISOåˆ†å±‚
- è·¯ç”±å™¨å’Œäº¤æ¢æœºçš„åŒºåˆ«

##### 2. HTTP

- http2.0
- http code
- getå’Œpostçš„åŒºåˆ«ï¼Ÿ
- SSLæ¡æ‰‹è¿‡ç¨‹ï¼Œç„¶åé—®æˆ‘ç¬¬ä¸€æ¬¡æ¡æ‰‹æ˜¯ä»€ä¹ˆåŠ å¯†ï¼Œç¬¬äºŒæ¬¡æ¡æ‰‹æ€ä¹ˆåŠ å¯†
- http1.0å’Œ1.1å’Œ2.0æœ‰ä»€ä¹ˆåŒºåˆ«
- httpsæ€ä¹ˆå®ç°è´Ÿè½½å‡è¡¡çš„ï¼Ÿæœ‰å“ªäº›è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Ÿ
- httpsä¸httpçš„åŒºåˆ«ï¼Œè¯¦ç»†è®²è¿°ä¸€ä¸‹SSL
- PUTå’ŒPOSTçš„åŒºåˆ«
- getèƒ½æŠŠå‚æ•°æ”¾bodyå—ï¼Œpostèƒ½æŠŠå‚æ•°æ”¾åœ¨urlé‡Œé¢å—ã€‚postä¸ç”¨request bodyå¯ä»¥å—
- çŠ¶æ€ç 301 302 502 504ã€‚httpå“åº”ç ï¼Œé—®äº†502
- HTTPé‡Œé¢å¯ä»¥æ”¾å“ªäº›æ•°æ®ï¼Ÿ
- **è·¨åŸŸäº†è§£å—ï¼ŸçŸ¥é“æ˜¯ä»€ä¹ˆåŸç†å—ï¼Ÿ**cookieæ”¯æŒè·¨åŸŸå—ï¼Ÿ
- é¡¹ç›®HTTPSçš„æ¡æ‰‹è¿‡ç¨‹ï¼Œèƒ½è¢«ä¸­é—´äººåŠ«æŒå—ï¼Ÿ
- cookie sessionè®²ä¸€ä¸‹(N)
- httpsæ˜¯å¯¹è¯·æ±‚å¤´è¿˜æ˜¯è¯·æ±‚ä½“åŠ å¯†ï¼Ÿ
- é™¤äº†getå’Œpostï¼Œè¿˜ç”¨åˆ°åˆ«çš„æ–¹æ³•äº†å—ï¼Ÿ
- .content-lengthä¸€å®šæœ‰å—ï¼Ÿå¦‚æœæ•°æ®ç‰¹åˆ«é•¿ï¼Œä¸€æ¬¡éƒ½èƒ½è¯»å–å—ï¼Ÿé‚£lengthè¡¨ç¤ºçš„æ˜¯æ¯æ¬¡è¯»å–çš„é•¿åº¦è¿˜æ˜¯æ€»é•¿åº¦ï¼Ÿ
- é•¿è¿æ¥æ˜¯å¹²å•¥ç”¨çš„ï¼Ÿä¸¾ä¸ªåœºæ™¯è¯´ã€‚é•¿è¿æ¥çš„è¿æ¥æ•°æœ‰é™åˆ¶å—ï¼Ÿ
- .cookieå¯ä»¥åŒ…æ‹¬å“ªäº›ç±»å‹çš„æ•°æ®ï¼Ÿcookieé‡Œé¢ä¿å­˜äº†ä»€ä¹ˆæ•°æ®ã€‚
- ç”¨æˆ·ç¦ç”¨cookieä¹‹åæ€ä¹ˆä¿æŒæœ‰çŠ¶æ€è¿æ¥ã€‚
- getå’Œpostçš„åŒºåˆ«ï¼Œpostä¸€å®šä¼šå‘ä¸¤ä¸ªåŒ…å˜›ï¼Ÿ
- http2.0å’Œhttp1.0åŒºåˆ«ï¼Œhttp2.0å¯ä»¥æ¨é€å¼¹å¹•æ¶ˆæ¯å—
- HTTPæ˜¯æ€ä¹ˆæ‰¾åˆ°TCPçš„
- æœåŠ¡å™¨å¦‚ä½•å¤„ç†**å¤§æ–‡ä»¶**ä¼ è¾“



#### æ“ä½œç³»ç»Ÿ

##### 1. åŸºç¡€

- å•ä¸ªè¿›ç¨‹åˆ†é…æœ€å¤§å†…å­˜å¤šå°‘(2)

- IOå¤šè·¯å¤ç”¨ï¼Œè®²ä¸‹selectã€pollã€epoll

- ç”¨æˆ·æ€ã€å†…æ ¸æ€

- ä¸¤ä¸ªè¿›ç¨‹æ€ä¹ˆå…±äº«ä¸€ä¸ªç‰©ç†å†…å­˜é¡µ

- æœ‰æ“ä½œè¿‡å…±äº«å†…å­˜å—

- ä»€ä¹ˆæ˜¯åƒµå°¸è¿›ç¨‹(3)åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹ã€‚åƒµå°¸è¿›ç¨‹å¤ªå¤šäº†æœ‰ä»€ä¹ˆå±å®³

- 32ä½ï¼Œ4Gçš„å†…å­˜ï¼Œå†…å­˜å¸ƒå±€ï¼Œæ“ä½œç³»ç»Ÿå†…å­˜æ¨¡å‹ï¼Ÿ

- è™šæ‹Ÿå†…å­˜

- è¿›ç¨‹æ ˆä¸çº¿ç¨‹æ ˆçš„åŒºåˆ«

- è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹åŒºåˆ«ï¼Œæœ‰ä¹ˆæœ‰ç”¨è¿‡åç¨‹ï¼Ÿç®¡ç¨‹æ˜¯å•¥ï¼Ÿ

- è¿›ç¨‹åˆ‡æ¢æ€ä¹ˆåˆ‡æ¢

- è¿›ç¨‹çš„é€šä¿¡æ–¹å¼(N)ï¼Œä»¥åŠå¯¹åº”çš„åº”ç”¨åœºæ™¯ã€‚è¿›ç¨‹é—´é€šä¿¡æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹

- çˆ¶å­è¿›ç¨‹äº†è§£å—ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Ÿ

- çº¿ç¨‹èƒ½è®¿é—®è™šæ‹Ÿå†…å­˜çš„å“ªäº›ç©ºé—´

- çº¿ç¨‹é—´é€šä¿¡ï¼Ÿ

- è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€æ€ä¹ˆæ¢ç®—

- æ“ä½œç³»ç»Ÿä¸­çš„forkï¼Ÿ

- ä¸ºä»€ä¹ˆè¦IOå¤šè·¯å¤ç”¨

- epollè§¦å‘é—®é¢˜

- ä»‹ç»ä¸‹è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ï¼Œå¦‚ä½•æ˜ å°„çš„å‘¢

- CPUä¸­æ–­

- æ­»é”äº§ç”Ÿæ¡ä»¶

- æ ˆå’Œå †çš„åŒºåˆ«

- æ¯”è¾ƒåˆ†é¡µä¸åˆ†æ®µ

- æ“ä½œç³»ç»Ÿä¸­å†…å­˜ç®¡ç†ç”¨åˆ°çš„æ•°æ®ç»“æ„æœ‰å“ªäº›

- è¿›ç¨‹é—´é€šä¿¡ä¸­çš„å…±äº«å†…å­˜é€šä¿¡ï¼Œæ€ä¹ˆä¿è¯å®‰å…¨

    

##### 2. Linux

- linuxè¿›ç¨‹æ€ä¹ˆå®ç°ç±»ä¼¼ä¸€ä¸ªè¿›ç¨‹åº•ä¸‹å¤šçº¿ç¨‹çš„èµ„æºå…±äº«
- Linuxä¸­çš„æµæ§å·¥å…· Traffic Control çš„åŸç†
- Linuxå¦‚ä½•æŸ¥çœ‹å†…å­˜æƒ…å†µ
- Linuxå‘½ä»¤ ç»™æ–‡ä»¶æ”¹å æŸ¥æ–‡ä»¶ æŸ¥æ–‡ä»¶å†…å®¹ æŸ¥æš´éœ²ç«¯å£
- ä»€ä¹ˆæ˜¯è½¯ç¡¬é“¾æ¥
- çº¿ç¨‹cpuå ç”¨ç‡è¿‡é«˜ï¼Œå¦‚ä½•æŸ¥è¯¢
- linuxçš„å¯¹è±¡æ± ã€å†…å­˜ã€å†™æ—¶æ‹·è´
- linuxç³»ç»Ÿ å¦‚æœæœ‰ä¸ªè¿›ç¨‹åœ¨å†™æ•°æ®ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹ç”¨removeä¼šæ€ä¹ˆæ ·
- Linuxå†…å­˜å¸ƒå±€
- linux topå‘½ä»¤ å…·ä½“CPUè´Ÿè½½æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ ï¼ˆä¸ä¼šï¼‰
- æ€ä¹ˆæŸ¥çœ‹ç«¯å£ netstate
- æä¾›ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯ç”¨æˆ·çš„è®¿é—®è®°å½•ï¼Œç”¨shellå‘½ä»¤åšä¸€äº›ç»Ÿè®¡å·¥ä½œ



#### æ•°æ®åº“

##### 1. åŸºç¡€

- æ•°æ®åº“èŒƒå¼è®²ä¸€ä¸‹
- MySQLæ…¢æŸ¥è¯¢
- Binlogæ˜¯ä»€ä¹ˆï¼ŒRedo logå’ŒUndo logåœ¨äº‹åŠ¡ä¸­è¡¨ç°äº†æ€æ ·çš„è§’è‰²ã€‚mysql redoæ—¥å¿— undoæ—¥å¿— äºŒè¿›åˆ¶æ—¥å¿—è®²è®²ã€‚
- ä»‹ç»ä¸€ä¸‹binlog
- è¯´ä¸€ä¸‹ é«˜å¹¶å‘æƒ…å†µä¸‹mysqlä¸­update good set count = count + 1 where id = 1 ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ
- è¯´ä¸€ä¸‹ mysqlçš„for update
- è¯´ä¸€ä¸‹MySQLå¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«ä¸‹å¦‚ä½•ä¿è¯ä¸å¹»è¯»
- InnoDBã€MyisamåŒºåˆ«
- å¯é‡å¤è¯»çš„å®ç°(mvccï¼Œé”ç­‰ç­‰)ã€
- MySQLçš„é”ï¼Œé—´éš™é”ï¼Œä¹è§‚é”ï¼Œæ‚²è§‚é”æ€ä¹ˆå®ç°
- ç´¢å¼•æœ‰å“ªäº›ï¼Œæ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ
- inner joinã€left joinã€right joinçš„åŒºåˆ«ï¼Ÿ
- Mysqlå›è¡¨
- mysqlçš„undologå’Œredulogçš„æ„ä¹‰ã€‚
- MVCC
- å¤åˆç´¢å¼•çš„æ•°æ®ç»“æ„æ˜¯æ€ä¹ˆå­˜å‚¨çš„
- åˆ†å¸ƒå¼æ•°æ®åº“ äºŒé˜¶æ®µæäº¤
- æ•°æ®åº“çš„ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Œç´¢å¼•ä¸ºä»€ä¹ˆæé«˜æŸ¥æ‰¾é€Ÿåº¦ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ç´¢å¼•ï¼Œä»€ä¹ˆæ—¶å€™ä¸ç”¨
- MySQLé»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Œå¯é‡å¤è¯»æ˜¯å¦‚ä½•é¿å…å¹»è¯»ç°è±¡çš„ï¼Ÿgap lockã€next-key locksæ˜¯å±äºå“ªç§é”ï¼Ÿ
- è®²ä¸€è®²gap lockå’Œnext-key lockï¼Œå…·ä½“æ˜¯æ€ä¹ˆé”çš„ï¼Œæ¯”å¦‚age=20,é”çš„æ˜¯idè¿˜æ˜¯age
- MVCC
- èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•åŒºåˆ«ï¼Œsql è¯­å¥æ‰§è¡Œæœ‰å“ªäº›æ­¥éª¤ï¼Ÿ
- MySQL ç´¢å¼•ä½¿ç”¨çš„æ³¨æ„äº‹é¡¹
- DDLã€DMLã€DCLåˆ†åˆ«æŒ‡ä»€ä¹ˆ
- explainå‘½ä»¤
- left joinï¼Œright joinï¼Œinner join
- æ•°æ®åº“äº‹ç‰©ACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰
- äº‹ç‰©çš„éš”ç¦»çº§åˆ«ï¼ˆè¯»æœªæäº¤ã€è¯»ä»¥æäº¤ã€å¯é‡å¤è¯»ã€å¯åºåˆ—åŒ–è¯»ï¼‰
- è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»
- æ•°æ®åº“çš„å‡ å¤§èŒƒå¼
- æ•°æ®åº“å¸¸è§çš„å‘½ä»¤
- è¯´è¯´åˆ†åº“ä¸åˆ†è¡¨è®¾è®¡
- åˆ†åº“ä¸åˆ†è¡¨å¸¦æ¥çš„åˆ†å¸ƒå¼å›°å¢ƒä¸åº”å¯¹ä¹‹ç­–ï¼ˆå¦‚ä½•è§£å†³åˆ†å¸ƒå¼ä¸‹çš„åˆ†åº“åˆ†è¡¨ï¼Œå…¨å±€è¡¨ï¼Ÿï¼‰
- è¯´è¯´ SQL ä¼˜åŒ–ä¹‹é“
- MySQLé‡åˆ°çš„æ­»é”é—®é¢˜ã€å¦‚ä½•æ’æŸ¥ä¸è§£å†³
- å­˜å‚¨å¼•æ“çš„ InnoDBä¸MyISAMåŒºåˆ«ï¼Œä¼˜ç¼ºç‚¹ï¼Œä½¿ç”¨åœºæ™¯
- ç´¢å¼•ç±»åˆ«ï¼ˆB+æ ‘ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ã€å“ˆå¸Œç´¢å¼•ï¼‰ã€ç´¢å¼•çš„åŸç†
- ä»€ä¹ˆæ˜¯è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼ˆAHIï¼‰
- ä¸ºä»€ä¹ˆè¦ç”¨ B+treeä½œä¸ºMySQLç´¢å¼•çš„æ•°æ®ç»“æ„
- èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«
- é‡åˆ°è¿‡ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µæ²¡ï¼Œä»€ä¹ˆæ—¶å€™å¯èƒ½ä¼šå‡ºç°ï¼Œå¦‚ä½•è§£å†³
- limit 20000 åŠ è½½å¾ˆæ…¢æ€ä¹ˆè§£å†³
- å¦‚ä½•é€‰æ‹©åˆé€‚çš„åˆ†å¸ƒå¼ä¸»é”®æ–¹æ¡ˆ
- é€‰æ‹©åˆé€‚çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆ
- å¸¸è§çš„å‡ ç§åˆ†å¸ƒå¼IDçš„è®¾è®¡æ–¹æ¡ˆ
- å¸¸è§çš„æ•°æ®åº“ä¼˜åŒ–æ–¹æ¡ˆï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­æ•°æ®åº“å¦‚ä½•è¿›è¡Œä¼˜åŒ–çš„
- for update çš„ä¸€ä¸ªSQLæ˜¯å¦ä¼šè§¦å‘é—´éš™é”ï¼Ÿï¼ˆçŒ¿è¾…å¯¼ï¼‰

---

##### 2. åœºæ™¯è®¾è®¡

- å¤šçº¿ç¨‹äº‹åŠ¡å›æ»šï¼šå¼€å¯1ä¸‡ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¾€mysqlä¸­å†™å…¥1åƒæ¡æ•°æ®ï¼Œå…±1åƒä¸‡æ¡æ•°æ®ï¼Œå¦‚ä½•ä¿è¯è¿™ä¸€åƒä¸‡æ¡æ•°æ®è¦ä¹ˆéƒ½æ’å…¥æˆåŠŸï¼Œè¦ä¹ˆéƒ½æ’å…¥å¤±è´¥ã€‚å³å½“å…¶ä¸­ä¸€æ¡çº¿ç¨‹å‡ºç°å¼‚å¸¸ï¼Œæˆ–è€…å¤„ç†ç»“æœä¸ºéé¢„æœŸç»“æœï¼Œåˆ™å…¨éƒ¨çº¿ç¨‹å‡å›æ»šã€‚
- å¾®åšå¦‚ä½•è®¾è®¡è¡¨ï¼Œè€ƒè™‘ï¼šç”¨æˆ·ï¼Œåšæ–‡ï¼Œè¯„è®ºï¼Œç‚¹èµã€‚
- åœºæ™¯ ç«è½¦ä¹°ç¥¨ï¼Œå¤šåŒºé—´ï¼Œè®¾è®¡è¡¨
- åœºæ™¯ æŠ–éŸ³ å…³æ³¨ ç²‰ä¸ è®¾è®¡è¡¨

##### 3. æ’¸SQL

> **æŸ¥è¯¢å¹³å‡æˆç»©å¤§äºç­‰äº 60 åˆ†çš„åŒå­¦çš„å­¦ç”Ÿç¼–å·å’Œå­¦ç”Ÿå§“åå’Œå¹³å‡æˆç»©**

**å†™æ³•1**ï¼šå…ˆä»æˆç»©è¡¨åˆ†ç»„è¿‡æ»¤å¹³å‡æˆç»©å¤§äº60çš„å­¦ç”Ÿidå’Œæˆç»©ã€‚å†å’Œå­¦ç”Ÿè¡¨è¿æ¥ï¼Œè·å–å­¦ç”Ÿå§“å

```mysql
select student.s_id, student.s_name, a.avg from student
inner join (
    select s_id, avg(s_score) from score 
    group by s_id having avg(s_score)>=60
) AS a 
on student.id=a.s_id
```

**å†™æ³•2**ï¼šç›´æ¥è¿æ¥ä¸¤è¡¨ã€‚

```mysql
select a.s_id, a.s_name, avg(b.s_score) as avg_score
    from student a join score b
    on a.s_id = b.s_id
    group by 
    a.s_id
    a.s_name
    having
    avg_score >= 60;
```

----

> **ç»Ÿè®¡å…¨æ ¡é‡åæœ€å¤šçš„åä¸ªåå­—**

```mysql
select sname, count(distinct sno) as times
from student
group by sname
order by times desc
limit 10;
```

---

- sql-ç»Ÿè®¡ä¸åŒåˆ†æ•°æ®µäººæ•°
- å­¦ç”Ÿè¡¨ï¼Œæ±‚å­¦ç”Ÿçš„æ€»æˆç»©å¹¶æŒ‰æˆç»©é™åºã€‚
- å…¬å¸è¡¨ä¸å‘˜å·¥å·¥èµ„è¡¨ï¼Œæ±‚å¹³å‡å·¥èµ„å¤§äº5000çš„å…¬å¸
- sqlæŸ¥è¯¢ä¸€ä¸ªæœˆå†…æ•°æ®çš„å‰5 çš„id
- æ‰‹å†™sql æ‰¾æŸä¸ªåˆ—æœ€å¤§çš„é‚£æ¡è®°å½•
- å†™ä¸€ä¸ªç®€å•çš„å»é‡å¤çš„sqlè¯­å¥
- æ‰‹æ’•æ•°æ®åº“sqlè¯­å¥ï¼šè€å¸ˆè¡¨ã€å­¦ç”Ÿè¡¨å’Œè€å¸ˆå­¦ç”Ÿå¯¹åº”è¡¨ï¼ŒæŸ¥è¯¢å­¦ç”Ÿæœ€å¤šçš„è€å¸ˆã€‚



#### JVM

- Classç±»æ–‡ä»¶æ€ä¹ˆå›æ”¶
- xms xmxåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆ
- GC ROOTSå…·ä½“æ˜¯æ€ä¹ˆéå†çš„ï¼Ÿ
- CMSå’ŒG1çš„ä¼˜ç¼ºç‚¹ï¼ŒG1èƒ½ç™¾åˆ†ç™¾ä¿è¯åœ¨æŒ‡å®šæ—¶é—´å†…å®Œæˆå›æ”¶å—



#### Redis

- è·³è¡¨ã€‚ä»‹ç»ä¸€ä¸‹ã€ç”»ä¸€ä¸‹åŸºæœ¬ç»“æ„ï¼Œæœç´¢æ’å…¥æ•°æ®è¿‡ç¨‹ï¼Œ**æ—¶é—´å¤æ‚åº¦**ã€‚é—®åˆ°ä¸ºä»€ä¹ˆç”¨è·³è¡¨è€Œä¸æ˜¯çº¢é»‘æ ‘ï¼Ÿè·³è¡¨æ€ä¹ˆå®ç°ä»£ç æè¿°ï¼ŸæŸ¥è¯¢å’Œæ’å…¥å¤æ‚åº¦
- Redisè¿˜æœ‰ä»€ä¹ˆé«˜çº§æ•°æ®ç»“æ„ï¼Ÿ
- Redisäº†è§£å“ªäº›ï¼ˆæˆ‘æŠŠåº•å±‚çš„SDSï¼Œæ¸è¿›å¼hashï¼Œå‹ç¼©è¡¨ï¼Œraftç®—æ³•ï¼Œgossipåè®®ç–¯ç‹‚è¾“å‡ºï¼‰
- æŒä¹…åŒ–æ–¹å¼ RDB å’Œ AOFï¼Œç„¶åè¯´äº†ä¸€å †æŒ‡ä»¤ï¼Œç›¸å…³çš„æŒ‡ä»¤ã€‚
- ä½ ç”¨redisæ€ä¹ˆé¿å…ç¼“å­˜ç©¿é€
- redlock
- Rediså†…å­˜æ·˜æ±°æœºåˆ¶
- redisçš„äº”ç§å¯¹è±¡æ•°æ®ç»“æ„ï¼Œåº•å±‚ç¼–ç 
- Redisåˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆå®ç°çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è¦setnxï¼Œredisä¼šæ€ä¹ˆåš
- redisæ€ä¹ˆå®ç°äº‹åŠ¡
- Redis æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Œå¯å‚è€ƒã€Š[Rediså¸¸è§çš„5ç§ä¸åŒçš„æ•°æ®ç±»å‹è¯¦è§£](http://mp.weixin.qq.com/s?__biz=MzI1NDQ3MjQxNA==&mid=2247483987&idx=1&sn=5c5e4cd5bc73a7e6f84e5d6adfab0935&chksm=e9c5fbe2deb272f4b5b75bd2ac92bb27950452623ec83c0e1add7e30c773160421fab1571680&scene=21#wechat_redirect)ã€‹
- Redis å†…éƒ¨ç»“æ„
- Redis ä½¿ç”¨åœºæ™¯
- Redis æŒä¹…åŒ–æœºåˆ¶ï¼Œå¯å‚è€ƒã€Š[ä½¿ç”¨å¿«ç…§å’ŒAOFå°†Redisæ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸­](http://mp.weixin.qq.com/s?__biz=MzI1NDQ3MjQxNA==&mid=2247483992&idx=1&sn=8f554bc490c4db1a78a30144f873e911&chksm=e9c5fbe9deb272fff47483c241e6d2a7aae99dc8f6fe9fee31f2dd214d0cf81b33d51f7a7dbe&scene=21#wechat_redirect)ã€‹
- Redis é›†ç¾¤æ–¹æ¡ˆä¸å®ç°
- Redis ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ
- ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é¢„çƒ­ã€ç¼“å­˜æ›´æ–°ã€ç¼“å­˜é™çº§
- ä½¿ç”¨ç¼“å­˜çš„åˆç†æ€§é—®é¢˜
- Rediså¸¸è§çš„å›æ”¶ç­–ç•¥
- redisé™æµå¦‚ä½•åšçš„



#### Spring

- Spring MVCå·¥ä½œæµç¨‹
- å¸¸ç”¨æ³¨è§£è¯´ä¸€ä¸‹
- Springé‡Œé¢çš„è®¾è®¡æ¨¡å¼
- @Autowiredæ³¨è§£åŸç†
- Servletçš„ç”Ÿå‘½å‘¨æœŸ
- è½¬å‘ä¸é‡å®šå‘çš„åŒºåˆ«
- BeanFactory å’Œ ApplicationContext æœ‰ä»€ä¹ˆåŒºåˆ«
- Spring Bean çš„ç”Ÿå‘½å‘¨æœŸ
- Spring IOC å¦‚ä½•å®ç°
- Springä¸­Beançš„ä½œç”¨åŸŸï¼Œé»˜è®¤çš„æ˜¯å“ªä¸€ä¸ª
- è¯´è¯´ Spring AOPã€Spring AOP å®ç°åŸç†
- åŠ¨æ€ä»£ç†ï¼ˆCGLib ä¸ JDKï¼‰ã€ä¼˜ç¼ºç‚¹ã€æ€§èƒ½å¯¹æ¯”ã€å¦‚ä½•é€‰æ‹©
- Spring äº‹åŠ¡å®ç°æ–¹å¼ã€äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶ã€é»˜è®¤çš„äº‹åŠ¡ç±»åˆ«
- Spring äº‹åŠ¡åº•å±‚åŸç†
- Springäº‹åŠ¡å¤±æ•ˆï¼ˆäº‹åŠ¡åµŒå¥—ï¼‰ï¼ŒJDKåŠ¨æ€ä»£ç†ç»™Springäº‹åŠ¡åŸ‹ä¸‹çš„å‘ï¼Œå¯å‚è€ƒã€Š[JDKåŠ¨æ€ä»£ç†ç»™Springäº‹åŠ¡åŸ‹ä¸‹çš„å‘ï¼](http://mp.weixin.qq.com/s?__biz=MzI1NDQ3MjQxNA==&mid=2247484940&idx=1&sn=0a0a7198e96f57d610d3421b19573002&chksm=e9c5ffbddeb276ab64ff3b3efde003193902c69acda797fdc04124f6c2a786255d58817b5a5c&scene=21#wechat_redirect)ã€‹
- å¦‚ä½•è‡ªå®šä¹‰æ³¨è§£å®ç°åŠŸèƒ½
- Spring MVC è¿è¡Œæµç¨‹
- Spring MVC å¯åŠ¨æµç¨‹
- Spring çš„å•ä¾‹å®ç°åŸç†
- Spring æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼
- Spring å…¶ä»–äº§å“ï¼ˆSrping Bootã€Spring Cloudã€Spring Secuirityã€Spring Dataã€Spring AMQP ç­‰ï¼‰
- æœ‰æ²¡æœ‰ç”¨åˆ°Spring Bootï¼ŒSpring Bootçš„è®¤è¯†ã€åŸç†
- MyBatisçš„åŸç†



#### MQ

- mqæ¶ˆæ¯å¯é æ€§ é‡å¤æ¶ˆè´¹
- mqæ€ä¹ˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—
- mqåŸºæœ¬ç»„ä»¶
- Kafkaå‘é€æ¶ˆæ¯çš„ä¸‰ç§æ–¹å¼
- æ¶ˆæ¯é˜Ÿåˆ—æ€æ ·è§£å†³æ¶ˆæ¯çš„é‡å¤æ¶ˆè´¹å’Œæ¼æ¶ˆè´¹
- Kafkaã€RabbitMQã€RocketMQçš„ä¼˜ç¼ºç‚¹ï¼Œæ€ä¹ˆé€‰æ‹©ï¼Ÿ
- é¡¹ç›® æ¶ˆæ¯åŠ å…¥å¼‚æ­¥é˜Ÿåˆ—è¶…æ—¶æˆ–è€…å¤±è´¥ï¼Œä½ æ˜¯æ€ä¹ˆå¤„ç†çš„ã€‚
- æ¶ˆæ¯é˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯
- æ¶ˆæ¯çš„é‡å‘è¡¥å¿è§£å†³æ€è·¯
- æ¶ˆæ¯çš„å¹‚ç­‰æ€§è§£å†³æ€è·¯
- æ¶ˆæ¯çš„å †ç§¯è§£å†³æ€è·¯
- è‡ªå·±å¦‚ä½•å®ç°æ¶ˆæ¯é˜Ÿåˆ—
- å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§
- æœåŠ¡ç«¯æ¶ˆæ¯å †ç§¯ï¼Œå¦‚ä½•è§£æ•‘ï¼Ÿè¯´äº†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåˆ†å‘å¤„ç†ï¼Œè¿˜æœ‰å…¶ä»–æ–¹æ³•ä¹ˆï¼Ÿå¦‚æœå †ç§¯äº†ï¼Œå¯ä»¥å°†æ¶ˆæ¯ä¸¢å¼ƒä¹ˆï¼Ÿä¸ä¼šï¼Œè¯´äº†çœ‹æƒ…å†µï¼Œå¦‚æœä¸é‡è¦çš„ï¼Œå¯ä»¥ä¸¢å¼ƒã€‚
- é—®äº†ä¸€ä¸‹kafkaçš„ä¸€äº›æœºåˆ¶ã€‚é€šè¿‡kafkaæ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥è½æ•°æ®åº“æ—¶ï¼Œå¦‚ä½•ä¿è¯æ•°æ®å¯é åœ°è½åˆ°æ•°æ®åº“é‡Œã€‚
- ä¸ºä»€ä¹ˆkafkaçš„ä¸€ä¸ªpartitioné‡Œé¢çš„æ¶ˆæ¯ï¼Œä¸€ä¸ªconsumer groupé‡Œé¢åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…èƒ½æ¶ˆè´¹ï¼Œè€Œä¸èƒ½ä¸¤ä¸ªæ¶ˆè´¹è€…åŒæ—¶å¹¶è¡Œåœ°æ¶ˆè´¹ã€‚
- å¦‚æœä¸€ä¸ªæ¶ˆè´¹è€…æ‹‰èµ°äº†ä¸€æ¡æ¶ˆæ¯ï¼Œä½†æ˜¯è¿˜æ²¡æ¶ˆè´¹å°±æŒ‚äº†ï¼Œkafkaå¦‚ä½•ä¿è¯è¿™æ¡æ¶ˆæ¯èƒ½å¤Ÿè¢«æ¶ˆè´¹è€Œä¸å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€‚
- æ¶ˆæ¯é˜Ÿåˆ—å¦‚ä½•ä¿è¯ä¸ä¸¢ï¼Œä½ ä»¬æ˜¯æ€ä¹ˆåšçš„



#### ZK

- zookeeperä¸­çš„èŠ‚ç‚¹ç±»å‹ï¼ŒæœåŠ¡ç«¯å®•æœºåzkå‘ç”Ÿçš„å˜åŒ–



#### Netty

- ä¸ºä»€ä¹ˆé€‰æ‹© Netty
- è¯´è¯´ä¸šåŠ¡ä¸­ï¼ŒNetty çš„ä½¿ç”¨åœºæ™¯
- åŸç”Ÿçš„ NIO åœ¨ JDK 1.7 ç‰ˆæœ¬å­˜åœ¨ epoll bug
- ä»€ä¹ˆæ˜¯TCP ç²˜åŒ…/æ‹†åŒ…
- TCPç²˜åŒ…/æ‹†åŒ…çš„è§£å†³åŠæ³•
- Netty çº¿ç¨‹æ¨¡å‹
- è¯´è¯´ Netty çš„é›¶æ‹·è´
- Netty å†…éƒ¨æ‰§è¡Œæµç¨‹
- Netty é‡è¿å®ç°

#### åˆ†å¸ƒå¼

- è°ˆè°ˆä¸šåŠ¡ä¸­ä½¿ç”¨åˆ†å¸ƒå¼çš„åœºæ™¯
- Session åˆ†å¸ƒå¼æ–¹æ¡ˆ
- Session åˆ†å¸ƒå¼å¤„ç†
- åˆ†å¸ƒå¼é”çš„åº”ç”¨åœºæ™¯ã€åˆ†å¸ƒå¼é”çš„äº§ç”ŸåŸå› ã€åŸºæœ¬æ¦‚å¿µ
- åˆ†å¸ƒæ˜¯é”çš„å¸¸è§è§£å†³æ–¹æ¡ˆ
- åˆ†å¸ƒå¼äº‹åŠ¡çš„å¸¸è§è§£å†³æ–¹æ¡ˆ
- é›†ç¾¤ä¸è´Ÿè½½å‡è¡¡çš„ç®—æ³•ä¸å®ç°
- è¯´è¯´åˆ†åº“ä¸åˆ†è¡¨è®¾è®¡ï¼Œå¯å‚è€ƒã€Š[æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥çš„å…·ä½“å®ç°æ–¹æ¡ˆ](http://mp.weixin.qq.com/s?__biz=MzI1NDQ3MjQxNA==&mid=2247483931&idx=1&sn=6eda41aa81c1243422a603205d2fad22&chksm=e9c5fbaadeb272bc92537803c14a6f55e1170b1a3b8f60160f66417800c0ace960dfe192717a&scene=21#wechat_redirect)ã€‹
- åˆ†åº“ä¸åˆ†è¡¨å¸¦æ¥çš„åˆ†å¸ƒå¼å›°å¢ƒä¸åº”å¯¹ä¹‹ç­–



#### è®¾è®¡æ¨¡å¼

- è¯´ä¸€ä¸ªä½ æœ€ç†Ÿæ‚‰çš„è®¾è®¡æ¨¡å¼
- åŸåˆ™æœ‰å“ªäº›
- 



#### é¡¹ç›®é—®é¢˜

- é¡¹ç›®æœ€ç‰›é€¼çš„ä»£ç æ˜¯ä»€ä¹ˆï¼Ÿ
- å¦‚ä½•æå‡é¡¹ç›®æ€§èƒ½ã€‚
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–æ€ä¹ˆåšçš„
- é¡¹ç›®é‡Œé¢ç”¨äº†å“ªäº›Redisçš„æ•°æ®ç»“æ„ï¼Ÿ
- é¡¹ç›®é‡Œå‡ºç°è¿‡oomå—ï¼Œæ€ä¹ˆæ’æŸ¥
- é¡¹ç›®é‡Œç”¨è¿‡å¤šçº¿ç¨‹ç›¸å…³å—
- é¡¹ç›®æ˜¯å¦‚ä½•ä¿è¯ç¼“å­˜å’Œæ•°æ®æºçš„æ•°æ®ä¸€è‡´æ€§çš„ï¼Ÿ
- æ¡†æ¶ä¸­ä»€ä¹ˆåœ°æ–¹ç”¨åˆ°äº†åå°„ï¼Ÿ
- é¡¹ç›®ä¸­ç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ



#### æ™ºåŠ›é¢˜

---

> **ä¸€ç¡¬å¸ï¼Œä¸€é¢å‘ä¸Šæ¦‚ç‡0.7ï¼Œä¸€é¢0.3ï¼Œå¦‚ä½•å…¬å¹³ï¼Ÿ**

**æŠ›ä¸¤æ¬¡ï¼Œæ­£å A èƒœï¼Œåæ­£ B èƒœã€‚**

----

> **æ¦‚ç‡é¢˜ï¼šä¸¤ä¸ªäººè½®æµæŠ›ç¡¬å¸ï¼Œå…ˆæŠ›åˆ°æ­£é¢çš„èµ¢ï¼Œé—®å…ˆæŠ›çš„äººèµ¢çš„æ¦‚ç‡**

**2/3**ï¼šæ¯ä¸€è½®æŠ›ç¡¬å¸ï¼Œ**A å…ˆæŠ›èµ¢å¾—æ¦‚ç‡æ˜¯1/2**ï¼ŒB åæŠ›èµ¢å¾—æ¦‚ç‡æ˜¯**ï¼ˆ1/2ï¼‰*ï¼ˆ1/2ï¼‰= 1/4**ã€‚é‚£ä¹ˆæ¯ä¸€è½® A èµ¢å¾—æ¦‚ç‡éƒ½æ˜¯ B èµ¢å¾—æ¦‚ç‡çš„ 2 å€ï¼Œæ€»æ¦‚ç‡ä¸º 1ï¼Œæ‰€ä»¥ **A èµ¢çš„æ¦‚ç‡æ˜¯ 2/3**ã€‚

---

> **è¿ç»­æŠ›æ·ç¡¬å¸ï¼Œç›´åˆ°æœ€è¿‘ä¸‰æ¬¡ç¡¬å¸æŠ›æ·ç»“æœæ˜¯â€œæ­£ååâ€æˆ–è€…â€œååæ­£â€ã€‚å¦‚æœæ˜¯å‰è€…Aè·èƒœï¼›å¦‚æœæ˜¯åè€…Bè·èƒœã€‚è¿™ä¸ªæ¸¸æˆå…¬å¹³å—ï¼Ÿ**

Aå’ŒBè·èƒœçš„æ¦‚ç‡æ¯”ï¼Ÿ
ä»€ä¹ˆæƒ…å†µBå°±è·ŸAå…¬å¹³äº†ï¼Ÿ
ä»€ä¹ˆæƒ…å†µBçš„è·èƒœæ¦‚ç‡æ¯”è¾ƒå¤§ï¼Ÿ

----

> **ä¸¤æ ¹é¦™ï¼Œä¸€æ ¹çƒ§å®Œ 1 å°æ—¶ï¼Œå¦‚ä½•æµ‹é‡ 15 åˆ†é’Ÿ**

å¼€å§‹æ—¶**ä¸€æ ¹é¦™ä¸¤å¤´ç‚¹ç€**ï¼Œä¸€æ ¹é¦™åªç‚¹ä¸€å¤´ï¼Œ**ä¸¤å¤´ç‚¹ç€çš„é¦™çƒ§å®Œè¯´æ˜è¿‡å»äº†åŠå°æ—¶**ï¼Œè¿™æ—¶å°†åªç‚¹äº†ä¸€å¤´çš„é¦™å¦ä¸€å¤´ä¹Ÿç‚¹ç€ï¼Œä»è¿™æ—¶å¼€å§‹åˆ°çƒ§å®Œå°±æ˜¯ 15 åˆ†é’Ÿã€‚

---

> **64 åŒ¹é©¬ï¼Œ8 ä¸ªè·‘é“ï¼Œé€‰è·‘æœ€å¿«çš„ 4 åŒ¹é©¬éœ€è¦æ¯”èµ›å¤šå°‘æ¬¡ã€‚**

å¦‚æœ**å¯ä»¥è®¡æ—¶**çš„è¯ï¼Œåªéœ€è¦ 8 åœºå°±è¡Œäº†ã€‚

ä¸èƒ½è®¡æ—¶ï¼šé”¦æ ‡èµ›æ’åºç®—æ³•ï¼Œéœ€è¦æ¬¡æ•°ï¼š8 + 1 + 1 + 1 = **11**ã€‚

**ç¬¬ä¸€æ­¥**ï¼šé¦–å…ˆæ¯ 8 åŒ¹é©¬è·‘ä¸€æ¬¡ï¼Œæ€»å…±**éœ€è¦ 8 æ¬¡**ï¼Œå‡è®¾ç»“æœä¸­ A1>A2>A3>......,B1>B2>B3>....ç­‰ï¼Œè¿™ 8 ç»„çš„ç¬¬ä¸€åä¸ä¸€å®šå°±æ˜¯å‰ 8 åã€‚è¿™é‡Œå¯ä»¥æ·˜æ±°æ‰æ¯ç»„çš„åå››åï¼Œæ¯ç»„å 4 åä¸€å®šè¿›ä¸äº†å‰å››ã€‚è¿™é‡Œéœ€è¦**å…«åœºæ¯”èµ›**ã€‚

<img src="assets/image-20200811134851798.png" alt="image-20200811134851798" style="zoom:60%;" />

**ç¬¬äºŒæ­¥**ï¼šè¿™ 8 ç»„ä¸­çš„**ç¬¬ä¸€åæ‹‰å‡ºæ¥è·‘ä¸€æ¬¡**ï¼Œé‚£ä¹ˆ**è¿™æ¬¡æœ€å¿«çš„ä¸€å®šæ˜¯æ€»çš„ç¬¬ä¸€å**ï¼Œå‡è®¾æ˜¯ A1ï¼ŒåŒæ—¶**å‡è®¾ B1>C1>D1**ã€‚è¿™æ—¶è¿˜è¦**è§’é€ 2, 3, 4 å**ï¼Œé‚£è¿™ä¸€è½®ä¸­çš„**ç¬¬äº”ååˆ°ç¬¬å…«åéƒ½å¯ä»¥ç›´æ¥èˆå¼ƒ**ï¼Œå› ä¸ºè¿™å‡ ç»„**æ‰€æœ‰çš„é©¬**ä¸€å®šè¿›ä¸äº†å‰ 4 åã€‚è¿™é‡Œéœ€è¦ **1 åœºæ¯”èµ›**ã€‚

<img src="assets/image-20200811134946942.png" alt="image-20200811134946942" style="zoom:60%;" />

è¿™ä¸ªæ—¶å€™æ€»å† å†›å·²ç»è¯ç”Ÿï¼Œå®ƒå°±æ˜¯ A1ï¼Œè“è‰²åŒºåŸŸçš„å·²ç»å…¨éƒ¨æ·˜æ±°ï¼Œè€Œå…¶ä»–å¯èƒ½è·‘å¾—æœ€å¿«çš„ä¸‰åŒ¹é©¬åªå¯èƒ½æ˜¯ä¸‹å›¾ä¸­çš„é»„è‰²åŒºåŸŸäº†ï¼ˆ**A2, A3, A4, B1, B2, B3, C1, C2, D1**ï¼Œå…± 9 åŒ¹é©¬ï¼‰

<img src="assets/image-20200811140618275.png" alt="image-20200811140618275" style="zoom:60%;" />

**ç¬¬ä¸‰æ­¥**ï¼šåªè¦ä»ä¸Šé¢çš„ 9 åŒ¹é©¬ä¸­æ‰¾å‡ºè·‘å¾—**æœ€å¿«çš„ä¸‰åŒ¹é©¬**å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ç°åœ¨åªè¦ 8 ä¸ªè·‘é“ï¼Œ**æ€ä¹ˆåŠ**ï¼Ÿé‚£å°±**éšæœºé€‰å‡º 8 åŒ¹é©¬**è¿›è¡Œä¸€æ¬¡æ¯”èµ›ï¼Œè¿™é‡Œéœ€è¦**æ¯”èµ›ä¸€åœº**ã€‚

**ç¬¬å››æ­¥**ï¼šä¸Šé¢æ¯”èµ›å®Œï¼Œé€‰å‡ºäº†**å‰ä¸‰å**ï¼Œä½†æ˜¯ 9 åŒ¹é©¬ä¸­**è¿˜æœ‰ä¸€åŒ¹é©¬**æ²¡è·‘ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªæ½œåŠ›è‚¡å•Šï¼Œé‚£å°±å’Œ**å‰ä¸‰åæ¯”ä¸€æ¯”**ï¼Œè¿™**å››åŒ¹é©¬æ¯”ä¸€åœºï¼Œé€‰å‡ºå‰ä¸‰å**ã€‚æœ€ååŠ ä¸Šæ€»å† å†›ï¼Œå°±æ˜¯æœ€å¿«çš„å››åŒ¹é©¬ï¼Œè¿™é‡Œéœ€è¦**ä¸€åœºæ¯”èµ›**ã€‚

æ‰€ä»¥**æ€»å…± 11 åœº**æ¯”èµ›ã€‚ä½†æ˜¯å¦‚æœç¬¬ 10 è½®é€‰æ‹© A4 ä¸ä¸Šåœºï¼Œå¦‚æœ A3 è·å¾—äº†ç¬¬ 4 åï¼Œé‚£ä¹ˆ A4 å°±ä¸éœ€è¦æ¯”èµ›äº†ï¼Œè¿™æ ·æ€»å…±å°±æ˜¯ 10 åœºã€‚

ä½†æ˜¯è¿™é‡Œå¯èƒ½ä¼šé—®æœ€å°‘çš„æ¬¡æ•°ï¼Œæœ€å°‘çš„è¯åº”è¯¥ 9 æ¬¡å°±è¡Œäº†ï¼Œå‰é¢ 8 æ¬¡å¿…é¡»çš„ï¼Œç¬¬ 9 æ¬¡åˆ™åˆšå¥½é‡åˆ°ã€‚

å˜åŒ–é¢˜ï¼š25 åŒ¹é©¬ï¼Œ5 ä¸ªèµ›é“ï¼Œæœ€å°‘æ¯”å‡ æ¬¡èƒ½æ‰¾å‡ºæœ€å¿«çš„ 3 åŒ¹é©¬ã€‚

---

> **åæ ‡ç³»ä¸­æœ‰ä¸€ä¸ªçƒæ¡Œï¼Œå››ä¸ªè§’åæ ‡ï¼š(0,0), (0,4), (2,4), (2,0)ï¼Œä¸€é¢—çƒåœ¨(1,1)ï¼Œè¯·é—®ä»å“ªäº›è§’åº¦å¯ä»¥å°„å…¥æ´å†…ï¼ˆå¯æ— é™æ¬¡ç¢°æ’ï¼‰ï¼Ÿ**

ä¸€èˆ¬æƒ³æ³•æ˜¯å°†çƒé•œåƒå¯¹ç§°ï¼Œä½†è¿™é“é¢˜æ˜¯æŠŠ**æ´é•œåƒå¯¹ç§°**ã€‚**å°†è¿™ä¸ªæ¡Œé¢åœ¨è¿™ä¸ªå¹³é¢æ— é™å»¶å±•ï¼Œå¯ç±»æ¯”æˆæ— é™å¼ çƒæ¡Œç´§å¯†æ”¾ç½®**ã€‚**é‚£ä¹ˆæ¯ä¸€ä¸ªå’Œçƒæ´çš„è¿çº¿éƒ½æ˜¯åˆæ³•è·¯å¾„**ã€‚

---

> **54 å¼ æ‰‘å…‹ç‰Œï¼Œå¹³å‡åˆ†æˆ 3 ä»½ï¼Œå¤§å°ç‹åœ¨åŒä¸€ä»½çš„æ¦‚ç‡**

é¦–å…ˆ**å¤§ç‹**ä¸€å®šä¼šåœ¨æŸä¸€ä»½ä¸­ï¼Œç„¶åè¦è®¡ç®—**è¿™ä¸€ä»½ä¸­è¿˜è¦åŒ…å«å°ç‹çš„æ¦‚ç‡**ã€‚å»æ‰å¤§ç‹è¿˜å‰© 53 å¼ ç‰Œï¼Œè¿™ä¸€ä»½è¿˜å¯ä»¥åˆ† 17 å¼ ç‰Œï¼Œé‚£ä¹ˆ**æ¯æ¬¡åˆ†åˆ°å°ç‹çš„æ¦‚ç‡æ˜¯ 1/53**ï¼Œæ‰€ä»¥**æ€»æ¦‚ç‡æ˜¯17/53**ã€‚

<img src="assets/image-20200810164840311.png" alt="image-20200810164840311" style="zoom:50%;" />

---

> **æœ‰ n ä¸ªè‹¹æœï¼Œä¸¤ä¸ªäººå»å–ï¼Œæ¯æ¬¡åªèƒ½å–ä¸€ä¸ªæˆ–ä¸¤ä¸ªï¼Œå–åˆ°æœ€åä¸€ä¸ªå°±è¾“ï¼Œè¯·é—®æœ‰æ²¡æœ‰å¿…èƒœçš„æ–¹æ³•ï¼Œä½ åº”è¯¥å…ˆå–è¿˜æ˜¯åå–ï¼Ÿ**

ç”¨ n å¯¹ 3 è¿›è¡Œå–æ¨¡ï¼Œå¦‚æœå–æ¨¡çš„ç»“æœæ˜¯ 0 æˆ–è€… 2ï¼Œå°±å…ˆå–ï¼Œå¦‚æœç»“æœæ˜¯ 1ï¼Œå°±åå–ï¼Œè¿™æ ·å¯ä»¥ç«‹äºä¸è´¥ä¹‹åœ°ã€‚

---

> **12ä¸ªçƒ ä¸€ä¸ªä¸ä¸€æ ·ï¼Œè½»æˆ–é‡ï¼Œç§¤å‡ æ¬¡å¯ä»¥æ‰¾åˆ°**

---

> **æœ‰nä¸ªç‚¹ï¼Œéƒ½è½åœ¨åœ†å‘¨ä¸Šï¼Œé—®æ‰€æœ‰ç‚¹éƒ½è½åœ¨ç›´å¾„ä¸€ä¾§çš„æ¦‚ç‡æ˜¯å¤šå°‘**

---

> **ä¸€ä¸ªè·¯å£è§‚å¯Ÿååˆ†é’Ÿæœ‰è½¦ç»è¿‡çš„æ¦‚ç‡æ˜¯99%ï¼Œé‚£ä¹ˆäº”åˆ†é’Ÿèƒ½è§‚å¯Ÿåˆ°æœ‰è½¦ç»è¿‡çš„æ¦‚ç‡æ˜¯å¤šå°‘ã€‚**

---

#### åœºæ™¯åŠç³»ç»Ÿè®¾è®¡é¢˜

å¦‚æœä½ çš„ç”¨æˆ·ååº”é¡µé¢åˆ·ä¸å‡ºæ¥ä½ ä¼šå¦‚ä½•æ’æŸ¥

----

æœåŠ¡å™¨å†…å­˜æ³„æ¼ï¼Œæ€ä¹ˆæ’æŸ¥é—®é¢˜ï¼Ÿå…·ä½“ä½¿ç”¨è¿™äº›å·¥å…·æŒ‰ä»€ä¹ˆè§„åˆ™æ’æŸ¥ã€

---

å¦‚æœä¸€å°æœºå­è®¿é—®é‡é«˜ï¼Œéƒ½æ˜¯tcpçŸ­è¿æ¥ï¼Œå¯èƒ½ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿï¼ˆä¸å¤ªæ‡‚ï¼‰

---

**è®©ä½ è®¾è®¡ä¸€ä¸ªå¾®ä¿¡å‘çº¢åŒ…çš„apiï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Œä¸èƒ½æœ‰äººé¢†åˆ°çš„çº¢åŒ…é‡Œé¢æ²¡é’±ï¼Œçº¢åŒ…æ•°å€¼ç²¾ç¡®åˆ°åˆ†ã€‚**

ä¼ å…¥å‚æ•°æœ‰æ€»é’±æ•°ï¼Œåˆ†çš„ä»½æ•°ï¼Œéšæœºåˆ†è¿˜æ˜¯ç­‰åˆ†ã€‚å…ˆåˆ¤æ–­é’±æ•°èƒ½ä¸èƒ½åˆ†é‚£ä¹ˆå¤šä»½ï¼Œè¿™ä¸ªç›´æ¥ç”¨æ€»é’±æ•°>=0.01ä»½æ•°åˆ¤æ–­å°±å¯ä»¥äº†ã€‚ç„¶åæ ¹æ®åˆ†å‘ç­–ç•¥ï¼Œé€‰æ‹©éšæœºè¿˜æ˜¯ç­‰åˆ†ï¼Œéšæœºçš„è¯å°±ç»™ 1åˆ°æ€»é’±æ•°-ï¼ˆæ€»ä»½æ•°-1ï¼‰0.01 çš„éšæœºæ•°ï¼ˆæ€»é’±æ•°ä»¥åˆ†ä¸ºå•ä½ï¼‰ï¼Œç­‰åˆ†çš„è¯ç›´æ¥é™¤åˆ¤æ–­èƒ½ä¸èƒ½é™¤å¼€ï¼Œæœ‰ä½™æ•°å°±å°†ä½™æ•°åŠ åˆ°æœ€åä¸€ä»½é‡Œé¢ã€‚

å‘çº¢åŒ…çš„ç®—æ³•ï¼š

äºŒå€å‡å€¼æ³•ï¼šå‡è®¾**å‰©ä½™**çº¢åŒ…é‡‘é¢ä¸º m å…ƒï¼Œ**å‰©ä½™äººæ•°ä¸º n**ï¼Œé‚£ä¹ˆæœ‰å¦‚ä¸‹å…¬å¼ï¼š

**æ¯æ¬¡æŠ¢åˆ°çš„é‡‘é¢ = éšæœºåŒºé—´ [0.01ï¼Œm / n Ã— 2 - 0.01]å…ƒ**ã€‚

---

**éœ€æ±‚ï¼šè°å…³æ³¨äº†æˆ‘ï¼Œæˆ‘å…³æ³¨äº†è°ï¼Œè°ä¸æˆ‘äº’ç›¸å…³æ³¨ã€‚è¡¨è¯¥å¦‚ä½•è®¾è®¡ï¼Œç´¢å¼•æ€ä¹ˆå»ºã€‚æŸ¥è¯¢è¯­å¥æ€ä¹ˆå†™**

**ç²‰ä¸å…³æ³¨è¡¨ä½¿ç”¨å››åˆ—**ï¼Œä¸»é”® idï¼ŒuserIdï¼ŒfansIdï¼Œæ˜¯å¦äº’ç›¸å…³æ³¨ã€‚**ç”¨ä¸¤è¡Œæ•°æ®æ¥ä¿å­˜äº’ç›¸çš„å…³æ³¨å…³ç³»**ï¼Œè¿™æ ·æŸ¥è¯¢èµ·æ¥æ›´æ–¹ä¾¿ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚

ä¸»é”®æœ‰ä¸»é”®ç´¢å¼•ï¼Œå‰©ä¸‹çš„å­—æ®µä¸é€‚åˆå»ºç´¢å¼•ï¼Œå› ä¸ºå­—æ®µé‡å¤å¤ªå¤šã€‚

---

**åˆ†å¸ƒå¼å¤šä¸ªæœºå™¨ç”Ÿæˆidï¼Œå¦‚ä½•ä¿è¯ä¸é‡å¤?**

**snowflakeæ–¹æ¡ˆ**ã€**ç”¨Redisç”ŸæˆID**

----

**æ•°æ®åº“è¿æ¥æ± æ€ä¹ˆè®¾è®¡?**

éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼š      

1. é™åˆ¶è¿æ¥æ± ä¸­æœ€å¤šã€å¯ä»¥å®¹çº³çš„è¿æ¥æ•°ç›®ï¼Œé¿å…è¿‡åº¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚               
2. å½“å®¢æˆ·è¯·æ±‚è¿æ¥ï¼Œè€Œè¿æ¥æ± ä¸­æ‰€æœ‰è¿æ¥éƒ½å·²è¢«å ç”¨æ—¶ï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿä¸€ç§æ–¹å¼æ˜¯è®©å®¢æˆ·ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æœ‰ç©ºé—²è¿æ¥ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯ä¸ºå®¢æˆ·åˆ†é…ä¸€ä¸ªæ–°çš„ä¸´æ—¶è¿æ¥ã€‚               
3. å½“å®¢æˆ·ä¸å†ä½¿ç”¨è¿æ¥ï¼Œéœ€è¦æŠŠè¿æ¥é‡æ–°æ”¾å›è¿æ¥æ± ã€‚               
4. è¿æ¥æ± ä¸­å…è®¸å¤„äºç©ºé—²çŠ¶æ€çš„è¿æ¥çš„æœ€å¤§é¡¹ç›®ã€‚å‡å®šå…è®¸çš„æœ€é•¿ç©ºé—²æ—¶é—´ä¸ºååˆ†é’Ÿï¼Œå¹¶ä¸”å…è®¸ç©ºé—²çŠ¶æ€çš„è¿æ¥æœ€å¤§æ•°ç›®ä¸º5ï¼Œ              

é‚£ä¹ˆå½“è¿æ¥æ± ä¸­æœ‰nä¸ª(n>5)è¿æ¥å¤„äºç©ºé—²çŠ¶æ€çš„æ—¶é—´è¶…è¿‡ååˆ†é’Ÿæ—¶ï¼Œ**å°±åº”è¯¥æŠŠn-5ä¸ªè¿æ¥å…³é—­ï¼Œå¹¶ä¸”ä»è¿æ¥æ± ä¸­åˆ é™¤ï¼Œ**è¿™æ ·æ‰èƒ½æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚

----

**æ‰«ç ç™»å½•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ**

---

**1äº¿ä¸ªæ­£æ•´æ•°,èŒƒå›´æ˜¯0-42äº¿ã€‚æ±‚å‡ºç°æ¬¡æ•°æ˜¯2çš„æ•°å­—ï¼Œç©ºé—´å¤æ‚åº¦**

ç”¨ä½å›¾bitMapã€‚ä½å›¾æ˜¯ä»¥bitä½ä¸ºå•ä½è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œè¿™æ ·æ¯ä¸ªå­—èŠ‚8ä¸ªä½å°±å¯ä»¥å­˜å‚¨8ä¸ªæ•°å­—ï¼Œæ™®é€šçš„ä¸€ä¸ªintå 4ä¸ªå­—èŠ‚ï¼Œ32ä½ï¼Œç”¨äº†ä½å›¾ä¹‹åå¯ä»¥å°†ç©ºé—´èŠ‚çœ32å€ã€‚      

å¼€ä¸€ä¸ª42äº¿å¤§å°çš„ä½å›¾ï¼Œå°†è¿™ä¸€äº¿ä¸ªæ•°å­—å­˜è¿›æ•°å­—å¤§å°å¯¹åº”çš„ä½ç½®ï¼Œä¸€ä¸ªbitæ¯å­˜è¿›å»ä¸€ä¸ªæ•°å­—ï¼Œå°±å°†value+1,æ¯”å¦‚ç¬¬ä¸€æ¬¡å­˜8ï¼Œå°±å°†ç´¢å¼•ä¸º8çš„ä½ç½®çš„valueç½®ä¸º1ï¼Œç¬¬äºŒæ¬¡å°±ç½®ä¸º2ï¼Œå­˜å®Œä¹‹åæœç´¢valueä¸º2çš„keyæ˜¯å¤šå°‘ã€‚      

32ä½æœºå™¨æœ€å¤§èƒ½è¡¨ç¤ºçš„æ•°å­—æ˜¯42äº¿9åƒå¤šä¸‡ã€‚      

42äº¿bit /(8 * 1024 * 1024) = 500MBã€‚

----

**ç®—æ³•ï¼šæœ‰ä¸€ä¸ªIPåœ°å€åº“ï¼Œå‡è®¾æœ‰å‡ åä¸‡æ¡ipï¼Œå¦‚ä½•åˆ¤æ–­æŸä¸ªipåœ°å€æ˜¯å¦åœ¨è¿™ä¸ªåº“ä¸­ï¼Ÿ**

**æ€è·¯ä¸€**ï¼šåˆ†æ²»æ³•ï¼Œå°†ipåœ°å€æ ¹æ®å‰ä¸‰ä½åˆ†æˆ256ä»½ï¼Œç„¶åçœ‹è¿™ä¸ªipåœ°å€å¯¹åº”çš„ç½‘æ®µï¼Œåªæ¯”å¯¹è¿™ä¸ªç½‘æ®µé‡Œé¢æ˜¯å¦æœ‰è¿™ä¸ªipï¼Œå½“ç„¶è¿˜å¯ä»¥ç»§ç»­åˆ†ä¸‹å»ï¼Œæ ¹æ®æ•°æ®é‡æ¥å†³å®šåˆ†æˆå¤šå°‘ä»½ã€‚      

**æ€è·¯äºŒ**ï¼šä½å›¾ï¼Œå°†æ¯ä¸€æ¡ipå¯¹åº”ä½å›¾ä¸­çš„ä¸€ä¸ªä½ï¼Œ2^32æ¬¡æ–¹(42äº¿å¤š)ä¸ªæ•°æ®åªéœ€è¦512Mç©ºé—´ã€‚å¯ä»¥å®ç°O(1)çš„æ—¶é—´æœç´¢ï¼ŒO(n)çš„æ—¶é—´å­˜å‚¨ã€‚

----

**åœºæ™¯é¢˜ï¼š2gå†…å­˜ï¼Œè¦æ±‚ä¸€ä¸ª10gæ–‡ä»¶çš„ä¸­ä½æ•°**

http://blog.sina.com.cn/s/blog_8e9c63c70101f5pl.html

----

**æƒ…æ™¯é¢˜ï¼Œä¸€ä¸ª5Tçš„æ–‡ä»¶ï¼Œé‡Œé¢å…¨æ˜¯idï¼Œ1-10^9 ï¼Œå¦‚ä½•è®¡ç®—ä¸åŒidçš„ä¸ªæ•°ï¼Ÿ**

å“ˆå¸Œåˆ°ä¸åŒçš„æ–‡ä»¶ï¼Œå†é€ä¸ªæ–‡ä»¶å†…æ‰¾ä¸åŒçš„ã€‚

----

**åœºæ™¯é¢˜ï¼šRedisè®¾ç½®é«˜å¹¶å‘æŠ¢å•ä¸€çš„ä¸œè¥¿ï¼Œå¦‚ä½•é¿å…é«˜å¹¶å‘å¯¹ä¸€ä¸ªé”®è¿›è¡Œè®¿é—®ï¼Ÿ**

----

**åœºæ™¯è®¾è®¡ï¼šç³»ç»Ÿä¸­æœ‰å‡ ä¸‡ä¸ªä»»åŠ¡éœ€è¦åœ¨å„è‡ªçš„ç‰¹å®šæ—¶åˆ»è§¦å‘æ‰§è¡Œï¼Œæ€ä¹ˆåšï¼Ÿ**

----

**åœºæ™¯é¢˜ï¼šæ¸¸æˆé‡Œï¼Œä¸€ä¸ªç©å®¶å¯èƒ½åƒåˆ°å¾ˆå¤šç§debuffï¼Œæ¯ä¸ªdebuffæœ‰ä¸€å®šæŒç»­æ—¶é—´ã€‚ç»™ä½ ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ€ä¹ˆè®¾è®¡æ•°æ®ç»“æ„ï¼Œæ¥ç»´æŠ¤ç©å®¶çš„debuffçŠ¶æ€ï¼Ÿ**

----

**ä¸€ä¸ªå¾ˆå¤æ‚çš„åœºæ™¯ï¼Œå¤§æ¦‚æ˜¯å¾®åšç”¨æˆ·æœ‰ä¸ªå…³æ³¨åˆ—è¡¨ï¼Œä»¥åŠçŸ¥é“å„ç§å¤§Vçš„åŠ¨æ€ï¼Œè®¾è®¡æ•°æ®ç»“æ„å•¥çš„ï¼Œåˆ°æœ€ååœ¨ç”¨æˆ·è¿™è¾¹æ˜¾ç¤ºä¸€ä¸ªæ›´æ–°å¾®åšåˆ—è¡¨è¿™æ ·ã€‚æœ€åæ‰¯äº†ä¸€å †å›´ç»•çº¢é»‘æ ‘çš„å®ç°**

----

åƒä¸‡æ•°æ®æŸ¥ä¸€ä¸ªidçš„å‡ºç°æ¬¡æ•° è¦æ±‚æ—¶é—´ç©ºé—´å¤æ‚åº¦å°½é‡ä¼˜åŒ–

---

å¦‚ä½•å®ç°å¾®ä¿¡çš„â€œæ¶ˆæ¯æ’¤å›â€

â€œæ¶ˆæ¯æ’¤å›â€ä¸ºä»€ä¹ˆè¦ç»™å®šæ—¶é—´é™åˆ¶

å¦‚ä½•å®ç°ä¸€ä¸ªç±»ä¼¼æœ‹å‹åœˆçš„åŠŸèƒ½

----

ä¸¤ä¸ªç”¨æˆ·åŒæ—¶æ”¯ä»˜è®¢å•ï¼Œå¦‚ä½•ä¸é‡å¤æ”¯ä»˜

ä¸¤ä¸ªç”¨æˆ·åŒæ—¶ç™»å½•ï¼Œå¦‚ä½•æŠŠå¦å¤–ä¸€ä¸ªç”¨æˆ·æŒ¤ä¸‹çº¿ï¼›

---

è®¾è®¡ä¸€ä¸ªçŸ­ç½‘å€ç³»ç»Ÿ

----

å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤

---

å¦‚ä½•è®¾è®¡ä¸€ä¸ªç”Ÿæˆå”¯ä¸€UUIDçš„ç®—æ³•ï¼Ÿ

---

æ‰«æäºŒç»´ç ç™»å½•çš„è¿‡ç¨‹è§£æï¼›

---

å®ç°ä¸€ä¸ªè´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼ŒæœåŠ¡å™¨èµ„æºåˆ†é…ä¸º70%ã€20%ã€10%ï¼›

#### HRé¢

- å…´è¶£çˆ±å¥½
- æœ€å¤§çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹
- é¡¹ç›®åˆ†å·¥
- é¡¹ç›®ä¸­æœ€å¤§çš„å›°éš¾ï¼Œå¦‚ä½•è§£å†³çš„
- æœ‰å“ªäº›offerï¼Ÿå·²ç»æŠ•äº†å“ªäº›å…¬å¸ï¼Ÿ
- ä¸ºä»€ä¹ˆè½¬ä¸“ä¸šï¼Ÿï¼ˆæœºæ¢°å°±åšè‡ªåŠ¨åŒ–ç›¸å…³çš„ï¼Œç ”ç©¶ç”Ÿåšç‰©è”ç½‘ï¼‰
- é¡¹ç›®è§’è‰²
- é¡¹ç›®ä¸­æ‰€é‡åˆ°çš„æŒ‘æˆ˜ï¼Œéš¾ç‚¹
- èŒä¸šè§„åˆ’
- åšè¿‡æœ€æœ‰æˆå°±æ„Ÿçš„äº‹æƒ…
- é‡åˆ°è¿‡çš„æœ€å¤§å›°éš¾
- è¯´è¯´ä½ çš„ä¼˜ç¼ºç‚¹ã€äº®ç‚¹
- è¯´è¯´ä½ æœ€è¿‘åœ¨çœ‹ä»€ä¹ˆä¹¦ã€ä»€ä¹ˆåšå®¢ã€åœ¨ç ”ç©¶ä»€ä¹ˆæ–°æŠ€æœ¯ã€å†çœ‹é‚£äº›å¼€æºé¡¹ç›®çš„æºä»£ç 
- è¯´è¯´ä½ è§‰å¾—æœ€æœ‰æ„ä¹‰çš„æŠ€æœ¯ä¹¦ç±
- å·¥ä½œä¹‹ä½™åšä»€ä¹ˆäº‹æƒ…ã€å¹³æ—¶æ˜¯å¦‚ä½•å­¦ä¹ çš„ï¼Œæ€æ ·æå‡è‡ªå·±çš„èƒ½åŠ›
- è¯´è¯´ä¸ªäººå‘å±•æ–¹å‘æ–¹é¢çš„æ€è€ƒ
- è¯´è¯´ä½ è®¤ä¸ºçš„æœåŠ¡ç«¯å¼€å‘å·¥ç¨‹å¸ˆåº”è¯¥å…·å¤‡å“ªäº›èƒ½åŠ›
- è¯´è¯´ä½ è®¤ä¸ºçš„æ¶æ„å¸ˆæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæ¶æ„å¸ˆä¸»è¦åšä»€ä¹ˆ
- å¦‚ä½•çœ‹å¾…åŠ ç­çš„é—®é¢˜
- å¹³æ—¶å¦‚ä½•å­¦ä¹ çš„ï¼ˆå…ˆåº”ç”¨ã€å†åŸç†å’Œæºç ï¼›çœ‹ä¹¦ã€è§†é¢‘ã€ä¸“æ ã€æºç ï¼‰

#### åé—®é—®é¢˜

- æ˜¯å¦å¯ä»¥æå‰å®ä¹ ï¼Ÿ
- å¯¹æ–°äººæ˜¯å¦‚ä½•åŸ¹å…»çš„ï¼Ÿ